2026-01-21 17:37:35,054 - src.data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:37:35,055 - src.data_fetcher - INFO - Creating comprehensive dataset for SPY (2025-09-23 to 2026-01-21)
2026-01-21 17:37:35,055 - src.data_fetcher - INFO - Fetching SPY data from 2025-09-23 to 2026-01-21
2026-01-21 17:37:35,957 - src.data_fetcher - INFO - Successfully fetched 82 rows for SPY
2026-01-21 17:37:35,957 - src.data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:37:35,957 - src.data_fetcher - INFO - Fetching VIX and VVIX data from 2025-09-23 to 2026-01-21
2026-01-21 17:37:36,261 - src.data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 17:37:36,262 - src.data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 17:37:36,262 - src.data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 17:37:36,288 - src.data_fetcher - ERROR - Error creating comprehensive dataset: 'Adj Close'
2026-01-21 17:38:44,806 - src.data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:38:44,806 - src.data_fetcher - INFO - Creating comprehensive dataset for SPY (2025-09-23 to 2026-01-21)
2026-01-21 17:38:44,806 - src.data_fetcher - INFO - Fetching SPY data from 2025-09-23 to 2026-01-21
2026-01-21 17:38:45,704 - src.data_fetcher - INFO - Successfully fetched 82 rows for SPY
2026-01-21 17:38:45,704 - src.data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:38:45,705 - src.data_fetcher - INFO - Fetching VIX and VVIX data from 2025-09-23 to 2026-01-21
2026-01-21 17:38:45,991 - src.data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 17:38:45,991 - src.data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 17:38:45,991 - src.data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 17:38:46,006 - src.data_fetcher - INFO - VIX proxy created with shape: (58, 2)
2026-01-21 17:38:46,006 - src.data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 17:38:46,651 - src.data_fetcher - INFO - Credit spread proxy computed, shape: (82,)
2026-01-21 17:38:46,651 - src.data_fetcher - INFO - Computing market breadth proxy
2026-01-21 17:38:46,999 - src.data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 17:38:47,326 - src.data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 17:38:47,619 - src.data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 17:38:47,919 - src.data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 17:38:48,227 - src.data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 17:38:48,510 - src.data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 17:38:48,856 - src.data_fetcher - WARNING - Could not fetch JPM
2026-01-21 17:38:49,202 - src.data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 17:38:49,495 - src.data_fetcher - WARNING - Could not fetch V
2026-01-21 17:38:49,872 - src.data_fetcher - WARNING - Could not fetch WMT
2026-01-21 17:38:49,873 - src.data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 17:38:49,877 - src.data_fetcher - WARNING - Remaining NaN values after filling: 82
2026-01-21 17:38:49,878 - src.data_fetcher - INFO - Comprehensive dataset created: shape=(82, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 17:39:55,117 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:39:55,118 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 17:39:55,118 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 17:39:55,118 - main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:39:55,118 - main - INFO - 
======================================================================
2026-01-21 17:39:55,118 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-21 17:39:55,118 - main - INFO - ======================================================================
2026-01-21 17:39:55,118 - main - INFO - ============================================================
2026-01-21 17:39:55,118 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 17:39:55,118 - main - INFO - ============================================================
2026-01-21 17:39:55,118 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:39:55,118 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 17:39:56,124 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 17:39:56,124 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:39:56,124 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 17:39:56,556 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 17:39:56,556 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 17:39:56,556 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 17:39:56,585 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 17:39:56,585 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 17:39:57,728 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 17:39:57,728 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 17:39:58,231 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 17:39:58,738 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 17:39:59,211 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 17:39:59,770 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 17:40:00,342 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 17:40:00,783 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 17:40:01,315 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 17:40:01,896 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 17:40:02,366 - data_fetcher - WARNING - Could not fetch V
2026-01-21 17:40:02,860 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 17:40:02,860 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 17:40:02,862 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 17:40:02,863 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 17:40:02,863 - main - INFO - Data shape: (2778, 9)
2026-01-21 17:40:02,863 - main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 17:40:02,864 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 17:40:02,864 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 17:40:02,864 - main - INFO - Basic indicators computed
2026-01-21 17:40:02,864 - main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 17:40:02,864 - main - INFO - Volatility mean: 0.148804
2026-01-21 17:40:02,865 - main - INFO - NaN count after preparation: 2799
2026-01-21 17:40:02,865 - main - WARNING - Remaining NaN values: 2799
2026-01-21 17:40:02,866 - main - INFO - NaN values after filling: 2778
2026-01-21 17:40:02,866 - main - INFO - ============================================================
2026-01-21 17:40:02,866 - main - INFO - STAGE 2: Signal Processing
2026-01-21 17:40:02,866 - main - INFO - ============================================================
2026-01-21 17:40:02,866 - main - INFO - Applying Kalman Filter...
2026-01-21 17:40:02,866 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 17:40:03,324 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 17:40:03,324 - main - INFO - Training HMM for regime detection...
2026-01-21 17:40:03,324 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 17:40:03,324 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 17:40:06,123 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.295659513808 is not greater than 14653.589855627419. Delta is -0.2941961136111786
2026-01-21 17:40:06,123 - signal_processor - INFO - HMM training complete
2026-01-21 17:40:06,123 - signal_processor - INFO - Transition matrix:
[[9.81051007e-01 1.89489931e-02 9.14740685e-14]
 [2.58347946e-02 9.65555306e-01 8.60989924e-03]
 [1.29002292e-64 3.36032522e-02 9.66396748e-01]]
2026-01-21 17:40:06,123 - signal_processor - INFO - Means:
[[ 0.00076075  0.08950374]
 [ 0.00042642  0.1709252 ]
 [-0.00054373  0.34799507]]
2026-01-21 17:40:06,124 - main - INFO - Predicting regimes...
2026-01-21 17:40:06,124 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 17:40:06,126 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 17:40:06,127 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 17:40:06,127 - main - INFO - Calculating technical indicators...
2026-01-21 17:40:06,127 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 17:40:06,128 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 17:40:06,128 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 17:40:06,142 - signal_processor - INFO - ADX calculation complete. Shape: (5556,)
2026-01-21 17:40:06,142 - signal_processor - INFO - ADX mean: nan, std: nan
2026-01-21 17:40:06,142 - main - INFO - Generating hybrid signals...
2026-01-21 17:40:06,142 - strategy - INFO - Generating hybrid signals
2026-01-21 17:40:06,188 - strategy - INFO - Signals generated: 0 STRONG_SELL, 0 SELL
2026-01-21 17:40:06,191 - main - INFO - Signal generation complete:
2026-01-21 17:40:06,191 - main - INFO - Signal distribution:
signal
0    2778
Name: count, dtype: int64
2026-01-21 17:40:06,192 - main - INFO - ============================================================
2026-01-21 17:40:06,192 - main - INFO - STAGE 3: Backtesting
2026-01-21 17:40:06,192 - main - INFO - ============================================================
2026-01-21 17:40:06,194 - main - INFO - Backtest Results:
2026-01-21 17:40:06,194 - main - INFO -   Total Return: 297.20% (Benchmark: 297.20%)
2026-01-21 17:40:06,194 - main - INFO -   CAGR: 13.29% (Benchmark: 13.29%)
2026-01-21 17:40:06,194 - main - INFO -   Max Drawdown: -33.72%
2026-01-21 17:40:06,194 - main - INFO -   Sharpe Ratio: 0.794
2026-01-21 17:40:06,194 - main - INFO -   Sortino Ratio: 0.966
2026-01-21 17:40:06,194 - main - INFO -   Win Rate: 54.79%
2026-01-21 17:40:06,196 - main - INFO - ============================================================
2026-01-21 17:40:06,196 - main - INFO - STAGE 4: Visualization
2026-01-21 17:40:06,196 - main - INFO - ============================================================
2026-01-21 17:40:07,215 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-21 17:40:07,563 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-21 17:40:07,836 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-21 17:40:07,850 - main - INFO - All visualizations saved
2026-01-21 17:40:07,850 - main - INFO - ============================================================
2026-01-21 17:40:07,850 - main - INFO - STAGE 5: Report Generation
2026-01-21 17:40:07,850 - main - INFO - ============================================================
2026-01-21 17:40:07,851 - main - INFO - Report saved to results/backtest_report.json
2026-01-21 17:40:07,851 - main - INFO - 
======================================================================
2026-01-21 17:40:07,852 - main - INFO - ======================================================================
2026-01-21 17:42:13,645 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:42:13,645 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 17:42:13,645 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 17:42:13,645 - main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:42:13,645 - main - INFO - 
======================================================================
2026-01-21 17:42:13,645 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-21 17:42:13,645 - main - INFO - ======================================================================
2026-01-21 17:42:13,646 - main - INFO - ============================================================
2026-01-21 17:42:13,646 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 17:42:13,646 - main - INFO - ============================================================
2026-01-21 17:42:13,646 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:42:13,646 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 17:42:14,810 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 17:42:14,811 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:42:14,811 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 17:42:15,275 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 17:42:15,275 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 17:42:15,275 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 17:42:15,318 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 17:42:15,318 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 17:42:16,440 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 17:42:16,440 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 17:42:16,979 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 17:42:17,454 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 17:42:17,980 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 17:42:18,499 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 17:42:19,045 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 17:42:19,528 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 17:42:20,076 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 17:42:20,704 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 17:42:21,190 - data_fetcher - WARNING - Could not fetch V
2026-01-21 17:42:21,738 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 17:42:21,738 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 17:42:21,740 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 17:42:21,741 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 17:42:21,741 - main - INFO - Data shape: (2778, 9)
2026-01-21 17:42:21,741 - main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 17:42:21,741 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 17:42:21,742 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 17:42:21,742 - main - INFO - Basic indicators computed
2026-01-21 17:42:21,742 - main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 17:42:21,742 - main - INFO - Volatility mean: 0.148804
2026-01-21 17:42:21,743 - main - INFO - NaN count after preparation: 2799
2026-01-21 17:42:21,743 - main - WARNING - Remaining NaN values: 2799
2026-01-21 17:42:21,744 - main - INFO - NaN values after filling: 2778
2026-01-21 17:42:21,744 - main - INFO - ============================================================
2026-01-21 17:42:21,744 - main - INFO - STAGE 2: Signal Processing
2026-01-21 17:42:21,744 - main - INFO - ============================================================
2026-01-21 17:42:21,744 - main - INFO - Applying Kalman Filter...
2026-01-21 17:42:21,744 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 17:42:22,213 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 17:42:22,213 - main - INFO - Training HMM for regime detection...
2026-01-21 17:42:22,214 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 17:42:22,214 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 17:42:25,496 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.28446524682 is not greater than 14653.578336156832. Delta is -0.2938709100126289
2026-01-21 17:42:25,496 - signal_processor - INFO - HMM training complete
2026-01-21 17:42:25,497 - signal_processor - INFO - Transition matrix:
[[9.81051119e-01 1.89488807e-02 9.12132990e-14]
 [2.58342004e-02 9.65555936e-01 8.60986336e-03]
 [1.33433179e-64 3.36030892e-02 9.66396911e-01]]
2026-01-21 17:42:25,497 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950345]
 [ 0.00042643  0.17092452]
 [-0.00054375  0.34799403]]
2026-01-21 17:42:25,497 - main - INFO - Predicting regimes...
2026-01-21 17:42:25,497 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 17:42:25,499 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 17:42:25,500 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 17:42:25,500 - main - INFO - Calculating technical indicators...
2026-01-21 17:42:25,500 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 17:42:25,501 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 17:42:25,501 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 17:42:25,515 - signal_processor - INFO - ADX calculation complete. Shape: (5556,)
2026-01-21 17:42:25,515 - signal_processor - INFO - ADX mean: nan, std: nan
2026-01-21 17:42:25,516 - main - INFO - Generating hybrid signals...
2026-01-21 17:42:25,516 - strategy - INFO - Generating hybrid signals
2026-01-21 17:42:25,562 - strategy - INFO - Signals generated: 0 STRONG_SELL, 0 SELL
2026-01-21 17:42:25,565 - main - INFO - Signal generation complete:
2026-01-21 17:42:25,566 - main - INFO - Signal distribution:
signal
0    2778
Name: count, dtype: int64
2026-01-21 17:42:25,566 - main - INFO - ============================================================
2026-01-21 17:42:25,566 - main - INFO - STAGE 3: Backtesting
2026-01-21 17:42:25,566 - main - INFO - ============================================================
2026-01-21 17:42:25,568 - main - INFO - Backtest Results:
2026-01-21 17:42:25,568 - main - INFO -   Total Return: 297.20% (Benchmark: 297.20%)
2026-01-21 17:42:25,568 - main - INFO -   CAGR: 13.29% (Benchmark: 13.29%)
2026-01-21 17:42:25,568 - main - INFO -   Max Drawdown: -33.72%
2026-01-21 17:42:25,568 - main - INFO -   Sharpe Ratio: 0.794
2026-01-21 17:42:25,568 - main - INFO -   Sortino Ratio: 0.966
2026-01-21 17:42:25,568 - main - INFO -   Win Rate: 54.79%
2026-01-21 17:42:25,568 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.966)
2026-01-21 17:42:25,568 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-21 17:42:25,568 - main - INFO - ============================================================
2026-01-21 17:42:25,568 - main - INFO - STAGE 4: Visualization
2026-01-21 17:42:25,568 - main - INFO - ============================================================
2026-01-21 17:42:25,907 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-21 17:42:26,259 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-21 17:42:26,566 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-21 17:42:26,593 - main - INFO - All visualizations saved
2026-01-21 17:42:26,594 - main - INFO - ============================================================
2026-01-21 17:42:26,594 - main - INFO - STAGE 5: Report Generation
2026-01-21 17:42:26,594 - main - INFO - ============================================================
2026-01-21 17:42:26,596 - main - INFO - Report saved to results/backtest_report.json
2026-01-21 17:42:26,596 - main - INFO - 
======================================================================
2026-01-21 17:42:26,596 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-21 17:42:26,596 - main - INFO - ======================================================================
2026-01-21 17:46:41,239 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:46:41,239 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 17:46:41,239 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 17:46:41,239 - main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:46:41,239 - main - INFO - 
======================================================================
2026-01-21 17:46:41,239 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-21 17:46:41,239 - main - INFO - ======================================================================
2026-01-21 17:46:41,239 - main - INFO - ============================================================
2026-01-21 17:46:41,240 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 17:46:41,240 - main - INFO - ============================================================
2026-01-21 17:46:41,240 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:46:41,240 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 17:46:42,304 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 17:46:42,304 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:46:42,304 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 17:46:42,854 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 17:46:42,854 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 17:46:42,854 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 17:46:42,884 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 17:46:42,884 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 17:46:44,035 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 17:46:44,036 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 17:46:44,542 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 17:46:45,043 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 17:46:45,523 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 17:46:45,968 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 17:46:46,505 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 17:46:46,948 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 17:46:47,508 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 17:46:48,042 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 17:46:48,522 - data_fetcher - WARNING - Could not fetch V
2026-01-21 17:46:49,043 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 17:46:49,044 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 17:46:49,046 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 17:46:49,046 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 17:46:49,046 - main - INFO - Data shape: (2778, 9)
2026-01-21 17:46:49,047 - main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 17:46:49,047 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 17:46:49,047 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 17:46:49,048 - main - INFO - Basic indicators computed
2026-01-21 17:46:49,048 - main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 17:46:49,048 - main - INFO - Volatility mean: 0.148804
2026-01-21 17:46:49,049 - main - INFO - NaN count after preparation: 2799
2026-01-21 17:46:49,049 - main - WARNING - Remaining NaN values: 2799
2026-01-21 17:46:49,050 - main - INFO - NaN values after filling: 2778
2026-01-21 17:46:49,050 - main - INFO - ============================================================
2026-01-21 17:46:49,050 - main - INFO - STAGE 2: Signal Processing
2026-01-21 17:46:49,050 - main - INFO - ============================================================
2026-01-21 17:46:49,050 - main - INFO - Applying Kalman Filter...
2026-01-21 17:46:49,050 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 17:46:49,530 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 17:46:49,530 - main - INFO - Training HMM for regime detection...
2026-01-21 17:46:49,530 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 17:46:49,530 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 17:46:52,379 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.298533982505 is not greater than 14653.59265421755. Delta is -0.2941202350448293
2026-01-21 17:46:52,379 - signal_processor - INFO - HMM training complete
2026-01-21 17:46:52,379 - signal_processor - INFO - Transition matrix:
[[9.81051088e-01 1.89489116e-02 9.10207413e-14]
 [2.58344791e-02 9.65555645e-01 8.60987554e-03]
 [1.31537322e-64 3.36032064e-02 9.66396794e-01]]
2026-01-21 17:46:52,379 - signal_processor - INFO - Means:
[[ 0.00076075  0.08950356]
 [ 0.00042641  0.17092485]
 [-0.00054374  0.3479948 ]]
2026-01-21 17:46:52,379 - main - INFO - Predicting regimes...
2026-01-21 17:46:52,379 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 17:46:52,382 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 17:46:52,382 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 17:46:52,382 - main - INFO - Calculating technical indicators...
2026-01-21 17:46:52,382 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 17:46:52,384 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 17:46:52,384 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 17:46:52,398 - signal_processor - INFO - ADX calculation complete. Shape: (5556,)
2026-01-21 17:46:52,398 - signal_processor - INFO - ADX mean: nan, std: nan
2026-01-21 17:46:52,398 - main - INFO - Generating hybrid signals...
2026-01-21 17:46:52,398 - strategy - INFO - Generating hybrid signals
2026-01-21 17:46:52,444 - strategy - INFO - Signals generated: 0 STRONG_SELL, 0 SELL
2026-01-21 17:46:52,447 - main - INFO - Signal generation complete:
2026-01-21 17:46:52,448 - main - INFO - Signal distribution:
signal
0    2778
Name: count, dtype: int64
2026-01-21 17:46:52,448 - main - INFO - ============================================================
2026-01-21 17:46:52,448 - main - INFO - STAGE 3: Backtesting
2026-01-21 17:46:52,448 - main - INFO - ============================================================
2026-01-21 17:46:52,450 - main - INFO - Backtest Results:
2026-01-21 17:46:52,450 - main - INFO -   Total Return: 297.20% (Benchmark: 297.20%)
2026-01-21 17:46:52,450 - main - INFO -   CAGR: 13.29% (Benchmark: 13.29%)
2026-01-21 17:46:52,450 - main - INFO -   Max Drawdown: -33.72%
2026-01-21 17:46:52,450 - main - INFO -   Sharpe Ratio: 0.794
2026-01-21 17:46:52,450 - main - INFO -   Sortino Ratio: 0.966
2026-01-21 17:46:52,450 - main - INFO -   Win Rate: 54.79%
2026-01-21 17:46:52,450 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.966)
2026-01-21 17:46:52,450 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-21 17:46:52,450 - main - INFO - ============================================================
2026-01-21 17:46:52,450 - main - INFO - STAGE 4: Visualization
2026-01-21 17:46:52,450 - main - INFO - ============================================================
2026-01-21 17:46:52,785 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-21 17:46:53,129 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-21 17:46:53,448 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-21 17:46:53,462 - main - INFO - All visualizations saved
2026-01-21 17:46:53,462 - main - INFO - ============================================================
2026-01-21 17:46:53,462 - main - INFO - STAGE 5: Report Generation
2026-01-21 17:46:53,462 - main - INFO - ============================================================
2026-01-21 17:46:53,463 - main - INFO - Report saved to results/backtest_report.json
2026-01-21 17:46:53,463 - main - INFO - 
======================================================================
2026-01-21 17:46:53,463 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-21 17:46:53,464 - main - INFO - ======================================================================
2026-01-21 17:50:32,108 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:50:32,108 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 17:50:32,108 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 17:50:32,108 - main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:50:32,108 - main - INFO - 
======================================================================
2026-01-21 17:50:32,108 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-21 17:50:32,108 - main - INFO - ======================================================================
2026-01-21 17:50:32,108 - main - INFO - ============================================================
2026-01-21 17:50:32,108 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 17:50:32,108 - main - INFO - ============================================================
2026-01-21 17:50:32,108 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:50:32,108 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 17:50:33,185 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 17:50:33,185 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:50:33,185 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 17:50:33,653 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 17:50:33,653 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 17:50:33,653 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 17:50:33,694 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 17:50:33,694 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 17:50:34,815 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 17:50:34,815 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 17:50:35,328 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 17:50:35,814 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 17:50:36,288 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 17:50:36,725 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 17:50:37,276 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 17:50:37,725 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 17:50:38,243 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 17:50:38,769 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 17:50:39,244 - data_fetcher - WARNING - Could not fetch V
2026-01-21 17:50:39,758 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 17:50:39,759 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 17:50:39,760 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 17:50:39,761 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 17:50:39,761 - main - INFO - Data shape: (2778, 9)
2026-01-21 17:50:39,761 - main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 17:50:39,762 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 17:50:39,762 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 17:50:39,762 - main - INFO - Basic indicators computed
2026-01-21 17:50:39,763 - main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 17:50:39,763 - main - INFO - Volatility mean: 0.148804
2026-01-21 17:50:39,763 - main - INFO - NaN count after preparation: 2799
2026-01-21 17:50:39,763 - main - WARNING - Remaining NaN values: 2799
2026-01-21 17:50:39,764 - main - INFO - NaN values after filling: 2778
2026-01-21 17:50:39,764 - main - INFO - ============================================================
2026-01-21 17:50:39,764 - main - INFO - STAGE 2: Signal Processing
2026-01-21 17:50:39,764 - main - INFO - ============================================================
2026-01-21 17:50:39,764 - main - INFO - Applying Kalman Filter...
2026-01-21 17:50:39,764 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 17:50:40,233 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 17:50:40,233 - main - INFO - Training HMM for regime detection...
2026-01-21 17:50:40,233 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 17:50:40,234 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 17:50:43,427 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.301482001003 is not greater than 14653.59569813655. Delta is -0.29421613554768555
2026-01-21 17:50:43,427 - signal_processor - INFO - HMM training complete
2026-01-21 17:50:43,427 - signal_processor - INFO - Transition matrix:
[[9.81051093e-01 1.89489067e-02 9.25484678e-14]
 [2.58346974e-02 9.65555403e-01 8.60989982e-03]
 [1.27106828e-64 3.36031456e-02 9.66396854e-01]]
2026-01-21 17:50:43,427 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950357]
 [ 0.00042643  0.17092499]
 [-0.00054375  0.34799497]]
2026-01-21 17:50:43,427 - main - INFO - Predicting regimes...
2026-01-21 17:50:43,428 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 17:50:43,430 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 17:50:43,430 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 17:50:43,431 - main - INFO - Calculating technical indicators...
2026-01-21 17:50:43,431 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 17:50:43,432 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 17:50:43,432 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 17:50:43,445 - signal_processor - INFO - ADX calculation complete. Shape: (5556,)
2026-01-21 17:50:43,445 - signal_processor - INFO - ADX mean: nan, std: nan
2026-01-21 17:50:43,445 - main - INFO - Generating hybrid signals...
2026-01-21 17:50:43,446 - strategy - INFO - Generating hybrid signals
2026-01-21 17:50:43,492 - strategy - INFO - Signals generated: 0 STRONG_SELL, 0 SELL
2026-01-21 17:50:43,495 - main - INFO - Signal generation complete:
2026-01-21 17:50:43,496 - main - INFO - Signal distribution:
signal
0    2778
Name: count, dtype: int64
2026-01-21 17:50:43,496 - main - INFO - ============================================================
2026-01-21 17:50:43,496 - main - INFO - STAGE 3: Backtesting
2026-01-21 17:50:43,496 - main - INFO - ============================================================
2026-01-21 17:50:43,498 - main - INFO - Backtest Results:
2026-01-21 17:50:43,498 - main - INFO -   Total Return: 297.20% (Benchmark: 297.20%)
2026-01-21 17:50:43,498 - main - INFO -   CAGR: 13.29% (Benchmark: 13.29%)
2026-01-21 17:50:43,498 - main - INFO -   Max Drawdown: -33.72%
2026-01-21 17:50:43,498 - main - INFO -   Sharpe Ratio: 0.794
2026-01-21 17:50:43,498 - main - INFO -   Sortino Ratio: 0.966
2026-01-21 17:50:43,498 - main - INFO -   Win Rate: 54.79%
2026-01-21 17:50:43,498 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.966)
2026-01-21 17:50:43,498 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-21 17:50:43,499 - main - INFO - ============================================================
2026-01-21 17:50:43,499 - main - INFO - STAGE 4: Visualization
2026-01-21 17:50:43,499 - main - INFO - ============================================================
2026-01-21 17:50:43,845 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-21 17:50:44,208 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-21 17:50:44,514 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-21 17:50:44,531 - main - INFO - All visualizations saved
2026-01-21 17:50:44,531 - main - INFO - ============================================================
2026-01-21 17:50:44,531 - main - INFO - STAGE 5: Report Generation
2026-01-21 17:50:44,531 - main - INFO - ============================================================
2026-01-21 17:50:44,533 - main - INFO - Report saved to results/backtest_report.json
2026-01-21 17:50:44,533 - main - INFO - 
======================================================================
2026-01-21 17:50:44,533 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-21 17:50:44,533 - main - INFO - ======================================================================
2026-01-21 17:53:15,847 - src.data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:53:15,848 - src.data_fetcher - INFO - Fetching SPY data from 2025-01-21 to 2026-01-21
2026-01-21 17:53:16,726 - src.data_fetcher - INFO - Successfully fetched 251 rows for SPY
2026-01-21 17:53:16,726 - src.data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:53:16,727 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 17:53:16,727 - src.signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 17:53:16,770 - src.signal_processor - INFO - Kalman smoothing complete. Output shape: (251,)
2026-01-21 17:53:16,770 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 17:53:16,771 - src.signal_processor - INFO - Realized volatility computed. Shape: (251,)
2026-01-21 17:53:16,771 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 17:53:16,773 - src.signal_processor - INFO - RSI calculation complete. Mean: 57.63, Std: 15.60
2026-01-21 17:53:41,804 - src.data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:53:41,804 - src.data_fetcher - INFO - Fetching SPY data from 2025-01-21 to 2026-01-21
2026-01-21 17:53:42,744 - src.data_fetcher - INFO - Successfully fetched 251 rows for SPY
2026-01-21 17:53:42,744 - src.data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:53:42,744 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 17:53:42,745 - src.signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 17:53:42,787 - src.signal_processor - INFO - Kalman smoothing complete. Output shape: (251,)
2026-01-21 17:53:42,787 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 17:53:42,788 - src.signal_processor - INFO - Realized volatility computed. Shape: (251,)
2026-01-21 17:53:42,788 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 17:53:42,789 - src.signal_processor - INFO - RSI calculation complete. Mean: 57.63, Std: 15.60
2026-01-21 17:53:42,790 - src.signal_processor - INFO - Calculating ADX with period=14
2026-01-21 17:53:42,793 - src.signal_processor - INFO - ADX calculation complete. Shape: (502,)
2026-01-21 17:53:42,794 - src.signal_processor - INFO - ADX mean: nan, std: nan
2026-01-21 17:53:42,794 - src.signal_processor - INFO - Training HMM with 3 states
2026-01-21 17:53:42,795 - src.signal_processor - INFO - Training data shape: (232, 2)
2026-01-21 17:53:44,970 - src.signal_processor - INFO - HMM training complete
2026-01-21 17:53:44,971 - src.signal_processor - INFO - Transition matrix:
[[8.82455399e-06 9.99774490e-01 2.16685700e-04]
 [9.22901672e-01 3.48518264e-03 7.36131451e-02]
 [1.13115010e-02 9.19380124e-10 9.88688498e-01]]
2026-01-21 17:53:44,971 - src.signal_processor - INFO - Means:
[[ 6.72173010e-03  2.86417872e+02]
 [-4.80079658e-03  2.87279531e+02]
 [ 4.70735048e-04  1.13723049e+02]]
2026-01-21 17:53:44,972 - src.signal_processor - INFO - Predicting regimes using HMM
2026-01-21 17:53:44,973 - src.signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 17:53:44,974 - src.signal_processor - INFO - State distribution:
0     27
1     27
2    178
Name: count, dtype: int64
2026-01-21 17:54:22,543 - src.data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:54:22,543 - src.data_fetcher - INFO - Fetching SPY data from 2025-01-21 to 2026-01-21
2026-01-21 17:54:23,513 - src.data_fetcher - INFO - Successfully fetched 251 rows for SPY
2026-01-21 17:54:23,513 - src.data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:54:23,513 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 17:54:23,513 - src.signal_processor - INFO - Calculating ADX with period=14
2026-01-21 17:54:23,515 - src.signal_processor - INFO - ADX calculation complete. Shape: (251,)
2026-01-21 17:54:23,515 - src.signal_processor - INFO - ADX mean: 29.05, std: 11.43
2026-01-21 17:54:23,516 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 17:54:23,517 - src.signal_processor - INFO - RSI calculation complete. Mean: 57.63, Std: 15.60
2026-01-21 17:54:23,517 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 17:54:23,517 - src.signal_processor - INFO - Realized volatility computed. Shape: (251,)
2026-01-21 17:54:23,517 - src.signal_processor - INFO - Training HMM with 3 states
2026-01-21 17:54:23,518 - src.signal_processor - INFO - Training data shape: (232, 2)
2026-01-21 17:54:25,662 - src.signal_processor - INFO - HMM training complete
2026-01-21 17:54:25,662 - src.signal_processor - INFO - Transition matrix:
[[8.82478828e-06 9.99774482e-01 2.16692797e-04]
 [9.22901586e-01 3.48522987e-03 7.36131836e-02]
 [1.13114987e-02 9.19420820e-10 9.88688500e-01]]
2026-01-21 17:54:25,662 - src.signal_processor - INFO - Means:
[[ 6.72174696e-03  2.86417904e+02]
 [-4.80082222e-03  2.87279559e+02]
 [ 4.70736065e-04  1.13723055e+02]]
2026-01-21 17:54:25,663 - src.signal_processor - INFO - Predicting regimes using HMM
2026-01-21 17:54:25,664 - src.signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 17:54:25,665 - src.signal_processor - INFO - State distribution:
0     27
1     27
2    178
Name: count, dtype: int64
2026-01-21 17:55:03,736 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 17:55:03,736 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 17:55:03,736 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 17:55:03,736 - main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:55:03,736 - main - INFO - 
======================================================================
2026-01-21 17:55:03,736 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-21 17:55:03,736 - main - INFO - ======================================================================
2026-01-21 17:55:03,736 - main - INFO - ============================================================
2026-01-21 17:55:03,736 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 17:55:03,736 - main - INFO - ============================================================
2026-01-21 17:55:03,736 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 17:55:03,736 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 17:55:04,732 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 17:55:04,732 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 17:55:04,732 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 17:55:05,170 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 17:55:05,170 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 17:55:05,170 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 17:55:05,198 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 17:55:05,198 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 17:55:06,295 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 17:55:06,295 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 17:55:06,806 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 17:55:07,293 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 17:55:07,748 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 17:55:08,287 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 17:55:08,806 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 17:55:09,264 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 17:55:09,783 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 17:55:10,334 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 17:55:10,813 - data_fetcher - WARNING - Could not fetch V
2026-01-21 17:55:11,354 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 17:55:11,354 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 17:55:11,356 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 17:55:11,357 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 17:55:11,357 - main - INFO - Data shape: (2778, 9)
2026-01-21 17:55:11,357 - main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 17:55:11,357 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 17:55:11,358 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 17:55:11,358 - main - INFO - Basic indicators computed
2026-01-21 17:55:11,358 - main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 17:55:11,358 - main - INFO - Volatility mean: 0.148804
2026-01-21 17:55:11,358 - main - INFO - NaN count after preparation: 2799
2026-01-21 17:55:11,359 - main - WARNING - Remaining NaN values: 2799
2026-01-21 17:55:11,359 - main - INFO - NaN values after filling: 2778
2026-01-21 17:55:11,359 - main - INFO - ============================================================
2026-01-21 17:55:11,359 - main - INFO - STAGE 2: Signal Processing
2026-01-21 17:55:11,359 - main - INFO - ============================================================
2026-01-21 17:55:11,359 - main - INFO - Applying Kalman Filter...
2026-01-21 17:55:11,360 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 17:55:11,867 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 17:55:11,867 - main - INFO - Training HMM for regime detection...
2026-01-21 17:55:11,868 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 17:55:11,868 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 17:55:14,775 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.291664964432 is not greater than 14653.585791675092. Delta is -0.29412671065983886
2026-01-21 17:55:14,775 - signal_processor - INFO - HMM training complete
2026-01-21 17:55:14,776 - signal_processor - INFO - Transition matrix:
[[9.81051068e-01 1.89489321e-02 9.14471456e-14]
 [2.58346814e-02 9.65555404e-01 8.60991450e-03]
 [1.29433283e-64 3.36032586e-02 9.66396741e-01]]
2026-01-21 17:55:14,776 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950369]
 [ 0.00042643  0.17092498]
 [-0.00054376  0.34799508]]
2026-01-21 17:55:14,776 - main - INFO - Predicting regimes...
2026-01-21 17:55:14,776 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 17:55:14,779 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 17:55:14,779 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 17:55:14,779 - main - INFO - Calculating technical indicators...
2026-01-21 17:55:14,779 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 17:55:14,781 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 17:55:14,781 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 17:55:14,785 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 17:55:14,785 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 17:55:14,785 - main - INFO - Generating hybrid signals...
2026-01-21 17:55:14,785 - strategy - INFO - Generating hybrid signals
2026-01-21 17:55:14,960 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 17:55:14,960 - main - INFO - Signal generation complete:
2026-01-21 17:55:14,961 - main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 17:55:14,961 - main - INFO - ============================================================
2026-01-21 17:55:14,961 - main - INFO - STAGE 3: Backtesting
2026-01-21 17:55:14,961 - main - INFO - ============================================================
2026-01-21 17:55:14,963 - main - INFO - Backtest Results:
2026-01-21 17:55:14,963 - main - INFO -   Total Return: 204.12% (Benchmark: 297.20%)
2026-01-21 17:55:14,963 - main - INFO -   CAGR: 10.59% (Benchmark: 13.29%)
2026-01-21 17:55:14,963 - main - INFO -   Max Drawdown: -26.08%
2026-01-21 17:55:14,963 - main - INFO -   Sharpe Ratio: 0.826
2026-01-21 17:55:14,963 - main - INFO -   Sortino Ratio: 0.968
2026-01-21 17:55:14,963 - main - INFO -   Win Rate: 49.57%
2026-01-21 17:55:14,963 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.968)
2026-01-21 17:55:14,963 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-21 17:55:14,963 - main - INFO - ============================================================
2026-01-21 17:55:14,963 - main - INFO - STAGE 4: Visualization
2026-01-21 17:55:14,963 - main - INFO - ============================================================
2026-01-21 17:55:15,312 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-21 17:55:15,667 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-21 17:55:15,941 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-21 17:55:15,954 - main - INFO - All visualizations saved
2026-01-21 17:55:15,954 - main - INFO - ============================================================
2026-01-21 17:55:15,954 - main - INFO - STAGE 5: Report Generation
2026-01-21 17:55:15,954 - main - INFO - ============================================================
2026-01-21 17:55:15,956 - main - INFO - Report saved to results/backtest_report.json
2026-01-21 17:55:15,956 - main - INFO - 
======================================================================
2026-01-21 17:55:15,956 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-21 17:55:15,956 - main - INFO - ======================================================================
2026-01-21 18:09:53,902 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 18:09:53,902 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 18:09:53,902 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 18:09:53,902 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:09:53,902 - src.main - INFO - ============================================================
2026-01-21 18:09:53,903 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 18:09:53,903 - src.main - INFO - ============================================================
2026-01-21 18:09:53,903 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:09:53,903 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 18:09:54,957 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 18:09:54,957 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 18:09:54,957 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 18:09:55,403 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 18:09:55,403 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 18:09:55,403 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 18:09:55,434 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 18:09:55,434 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 18:09:57,002 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 18:09:57,003 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 18:09:57,512 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 18:09:57,968 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 18:09:58,436 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 18:09:58,885 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 18:09:59,375 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 18:09:59,821 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 18:10:00,332 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 18:10:00,860 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 18:10:01,320 - data_fetcher - WARNING - Could not fetch V
2026-01-21 18:10:01,865 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 18:10:01,865 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 18:10:01,868 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 18:10:01,869 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 18:10:01,869 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 18:10:01,869 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 18:10:01,870 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 18:10:01,870 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 18:10:01,870 - src.main - INFO - Basic indicators computed
2026-01-21 18:10:01,870 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 18:10:01,871 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 18:10:01,871 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 18:10:01,871 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 18:10:01,872 - src.main - INFO - NaN values after filling: 2778
2026-01-21 18:10:01,872 - src.main - INFO - ============================================================
2026-01-21 18:10:01,872 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 18:10:01,872 - src.main - INFO - ============================================================
2026-01-21 18:10:01,873 - src.main - INFO - Applying Kalman Filter...
2026-01-21 18:10:01,873 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 18:10:02,327 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 18:10:02,327 - src.main - INFO - Training HMM for regime detection...
2026-01-21 18:10:02,328 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 18:10:02,328 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 18:10:05,131 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.287568110602 is not greater than 14653.581844264821. Delta is -0.29427615421991504
2026-01-21 18:10:05,131 - signal_processor - INFO - HMM training complete
2026-01-21 18:10:05,132 - signal_processor - INFO - Transition matrix:
[[9.81051237e-01 1.89487626e-02 9.23928621e-14]
 [2.58347117e-02 9.65555360e-01 8.60992814e-03]
 [1.26857118e-64 3.36033949e-02 9.66396605e-01]]
2026-01-21 18:10:05,132 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950387]
 [ 0.00042642  0.17092555]
 [-0.00054374  0.34799591]]
2026-01-21 18:10:05,132 - src.main - INFO - Predicting regimes...
2026-01-21 18:10:05,133 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 18:10:05,135 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 18:10:05,135 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 18:10:05,136 - src.main - INFO - Calculating technical indicators...
2026-01-21 18:10:05,136 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 18:10:05,137 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 18:10:05,138 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 18:10:05,140 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 18:10:05,141 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 18:10:05,141 - src.main - INFO - Generating hybrid signals...
2026-01-21 18:10:05,141 - strategy - INFO - Generating hybrid signals
2026-01-21 18:10:05,311 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 18:10:05,312 - src.main - INFO - Signal generation complete:
2026-01-21 18:10:05,313 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 18:13:33,078 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 18:13:33,079 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 18:13:33,079 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 18:13:33,079 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:13:33,079 - src.main - INFO - ============================================================
2026-01-21 18:13:33,079 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 18:13:33,079 - src.main - INFO - ============================================================
2026-01-21 18:13:33,080 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:13:33,080 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 18:13:34,136 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 18:13:34,136 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 18:13:34,136 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 18:13:34,573 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 18:13:34,573 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 18:13:34,574 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 18:13:34,604 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 18:13:34,604 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 18:13:35,737 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 18:13:35,737 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 18:13:36,237 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 18:13:36,750 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 18:13:37,220 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 18:13:37,656 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 18:13:38,270 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 18:13:38,745 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 18:13:39,267 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 18:13:39,796 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 18:13:40,275 - data_fetcher - WARNING - Could not fetch V
2026-01-21 18:13:40,786 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 18:13:40,786 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 18:13:40,788 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 18:13:40,789 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 18:13:40,789 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 18:13:40,790 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 18:13:40,790 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 18:13:40,790 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 18:13:40,791 - src.main - INFO - Basic indicators computed
2026-01-21 18:13:40,791 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 18:13:40,791 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 18:13:40,792 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 18:13:40,792 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 18:13:40,793 - src.main - INFO - NaN values after filling: 2778
2026-01-21 18:13:40,793 - src.main - INFO - ============================================================
2026-01-21 18:13:40,793 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 18:13:40,793 - src.main - INFO - ============================================================
2026-01-21 18:13:40,793 - src.main - INFO - Applying Kalman Filter...
2026-01-21 18:13:40,793 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 18:13:41,242 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 18:13:41,242 - src.main - INFO - Training HMM for regime detection...
2026-01-21 18:13:41,243 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 18:13:41,243 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 18:13:44,065 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.292298937182 is not greater than 14653.586619016603. Delta is -0.29432007942159544
2026-01-21 18:13:44,065 - signal_processor - INFO - HMM training complete
2026-01-21 18:13:44,066 - signal_processor - INFO - Transition matrix:
[[9.81051114e-01 1.89488857e-02 9.20218255e-14]
 [2.58347733e-02 9.65555331e-01 8.60989586e-03]
 [1.26728930e-64 3.36035199e-02 9.66396480e-01]]
2026-01-21 18:13:44,066 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950378]
 [ 0.00042642  0.17092554]
 [-0.00054375  0.34799633]]
2026-01-21 18:13:44,066 - src.main - INFO - Predicting regimes...
2026-01-21 18:13:44,066 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 18:13:44,068 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 18:13:44,069 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 18:13:44,069 - src.main - INFO - Calculating technical indicators...
2026-01-21 18:13:44,069 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 18:13:44,071 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 18:13:44,071 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 18:13:44,074 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 18:13:44,074 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 18:13:44,074 - src.main - INFO - Generating hybrid signals...
2026-01-21 18:13:44,074 - strategy - INFO - Generating hybrid signals
2026-01-21 18:13:44,249 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 18:13:44,250 - src.main - INFO - Signal generation complete:
2026-01-21 18:13:44,251 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 18:17:01,153 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 18:17:01,154 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 18:17:01,154 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 18:17:01,154 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:17:01,154 - src.main - INFO - ============================================================
2026-01-21 18:17:01,154 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 18:17:01,154 - src.main - INFO - ============================================================
2026-01-21 18:17:01,154 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:17:01,155 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 18:17:02,546 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 18:17:02,546 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 18:17:02,547 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 18:17:03,006 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 18:17:03,007 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 18:17:03,007 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 18:17:03,039 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 18:17:03,039 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 18:17:04,301 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 18:17:04,301 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 18:17:04,803 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 18:17:05,303 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 18:17:05,740 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 18:17:06,208 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 18:17:06,697 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 18:17:07,165 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 18:17:07,673 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 18:17:08,182 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 18:17:08,649 - data_fetcher - WARNING - Could not fetch V
2026-01-21 18:17:09,180 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 18:17:09,180 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 18:17:09,183 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 18:17:09,184 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 18:17:09,184 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 18:17:09,184 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 18:17:09,184 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 18:17:09,185 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 18:17:09,185 - src.main - INFO - Basic indicators computed
2026-01-21 18:17:09,185 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 18:17:09,186 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 18:17:09,186 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 18:17:09,186 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 18:17:09,187 - src.main - INFO - NaN values after filling: 2778
2026-01-21 18:17:09,188 - src.main - INFO - ============================================================
2026-01-21 18:17:09,188 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 18:17:09,188 - src.main - INFO - ============================================================
2026-01-21 18:17:09,188 - src.main - INFO - Applying Kalman Filter...
2026-01-21 18:17:09,188 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 18:17:09,656 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 18:17:09,656 - src.main - INFO - Training HMM for regime detection...
2026-01-21 18:17:09,657 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 18:17:09,657 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 18:17:12,518 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.29758754999 is not greater than 14653.592101266278. Delta is -0.2945137162878382
2026-01-21 18:17:12,518 - signal_processor - INFO - HMM training complete
2026-01-21 18:17:12,519 - signal_processor - INFO - Transition matrix:
[[9.81051201e-01 1.89487986e-02 9.20662881e-14]
 [2.58352937e-02 9.65554725e-01 8.60998135e-03]
 [1.27132236e-64 3.36035912e-02 9.66396409e-01]]
2026-01-21 18:17:12,519 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950427]
 [ 0.0004264   0.17092628]
 [-0.0005437   0.34799706]]
2026-01-21 18:17:12,519 - src.main - INFO - Predicting regimes...
2026-01-21 18:17:12,519 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 18:17:12,522 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 18:17:12,523 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 18:17:12,523 - src.main - INFO - Calculating technical indicators...
2026-01-21 18:17:12,523 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 18:17:12,524 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 18:17:12,525 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 18:17:12,528 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 18:17:12,528 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 18:17:12,528 - src.main - INFO - Generating hybrid signals...
2026-01-21 18:17:12,528 - strategy - INFO - Generating hybrid signals
2026-01-21 18:17:12,705 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 18:17:12,705 - src.main - INFO - Signal generation complete:
2026-01-21 18:17:12,706 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 18:17:12,706 - src.main - INFO - ============================================================
2026-01-21 18:17:12,706 - src.main - INFO - STAGE 3: Backtesting
2026-01-21 18:17:12,707 - src.main - INFO - ============================================================
2026-01-21 18:17:12,709 - src.main - INFO - Backtest Results:
2026-01-21 18:17:12,709 - src.main - INFO -   Total Return: 204.12% (Benchmark: 297.20%)
2026-01-21 18:17:12,709 - src.main - INFO -   CAGR: 10.59% (Benchmark: 13.29%)
2026-01-21 18:17:12,709 - src.main - INFO -   Max Drawdown: -26.08%
2026-01-21 18:17:12,709 - src.main - INFO -   Sharpe Ratio: 0.826
2026-01-21 18:17:12,709 - src.main - INFO -   Sortino Ratio: 0.968
2026-01-21 18:17:12,709 - src.main - INFO -   Win Rate: 49.57%
2026-01-21 18:17:12,710 - src.main - WARNING - [WARN] Sortino Ratio target not met (current: 0.968)
2026-01-21 18:17:12,710 - src.main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-21 18:20:47,904 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 18:20:47,904 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 18:20:47,904 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 18:20:47,905 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:20:47,905 - src.main - INFO - ============================================================
2026-01-21 18:20:47,905 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 18:20:47,905 - src.main - INFO - ============================================================
2026-01-21 18:20:47,905 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:20:47,905 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 18:20:49,304 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 18:20:49,304 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 18:20:49,304 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 18:20:49,750 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 18:20:49,750 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 18:20:49,750 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 18:20:49,781 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 18:20:49,782 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 18:20:50,997 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 18:20:50,997 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 18:20:51,518 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 18:20:52,030 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 18:20:52,489 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 18:20:52,939 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 18:20:53,452 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 18:20:53,930 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 18:20:54,523 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 18:20:55,073 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 18:20:55,553 - data_fetcher - WARNING - Could not fetch V
2026-01-21 18:20:56,127 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 18:20:56,128 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 18:20:56,130 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 18:20:56,131 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 18:20:56,131 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 18:20:56,131 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 18:20:56,132 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 18:20:56,133 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 18:20:56,133 - src.main - INFO - Basic indicators computed
2026-01-21 18:20:56,133 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 18:20:56,133 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 18:20:56,134 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 18:20:56,134 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 18:20:56,135 - src.main - INFO - NaN values after filling: 2778
2026-01-21 18:20:56,135 - src.main - INFO - ============================================================
2026-01-21 18:20:56,135 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 18:20:56,135 - src.main - INFO - ============================================================
2026-01-21 18:20:56,135 - src.main - INFO - Applying Kalman Filter...
2026-01-21 18:20:56,135 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 18:20:56,619 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 18:20:56,619 - src.main - INFO - Training HMM for regime detection...
2026-01-21 18:20:56,620 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 18:20:56,620 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 18:20:59,471 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.287404026803 is not greater than 14653.5816356972. Delta is -0.29423167039749387
2026-01-21 18:20:59,471 - signal_processor - INFO - HMM training complete
2026-01-21 18:20:59,471 - signal_processor - INFO - Transition matrix:
[[9.81051248e-01 1.89487519e-02 9.19790647e-14]
 [2.58347342e-02 9.65555326e-01 8.60994011e-03]
 [1.27067545e-64 3.36033356e-02 9.66396664e-01]]
2026-01-21 18:20:59,472 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950394]
 [ 0.00042642  0.17092545]
 [-0.00054373  0.34799574]]
2026-01-21 18:20:59,472 - src.main - INFO - Predicting regimes...
2026-01-21 18:20:59,472 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 18:20:59,475 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 18:20:59,475 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 18:20:59,475 - src.main - INFO - Calculating technical indicators...
2026-01-21 18:20:59,476 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 18:20:59,477 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 18:20:59,477 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 18:20:59,480 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 18:20:59,480 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 18:20:59,481 - src.main - INFO - Generating hybrid signals...
2026-01-21 18:20:59,481 - strategy - INFO - Generating hybrid signals
2026-01-21 18:20:59,653 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 18:20:59,654 - src.main - INFO - Signal generation complete:
2026-01-21 18:20:59,655 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 18:39:02,422 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 18:39:02,423 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 18:39:02,423 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 18:39:02,423 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:39:02,423 - src.main - INFO - ============================================================
2026-01-21 18:39:02,423 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 18:39:02,423 - src.main - INFO - ============================================================
2026-01-21 18:39:02,423 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 18:39:02,424 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 18:39:03,449 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 18:39:03,450 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 18:39:03,450 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 18:39:03,885 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 18:39:03,885 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 18:39:03,885 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 18:39:03,927 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 18:39:03,928 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 18:39:05,079 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 18:39:05,080 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 18:39:05,589 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 18:39:06,059 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 18:39:06,526 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 18:39:06,961 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 18:39:07,482 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 18:39:07,936 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 18:39:08,457 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 18:39:08,988 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 18:39:09,466 - data_fetcher - WARNING - Could not fetch V
2026-01-21 18:39:10,025 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 18:39:10,025 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 18:39:10,028 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 18:39:10,029 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 18:39:10,029 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 18:39:10,029 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 18:39:10,029 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 18:39:10,030 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 18:39:10,030 - src.main - INFO - Basic indicators computed
2026-01-21 18:39:10,030 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 18:39:10,030 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 18:39:10,031 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 18:39:10,031 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 18:39:10,032 - src.main - INFO - NaN values after filling: 2778
2026-01-21 18:39:10,032 - src.main - INFO - ============================================================
2026-01-21 18:39:10,032 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 18:39:10,032 - src.main - INFO - ============================================================
2026-01-21 18:39:10,032 - src.main - INFO - Applying Kalman Filter...
2026-01-21 18:39:10,032 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 18:39:10,481 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 18:39:10,481 - src.main - INFO - Training HMM for regime detection...
2026-01-21 18:39:10,481 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 18:39:10,482 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 18:39:13,367 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.294319719003 is not greater than 14653.58855595114. Delta is -0.29423623213733663
2026-01-21 18:39:13,367 - signal_processor - INFO - HMM training complete
2026-01-21 18:39:13,367 - signal_processor - INFO - Transition matrix:
[[9.81051193e-01 1.89488074e-02 9.11269155e-14]
 [2.58347546e-02 9.65555307e-01 8.60993788e-03]
 [1.30837322e-64 3.36034560e-02 9.66396544e-01]]
2026-01-21 18:39:13,368 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950391]
 [ 0.00042642  0.17092562]
 [-0.00054375  0.34799584]]
2026-01-21 18:39:13,368 - src.main - INFO - Predicting regimes...
2026-01-21 18:39:13,368 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 18:39:13,370 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 18:39:13,371 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 18:39:13,371 - src.main - INFO - Calculating technical indicators...
2026-01-21 18:39:13,371 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 18:39:13,373 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 18:39:13,373 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 18:39:13,376 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 18:39:13,376 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 18:39:13,376 - src.main - INFO - Generating hybrid signals...
2026-01-21 18:39:13,376 - strategy - INFO - Generating hybrid signals
2026-01-21 18:39:13,551 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 18:39:13,552 - src.main - INFO - Signal generation complete:
2026-01-21 18:39:13,553 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 19:14:24,417 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 19:14:24,418 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 19:14:24,418 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 19:14:24,418 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:14:24,418 - src.main - INFO - ============================================================
2026-01-21 19:14:24,418 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 19:14:24,418 - src.main - INFO - ============================================================
2026-01-21 19:14:24,418 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:14:24,418 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 19:14:25,474 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 19:14:25,475 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 19:14:25,475 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 19:14:25,923 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 19:14:25,924 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 19:14:25,924 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 19:14:25,971 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 19:14:25,971 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 19:14:27,109 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 19:14:27,109 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 19:14:27,609 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 19:14:28,091 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 19:14:28,586 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 19:14:29,053 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 19:14:29,594 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 19:14:30,034 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 19:14:30,574 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 19:14:31,124 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 19:14:31,592 - data_fetcher - WARNING - Could not fetch V
2026-01-21 19:14:32,094 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 19:14:32,095 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 19:14:32,097 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 19:14:32,098 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 19:14:32,098 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 19:14:32,098 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 19:14:32,099 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 19:14:32,099 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 19:14:32,100 - src.main - INFO - Basic indicators computed
2026-01-21 19:14:32,100 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 19:14:32,100 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 19:14:32,101 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 19:14:32,101 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 19:14:32,102 - src.main - INFO - NaN values after filling: 2778
2026-01-21 19:14:32,102 - src.main - INFO - ============================================================
2026-01-21 19:14:32,102 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 19:14:32,102 - src.main - INFO - ============================================================
2026-01-21 19:14:32,102 - src.main - INFO - Applying Kalman Filter...
2026-01-21 19:14:32,103 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 19:14:32,578 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 19:14:32,578 - src.main - INFO - Training HMM for regime detection...
2026-01-21 19:14:32,578 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 19:14:32,579 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 19:14:35,818 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.290953522679 is not greater than 14653.585212582528. Delta is -0.29425905984862766
2026-01-21 19:14:35,818 - signal_processor - INFO - HMM training complete
2026-01-21 19:14:35,819 - signal_processor - INFO - Transition matrix:
[[9.81051139e-01 1.89488614e-02 9.18382710e-14]
 [2.58349190e-02 9.65555150e-01 8.60993079e-03]
 [1.28349687e-64 3.36033342e-02 9.66396666e-01]]
2026-01-21 19:14:35,819 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950399]
 [ 0.00042642  0.17092551]
 [-0.00054373  0.34799584]]
2026-01-21 19:14:35,819 - src.main - INFO - Predicting regimes...
2026-01-21 19:14:35,820 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 19:14:35,822 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 19:14:35,822 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 19:14:35,823 - src.main - INFO - Calculating technical indicators...
2026-01-21 19:14:35,823 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 19:14:35,825 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 19:14:35,825 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 19:14:35,829 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 19:14:35,829 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 19:14:35,829 - src.main - INFO - Generating hybrid signals...
2026-01-21 19:14:35,829 - strategy - INFO - Generating hybrid signals
2026-01-21 19:14:36,022 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 19:14:36,023 - src.main - INFO - Signal generation complete:
2026-01-21 19:14:36,024 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 19:15:10,977 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 19:15:10,977 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 19:15:10,978 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 19:15:10,978 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:15:10,978 - src.main - INFO - ============================================================
2026-01-21 19:15:10,978 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 19:15:10,978 - src.main - INFO - ============================================================
2026-01-21 19:15:10,978 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:15:10,979 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 19:15:12,039 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 19:15:12,040 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 19:15:12,040 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 19:15:12,490 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 19:15:12,490 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 19:15:12,490 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 19:15:12,520 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 19:15:12,520 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 19:15:13,693 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 19:15:13,694 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 19:15:14,237 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 19:15:14,713 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 19:15:15,172 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 19:15:15,641 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 19:15:16,164 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 19:15:16,642 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 19:15:17,165 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 19:15:17,691 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 19:15:18,162 - data_fetcher - WARNING - Could not fetch V
2026-01-21 19:15:18,808 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 19:15:18,809 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 19:15:18,811 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 19:15:18,812 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 19:15:18,812 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 19:15:18,812 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 19:15:18,813 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 19:15:18,813 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 19:15:18,813 - src.main - INFO - Basic indicators computed
2026-01-21 19:15:18,814 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 19:15:18,814 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 19:15:18,814 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 19:15:18,815 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 19:15:18,815 - src.main - INFO - NaN values after filling: 2778
2026-01-21 19:15:18,816 - src.main - INFO - ============================================================
2026-01-21 19:15:18,816 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 19:15:18,816 - src.main - INFO - ============================================================
2026-01-21 19:15:18,816 - src.main - INFO - Applying Kalman Filter...
2026-01-21 19:15:18,816 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 19:15:19,269 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 19:15:19,270 - src.main - INFO - Training HMM for regime detection...
2026-01-21 19:15:19,270 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 19:15:19,271 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 19:15:22,078 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.288902621876 is not greater than 14653.583029221147. Delta is -0.29412659927038476
2026-01-21 19:15:22,078 - signal_processor - INFO - HMM training complete
2026-01-21 19:15:22,079 - signal_processor - INFO - Transition matrix:
[[9.81051116e-01 1.89488839e-02 9.13193487e-14]
 [2.58345057e-02 9.65555621e-01 8.60987375e-03]
 [1.30113523e-64 3.36032467e-02 9.66396753e-01]]
2026-01-21 19:15:22,079 - signal_processor - INFO - Means:
[[ 0.00076075  0.08950372]
 [ 0.00042642  0.17092506]
 [-0.00054374  0.34799517]]
2026-01-21 19:15:22,079 - src.main - INFO - Predicting regimes...
2026-01-21 19:15:22,080 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 19:15:22,082 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 19:15:22,082 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 19:15:22,083 - src.main - INFO - Calculating technical indicators...
2026-01-21 19:15:22,083 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 19:15:22,084 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 19:15:22,085 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 19:15:22,088 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 19:15:22,089 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 19:15:22,089 - src.main - INFO - Generating hybrid signals...
2026-01-21 19:15:22,089 - strategy - INFO - Generating hybrid signals
2026-01-21 19:15:22,268 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 19:15:22,268 - src.main - INFO - Signal generation complete:
2026-01-21 19:15:22,269 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 19:15:55,650 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 19:15:55,650 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 19:15:55,650 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 19:15:55,650 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:15:55,650 - src.main - INFO - ============================================================
2026-01-21 19:15:55,651 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 19:15:55,651 - src.main - INFO - ============================================================
2026-01-21 19:15:55,651 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:15:55,651 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 19:15:56,921 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 19:15:56,921 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 19:15:56,922 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 19:15:57,386 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 19:15:57,386 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 19:15:57,386 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 19:15:57,430 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 19:15:57,430 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 19:15:58,592 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 19:15:58,592 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 19:15:59,116 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 19:15:59,593 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 19:16:00,068 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 19:16:00,510 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 19:16:01,079 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 19:16:01,532 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 19:16:02,042 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 19:16:02,571 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 19:16:03,043 - data_fetcher - WARNING - Could not fetch V
2026-01-21 19:16:03,556 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 19:16:03,557 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 19:16:03,559 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 19:16:03,560 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 19:16:03,560 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 19:16:03,560 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 19:16:03,561 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 19:16:03,561 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 19:16:03,562 - src.main - INFO - Basic indicators computed
2026-01-21 19:16:03,562 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 19:16:03,562 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 19:16:03,563 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 19:16:03,563 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 19:16:03,564 - src.main - INFO - NaN values after filling: 2778
2026-01-21 19:16:03,564 - src.main - INFO - ============================================================
2026-01-21 19:16:03,564 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 19:16:03,564 - src.main - INFO - ============================================================
2026-01-21 19:16:03,565 - src.main - INFO - Applying Kalman Filter...
2026-01-21 19:16:03,565 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 19:16:04,027 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 19:16:04,027 - src.main - INFO - Training HMM for regime detection...
2026-01-21 19:16:04,027 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 19:16:04,028 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 19:16:06,992 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.29226673632 is not greater than 14653.586296888281. Delta is -0.2940301519611239
2026-01-21 19:16:06,992 - signal_processor - INFO - HMM training complete
2026-01-21 19:16:06,993 - signal_processor - INFO - Transition matrix:
[[9.81050923e-01 1.89490773e-02 9.18213478e-14]
 [2.58345376e-02 9.65555592e-01 8.60987035e-03]
 [1.29560966e-64 3.36032728e-02 9.66396727e-01]]
2026-01-21 19:16:06,993 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950345]
 [ 0.00042643  0.17092476]
 [-0.00054375  0.34799512]]
2026-01-21 19:16:06,993 - src.main - INFO - Predicting regimes...
2026-01-21 19:16:06,994 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 19:16:06,996 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 19:16:06,996 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 19:16:06,997 - src.main - INFO - Calculating technical indicators...
2026-01-21 19:16:06,997 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 19:16:06,999 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 19:16:06,999 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 19:16:07,002 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 19:16:07,002 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 19:16:07,002 - src.main - INFO - Generating hybrid signals...
2026-01-21 19:16:07,002 - strategy - INFO - Generating hybrid signals
2026-01-21 19:16:07,199 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 19:16:07,200 - src.main - INFO - Signal generation complete:
2026-01-21 19:16:07,201 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 19:17:42,519 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 19:17:42,519 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 19:17:42,519 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 19:17:42,519 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:17:42,519 - src.main - INFO - ============================================================
2026-01-21 19:17:42,519 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 19:17:42,519 - src.main - INFO - ============================================================
2026-01-21 19:17:42,520 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:17:42,520 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 19:17:43,543 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 19:17:43,544 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 19:17:43,544 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 19:17:44,005 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 19:17:44,005 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 19:17:44,006 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 19:17:44,048 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 19:17:44,048 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 19:17:45,146 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 19:17:45,147 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 19:17:45,690 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 19:17:46,167 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 19:17:46,657 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 19:17:47,153 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 19:17:47,794 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 19:17:48,248 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 19:17:48,744 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 19:17:49,333 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 19:17:49,799 - data_fetcher - WARNING - Could not fetch V
2026-01-21 19:17:50,349 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 19:17:50,350 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 19:17:50,351 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 19:17:50,353 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 19:17:50,353 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 19:17:50,353 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 19:17:50,354 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 19:17:50,354 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 19:17:50,354 - src.main - INFO - Basic indicators computed
2026-01-21 19:17:50,355 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 19:17:50,355 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 19:17:50,355 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 19:17:50,355 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 19:17:50,356 - src.main - INFO - NaN values after filling: 2778
2026-01-21 19:17:50,356 - src.main - INFO - ============================================================
2026-01-21 19:17:50,357 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 19:17:50,357 - src.main - INFO - ============================================================
2026-01-21 19:17:50,357 - src.main - INFO - Applying Kalman Filter...
2026-01-21 19:17:50,357 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 19:17:50,840 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 19:17:50,841 - src.main - INFO - Training HMM for regime detection...
2026-01-21 19:17:50,841 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 19:17:50,842 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 19:17:53,954 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.291112242528 is not greater than 14653.585191892513. Delta is -0.29407964998426905
2026-01-21 19:17:53,954 - signal_processor - INFO - HMM training complete
2026-01-21 19:17:53,955 - signal_processor - INFO - Transition matrix:
[[9.81051237e-01 1.89487626e-02 9.01586229e-14]
 [2.58342204e-02 9.65555907e-01 8.60987262e-03]
 [1.34606643e-64 3.36031562e-02 9.66396844e-01]]
2026-01-21 19:17:53,955 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950358]
 [ 0.00042643  0.17092482]
 [-0.00054374  0.3479946 ]]
2026-01-21 19:17:53,955 - src.main - INFO - Predicting regimes...
2026-01-21 19:17:53,956 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 19:17:53,958 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 19:17:53,959 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 19:17:53,959 - src.main - INFO - Calculating technical indicators...
2026-01-21 19:17:53,959 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 19:17:53,961 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 19:17:53,961 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 19:17:53,965 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 19:17:53,965 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 19:17:53,965 - src.main - INFO - Generating hybrid signals...
2026-01-21 19:17:53,966 - strategy - INFO - Generating hybrid signals
2026-01-21 19:17:54,153 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 19:17:54,154 - src.main - INFO - Signal generation complete:
2026-01-21 19:17:54,155 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 19:18:45,230 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 19:18:45,230 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 19:18:45,231 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 19:18:45,231 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:18:45,231 - src.main - INFO - ============================================================
2026-01-21 19:18:45,231 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 19:18:45,231 - src.main - INFO - ============================================================
2026-01-21 19:18:45,231 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:18:45,232 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 19:18:46,358 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 19:18:46,359 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 19:18:46,359 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 19:18:46,830 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 19:18:46,831 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 19:18:46,831 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 19:18:46,871 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 19:18:46,871 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 19:18:48,027 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 19:18:48,027 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 19:18:48,538 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 19:18:49,021 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 19:18:49,464 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 19:18:49,928 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 19:18:50,463 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 19:18:50,945 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 19:18:51,461 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 19:18:51,986 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 19:18:52,468 - data_fetcher - WARNING - Could not fetch V
2026-01-21 19:18:53,030 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 19:18:53,031 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 19:18:53,033 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 19:18:53,034 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 19:18:53,034 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 19:18:53,034 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 19:18:53,035 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 19:18:53,035 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 19:18:53,036 - src.main - INFO - Basic indicators computed
2026-01-21 19:18:53,036 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 19:18:53,036 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 19:18:53,037 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 19:18:53,037 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 19:18:53,038 - src.main - INFO - NaN values after filling: 2778
2026-01-21 19:18:53,038 - src.main - INFO - ============================================================
2026-01-21 19:18:53,039 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 19:18:53,039 - src.main - INFO - ============================================================
2026-01-21 19:18:53,039 - src.main - INFO - Applying Kalman Filter...
2026-01-21 19:18:53,039 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 19:18:53,510 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 19:18:53,510 - src.main - INFO - Training HMM for regime detection...
2026-01-21 19:18:53,511 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 19:18:53,512 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 19:18:56,441 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.291615460976 is not greater than 14653.58593258505. Delta is -0.2943171240749507
2026-01-21 19:18:56,441 - signal_processor - INFO - HMM training complete
2026-01-21 19:18:56,441 - signal_processor - INFO - Transition matrix:
[[9.81051388e-01 1.89486118e-02 9.21997806e-14]
 [2.58348649e-02 9.65555142e-01 8.60999282e-03]
 [1.27157701e-64 3.36035098e-02 9.66396490e-01]]
2026-01-21 19:18:56,442 - signal_processor - INFO - Means:
[[ 0.00076074  0.08950401]
 [ 0.00042642  0.1709258 ]
 [-0.00054372  0.34799622]]
2026-01-21 19:18:56,442 - src.main - INFO - Predicting regimes...
2026-01-21 19:18:56,442 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 19:18:56,444 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 19:18:56,445 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 19:18:56,445 - src.main - INFO - Calculating technical indicators...
2026-01-21 19:18:56,445 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 19:18:56,447 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 19:18:56,447 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 19:18:56,450 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 19:18:56,451 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 19:18:56,451 - src.main - INFO - Generating hybrid signals...
2026-01-21 19:18:56,451 - strategy - INFO - Generating hybrid signals
2026-01-21 19:18:56,627 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 19:18:56,628 - src.main - INFO - Signal generation complete:
2026-01-21 19:18:56,628 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 19:21:32,604 - data_fetcher - INFO - DataFetcher initialized with output_dir=./data
2026-01-21 19:21:32,605 - signal_processor - INFO - SignalProcessor initialized
2026-01-21 19:21:32,605 - strategy - INFO - Strategy initialized with default parameters
2026-01-21 19:21:32,605 - src.main - INFO - CrashDetectionPipeline initialized: SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:21:32,605 - src.main - INFO - ============================================================
2026-01-21 19:21:32,605 - src.main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-21 19:21:32,605 - src.main - INFO - ============================================================
2026-01-21 19:21:32,606 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2015-01-01 to 2026-01-21)
2026-01-21 19:21:32,606 - data_fetcher - INFO - Fetching SPY data from 2015-01-01 to 2026-01-21
2026-01-21 19:21:34,007 - data_fetcher - INFO - Successfully fetched 2778 rows for SPY
2026-01-21 19:21:34,007 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-21 19:21:34,007 - data_fetcher - INFO - Fetching VIX and VVIX data from 2015-01-01 to 2026-01-21
2026-01-21 19:21:34,437 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-21 19:21:34,437 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-21 19:21:34,437 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-21 19:21:34,475 - data_fetcher - INFO - VIX proxy created with shape: (2754, 2)
2026-01-21 19:21:34,476 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-21 19:21:35,616 - data_fetcher - INFO - Credit spread proxy computed, shape: (2778,)
2026-01-21 19:21:35,617 - data_fetcher - INFO - Computing market breadth proxy
2026-01-21 19:21:36,132 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-21 19:21:36,601 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-21 19:21:37,074 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-21 19:21:37,517 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-21 19:21:38,094 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-21 19:21:38,567 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-21 19:21:39,070 - data_fetcher - WARNING - Could not fetch JPM
2026-01-21 19:21:39,584 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-21 19:21:40,058 - data_fetcher - WARNING - Could not fetch V
2026-01-21 19:21:40,672 - data_fetcher - WARNING - Could not fetch WMT
2026-01-21 19:21:40,673 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-21 19:21:40,675 - data_fetcher - WARNING - Remaining NaN values after filling: 2778
2026-01-21 19:21:40,676 - data_fetcher - INFO - Comprehensive dataset created: shape=(2778, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-21 19:21:40,676 - src.main - INFO - Data shape: (2778, 9)
2026-01-21 19:21:40,676 - src.main - INFO - Date range: 2015-01-02 00:00:00 to 2026-01-20 00:00:00
2026-01-21 19:21:40,677 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 19:21:40,677 - signal_processor - INFO - Realized volatility computed. Shape: (2778,)
2026-01-21 19:21:40,677 - src.main - INFO - Basic indicators computed
2026-01-21 19:21:40,678 - src.main - INFO - Returns mean: 0.000497, std: 0.011218
2026-01-21 19:21:40,678 - src.main - INFO - Volatility mean: 0.148804
2026-01-21 19:21:40,679 - src.main - INFO - NaN count after preparation: 2799
2026-01-21 19:21:40,679 - src.main - WARNING - Remaining NaN values: 2799
2026-01-21 19:21:40,680 - src.main - INFO - NaN values after filling: 2778
2026-01-21 19:21:40,680 - src.main - INFO - ============================================================
2026-01-21 19:21:40,680 - src.main - INFO - STAGE 2: Signal Processing
2026-01-21 19:21:40,680 - src.main - INFO - ============================================================
2026-01-21 19:21:40,680 - src.main - INFO - Applying Kalman Filter...
2026-01-21 19:21:40,681 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-21 19:21:41,167 - signal_processor - INFO - Kalman smoothing complete. Output shape: (2778,)
2026-01-21 19:21:41,167 - src.main - INFO - Training HMM for regime detection...
2026-01-21 19:21:41,168 - signal_processor - INFO - Training HMM with 3 states
2026-01-21 19:21:41,168 - signal_processor - INFO - Training data shape: (2778, 2)
2026-01-21 19:21:44,232 - hmmlearn.base - WARNING - Model is not converging.  Current: 14653.285190988367 is not greater than 14653.579762320862. Delta is -0.29457133249525214
2026-01-21 19:21:44,232 - signal_processor - INFO - HMM training complete
2026-01-21 19:21:44,233 - signal_processor - INFO - Transition matrix:
[[9.81051302e-01 1.89486981e-02 9.26378792e-14]
 [2.58352257e-02 9.65554782e-01 8.60999223e-03]
 [1.22453240e-64 3.36036731e-02 9.66396327e-01]]
2026-01-21 19:21:44,233 - signal_processor - INFO - Means:
[[ 0.00076074  0.0895042 ]
 [ 0.0004264   0.17092646]
 [-0.0005437   0.34799719]]
2026-01-21 19:21:44,233 - src.main - INFO - Predicting regimes...
2026-01-21 19:21:44,233 - signal_processor - INFO - Predicting regimes using HMM
2026-01-21 19:21:44,236 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 19:21:44,236 - signal_processor - INFO - State distribution:
0    1403
1    1078
2     297
Name: count, dtype: int64
2026-01-21 19:21:44,237 - src.main - INFO - Calculating technical indicators...
2026-01-21 19:21:44,237 - signal_processor - INFO - Calculating RSI with period=14
2026-01-21 19:21:44,238 - signal_processor - INFO - RSI calculation complete. Mean: 81.00, Std: 37.38
2026-01-21 19:21:44,238 - signal_processor - INFO - Calculating ADX with period=14
2026-01-21 19:21:44,241 - signal_processor - INFO - ADX calculation complete. Shape: (2778,)
2026-01-21 19:21:44,242 - signal_processor - INFO - ADX mean: 32.60, std: 13.28
2026-01-21 19:21:44,242 - src.main - INFO - Generating hybrid signals...
2026-01-21 19:21:44,242 - strategy - INFO - Generating hybrid signals
2026-01-21 19:21:44,419 - strategy - INFO - Signals generated: 153 STRONG_SELL, 124 SELL
2026-01-21 19:21:44,420 - src.main - INFO - Signal generation complete:
2026-01-21 19:21:44,421 - src.main - INFO - Signal distribution:
signal
-2     153
-1     124
 0    2501
Name: count, dtype: int64
2026-01-21 22:34:06,422 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', '^KS11', '^VIX'] from 2020-05-21 to 2026-01-21...
2026-01-21 22:34:10,624 - __main__ - ERROR - An error occurred during the analysis: 'Adj Close'
Traceback (most recent call last):
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Adj Close'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\gg\portfolio_strategy_analysis.py", line 267, in main
    adj_close, ohlcv_data = get_data(tickers, start_date, end_date)
                            ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\gg\portfolio_strategy_analysis.py", line 57, in get_data
    adj_close = ohlcv_data['Adj Close'].copy()
                ~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\frame.py", line 4106, in __getitem__
    return self._getitem_multilevel(key)
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\frame.py", line 4164, in _getitem_multilevel
    loc = self.columns.get_loc(key)
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\multi.py", line 3059, in get_loc
    loc = self._get_level_indexer(key, level=0)
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\multi.py", line 3410, in _get_level_indexer
    idx = self._get_loc_single_level_index(level_index, key)
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\multi.py", line 2999, in _get_loc_single_level_index
    return level_index.get_loc(key)
           ~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Adj Close'
2026-01-21 22:35:50,181 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', '^KS11', '^VIX'] from 2020-05-21 to 2026-01-21...
2026-01-21 22:35:51,439 - __main__ - ERROR - An error occurred during the analysis: 'Adj Close'
Traceback (most recent call last):
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Adj Close'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\gg\portfolio_strategy_analysis.py", line 279, in main
    adj_close, ohlcv_data = get_data(tickers, ohlcv_tickers, start_date, end_date)
                            ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\gg\portfolio_strategy_analysis.py", line 65, in get_data
    adj_close[ticker] = raw_data['Adj Close'][ticker]
                        ~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\frame.py", line 4106, in __getitem__
    return self._getitem_multilevel(key)
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\frame.py", line 4164, in _getitem_multilevel
    loc = self.columns.get_loc(key)
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\multi.py", line 3059, in get_loc
    loc = self._get_level_indexer(key, level=0)
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\multi.py", line 3410, in _get_level_indexer
    idx = self._get_loc_single_level_index(level_index, key)
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\multi.py", line 2999, in _get_loc_single_level_index
    return level_index.get_loc(key)
           ~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Adj Close'
2026-01-21 22:37:07,575 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', '^KS11', '^VIX'] from 2020-05-21 to 2026-01-21...
2026-01-21 22:37:09,144 - __main__ - ERROR - Could not download data for QQQ: isna is not defined for MultiIndex
2026-01-21 22:37:10,788 - __main__ - ERROR - Could not download data for ^VIX: isna is not defined for MultiIndex
2026-01-21 22:37:10,802 - __main__ - INFO - Data download and preprocessing complete.
2026-01-21 22:37:10,803 - __main__ - INFO - Generating crash avoidance signals for QQQ...
2026-01-21 22:37:10,803 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 22:37:10,803 - src.strategy - INFO - Strategy initialized with default parameters
2026-01-21 22:37:10,804 - __main__ - ERROR - An error occurred during the analysis: "None of [Index([slice(None, None, None), 'QQQ'], dtype='object')] are in the [columns]"
Traceback (most recent call last):
  File "D:\gg\portfolio_strategy_analysis.py", line 303, in main
    dynamic_signal, signal_details = generate_crash_avoidance_signal(ohlcv_data, signal_ticker='QQQ', vix_ticker='^VIX')
                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\gg\portfolio_strategy_analysis.py", line 118, in generate_crash_avoidance_signal
    price_data = ohlcv_data.loc[:, (slice(None), signal_ticker)]
                 ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexing.py", line 1184, in __getitem__
    return self._getitem_tuple(key)
           ~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexing.py", line 1377, in _getitem_tuple
    return self._getitem_tuple_same_dim(tup)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexing.py", line 1020, in _getitem_tuple_same_dim
    retval = getattr(retval, self.name)._getitem_axis(key, axis=i)
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexing.py", line 1420, in _getitem_axis
    return self._getitem_iterable(key, axis=axis)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexing.py", line 1360, in _getitem_iterable
    keyarr, indexer = self._get_listlike_indexer(key, axis)
                      ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexing.py", line 1558, in _get_listlike_indexer
    keyarr, indexer = ax._get_indexer_strict(key, axis_name)
                      ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\base.py", line 6212, in _get_indexer_strict
    self._raise_if_missing(keyarr, indexer, axis_name)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\base.py", line 6261, in _raise_if_missing
    raise KeyError(f"None of [{key}] are in the [{axis_name}]")
KeyError: "None of [Index([slice(None, None, None), 'QQQ'], dtype='object')] are in the [columns]"
2026-01-21 22:38:20,383 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', '^KS11', '^VIX'] from 2020-05-21 to 2026-01-21...
2026-01-21 22:38:21,677 - __main__ - INFO - Data download and preprocessing complete.
2026-01-21 22:38:21,678 - __main__ - INFO - Generating crash avoidance signals for QQQ...
2026-01-21 22:38:21,678 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 22:38:21,679 - src.strategy - INFO - Strategy initialized with default parameters
2026-01-21 22:38:21,682 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 22:38:21,684 - src.signal_processor - INFO - Realized volatility computed. Shape: (1469,)
2026-01-21 22:38:21,684 - src.signal_processor - INFO - Training HMM with 3 states
2026-01-21 22:38:21,686 - src.signal_processor - INFO - Training data shape: (1450, 2)
2026-01-21 22:38:28,309 - src.signal_processor - INFO - HMM training complete
2026-01-21 22:38:28,313 - src.signal_processor - INFO - Transition matrix:
[[9.69999663e-01 3.00003369e-02 3.64847228e-54]
 [2.60517344e-02 9.61175008e-01 1.27732579e-02]
 [9.89079941e-32 1.82047187e-02 9.81795281e-01]]
2026-01-21 22:38:28,314 - src.signal_processor - INFO - Means:
[[ 1.12685670e-03  1.24173935e-01]
 [ 9.85222206e-04  1.89977934e-01]
 [-2.38456341e-04  3.14598049e-01]]
2026-01-21 22:38:28,322 - src.signal_processor - INFO - Predicting regimes using HMM
2026-01-21 22:38:28,328 - src.signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 22:38:28,330 - src.signal_processor - INFO - State distribution:
0    451
1    560
2    439
Name: count, dtype: int64
2026-01-21 22:38:28,330 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 22:38:28,334 - src.signal_processor - INFO - RSI calculation complete. Mean: 56.24, Std: 16.23
2026-01-21 22:38:28,335 - src.signal_processor - INFO - Calculating ADX with period=14
2026-01-21 22:38:28,342 - src.signal_processor - INFO - ADX calculation complete. Shape: (1470,)
2026-01-21 22:38:28,342 - src.signal_processor - INFO - ADX mean: 32.57, std: 12.55
2026-01-21 22:38:28,346 - src.strategy - INFO - Generating hybrid signals
2026-01-21 22:38:28,347 - src.strategy - WARNING - VVIX not available, using fallback for term structure
2026-01-21 22:38:28,677 - src.strategy - INFO - Signals generated: 163 STRONG_SELL, 220 SELL
2026-01-21 22:38:28,680 - __main__ - INFO - Crash avoidance signals generated successfully.
2026-01-21 22:38:28,683 - __main__ - INFO - Starting backtests for all strategies...
2026-01-21 22:38:28,684 - __main__ - INFO - Running backtest for Portfolio 1 (Static)...
2026-01-21 22:38:28,690 - __main__ - INFO - Running backtest for Portfolio 2 (Dynamic)...
2026-01-21 22:38:28,694 - __main__ - INFO - All backtests complete.
2026-01-21 22:38:28,701 - __main__ - INFO - 
---   ---
               Portfolio 1 (Static) Portfolio 2 (Dynamic)
                  233,001,334          266,525,843 
  (CAGR)               15.84%                18.57%
                        15.82%                11.97%
                           1.00                  1.55
  (MDD)                 -23.50%               -17.66%
2026-01-21 22:38:28,703 - __main__ - INFO - Generating plots...
2026-01-21 22:38:28,791 - __main__ - WARNING - Malgun Gothic or AppleGothic font not found. Please install it for Korean characters.
2026-01-21 22:38:30,478 - __main__ - ERROR - An error occurred during the analysis: 'Position'
Traceback (most recent call last):
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'Position'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\gg\portfolio_strategy_analysis.py", line 313, in main
    plot_results(portfolio_values, signal_details, signal_ticker='QQQ')
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\gg\portfolio_strategy_analysis.py", line 244, in plot_results
    position_changes = signal_details['Position'].diff()
                       ~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\frame.py", line 4107, in __getitem__
    indexer = self.columns.get_loc(key)
  File "C:\Users\gamja\AppData\Roaming\Python\Python313\site-packages\pandas\core\indexes\base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'Position'
2026-01-21 22:39:15,989 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', '^KS11', '^VIX'] from 2020-05-21 to 2026-01-21...
2026-01-21 22:39:17,200 - __main__ - INFO - Data download and preprocessing complete.
2026-01-21 22:39:17,200 - __main__ - INFO - Generating crash avoidance signals for QQQ...
2026-01-21 22:39:17,201 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 22:39:17,201 - src.strategy - INFO - Strategy initialized with default parameters
2026-01-21 22:39:17,203 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 22:39:17,205 - src.signal_processor - INFO - Realized volatility computed. Shape: (1469,)
2026-01-21 22:39:17,206 - src.signal_processor - INFO - Training HMM with 3 states
2026-01-21 22:39:17,206 - src.signal_processor - INFO - Training data shape: (1450, 2)
2026-01-21 22:39:23,134 - src.signal_processor - INFO - HMM training complete
2026-01-21 22:39:23,138 - src.signal_processor - INFO - Transition matrix:
[[9.69999511e-01 3.00004885e-02 3.73730867e-54]
 [2.60519969e-02 9.61174710e-01 1.27732931e-02]
 [1.01371914e-31 1.82047286e-02 9.81795271e-01]]
2026-01-21 22:39:23,139 - src.signal_processor - INFO - Means:
[[ 1.12686124e-03  1.24174033e-01]
 [ 9.85221734e-04  1.89978086e-01]
 [-2.38461373e-04  3.14598140e-01]]
2026-01-21 22:39:23,139 - src.signal_processor - INFO - Predicting regimes using HMM
2026-01-21 22:39:23,144 - src.signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 22:39:23,146 - src.signal_processor - INFO - State distribution:
0    451
1    560
2    439
Name: count, dtype: int64
2026-01-21 22:39:23,146 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 22:39:23,150 - src.signal_processor - INFO - RSI calculation complete. Mean: 56.24, Std: 16.23
2026-01-21 22:39:23,150 - src.signal_processor - INFO - Calculating ADX with period=14
2026-01-21 22:39:23,161 - src.signal_processor - INFO - ADX calculation complete. Shape: (1470,)
2026-01-21 22:39:23,164 - src.signal_processor - INFO - ADX mean: 32.57, std: 12.55
2026-01-21 22:39:23,170 - src.strategy - INFO - Generating hybrid signals
2026-01-21 22:39:23,171 - src.strategy - WARNING - VVIX not available, using fallback for term structure
2026-01-21 22:39:23,471 - src.strategy - INFO - Signals generated: 163 STRONG_SELL, 220 SELL
2026-01-21 22:39:23,472 - __main__ - INFO - Crash avoidance signals generated successfully.
2026-01-21 22:39:23,477 - __main__ - INFO - Starting backtests for all strategies...
2026-01-21 22:39:23,478 - __main__ - INFO - Running backtest for Portfolio 1 (Static)...
2026-01-21 22:39:23,483 - __main__ - INFO - Running backtest for Portfolio 2 (Dynamic)...
2026-01-21 22:39:23,489 - __main__ - INFO - All backtests complete.
2026-01-21 22:39:23,627 - __main__ - INFO - 
---   ---
               Portfolio 1 (Static) Portfolio 2 (Dynamic)
                  233,001,357          266,525,719 
  (CAGR)               15.84%                18.57%
                        15.82%                11.97%
                           1.00                  1.55
  (MDD)                 -23.50%               -17.66%
2026-01-21 22:39:23,629 - __main__ - INFO - Generating plots...
2026-01-21 22:39:23,695 - __main__ - WARNING - Malgun Gothic or AppleGothic font not found. Please install it for Korean characters.
2026-01-21 22:39:25,331 - __main__ - INFO - Plots saved to 'portfolio_strategy_comparison.png'
2026-01-21 22:48:17,312 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 22:48:17,312 - src.strategy - INFO - Strategy initialized with default parameters
2026-01-21 22:48:17,315 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 22:48:17,317 - src.signal_processor - INFO - Realized volatility computed. Shape: (1422,)
2026-01-21 22:48:17,317 - src.signal_processor - INFO - Training HMM with 3 states
2026-01-21 22:48:17,318 - src.signal_processor - INFO - Training data shape: (1403, 2)
2026-01-21 22:48:22,754 - src.signal_processor - INFO - HMM training complete
2026-01-21 22:48:22,755 - src.signal_processor - INFO - Transition matrix:
[[9.67749684e-01 3.22503161e-02 4.59836850e-58]
 [2.83928257e-02 9.58688803e-01 1.29183718e-02]
 [1.16810259e-19 1.64539641e-02 9.83546036e-01]]
2026-01-21 22:48:22,756 - src.signal_processor - INFO - Means:
[[ 1.16235980e-03  1.26011849e-01]
 [ 1.15191783e-03  1.89841562e-01]
 [-2.99939223e-04  3.12901002e-01]]
2026-01-21 22:48:22,756 - src.signal_processor - INFO - Predicting regimes using HMM
2026-01-21 22:48:22,771 - src.signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 22:48:22,774 - src.signal_processor - INFO - State distribution:
0    423
1    510
2    470
Name: count, dtype: int64
2026-01-21 22:48:22,774 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 22:48:22,778 - src.signal_processor - INFO - RSI calculation complete. Mean: 56.19, Std: 15.97
2026-01-21 22:48:22,779 - src.signal_processor - INFO - Calculating ADX with period=14
2026-01-21 22:48:22,784 - src.signal_processor - INFO - ADX calculation complete. Shape: (1423,)
2026-01-21 22:48:22,785 - src.signal_processor - INFO - ADX mean: 32.04, std: 12.41
2026-01-21 22:48:22,793 - src.strategy - INFO - Generating hybrid signals
2026-01-21 22:48:22,793 - src.strategy - WARNING - VVIX not available, using fallback for term structure
2026-01-21 22:48:23,050 - src.strategy - INFO - Signals generated: 177 STRONG_SELL, 232 SELL
2026-01-21 23:03:21,449 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', '^KS11', '^VIX'] from 2020-05-21 to 2026-01-21...
2026-01-21 23:03:22,704 - __main__ - INFO - Data download and preprocessing complete.
2026-01-21 23:03:22,705 - __main__ - INFO - Generating OPTIMIZED signals with Triple-Lock Strategy...
2026-01-21 23:03:22,705 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 23:03:22,707 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 23:03:22,708 - src.signal_processor - INFO - Realized volatility computed. Shape: (1469,)
2026-01-21 23:03:22,709 - src.signal_processor - INFO - Training HMM with 3 states
2026-01-21 23:03:22,709 - src.signal_processor - INFO - Training data shape: (1450, 2)
2026-01-21 23:03:26,807 - src.signal_processor - INFO - HMM training complete
2026-01-21 23:03:26,808 - src.signal_processor - INFO - Transition matrix:
[[9.69999651e-01 3.00003488e-02 3.92380131e-54]
 [2.60521402e-02 9.61174485e-01 1.27733745e-02]
 [1.04950835e-31 1.82047034e-02 9.81795297e-01]]
2026-01-21 23:03:26,808 - src.signal_processor - INFO - Means:
[[ 1.12685662e-03  1.24174425e-01]
 [ 9.85225277e-04  1.89978048e-01]
 [-2.38459012e-04  3.14597960e-01]]
2026-01-21 23:03:26,808 - src.signal_processor - INFO - Predicting regimes using HMM
2026-01-21 23:03:26,812 - src.signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 23:03:26,815 - src.signal_processor - INFO - State distribution:
0    451
1    560
2    439
Name: count, dtype: int64
2026-01-21 23:03:26,815 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 23:03:26,819 - src.signal_processor - INFO - RSI calculation complete. Mean: 56.24, Std: 16.23
2026-01-21 23:03:26,819 - src.signal_processor - INFO - Calculating ADX with period=14
2026-01-21 23:03:26,824 - src.signal_processor - INFO - ADX calculation complete. Shape: (1470,)
2026-01-21 23:03:26,825 - src.signal_processor - INFO - ADX mean: 32.57, std: 12.55
2026-01-21 23:03:26,930 - __main__ - INFO - Optimized signals generated successfully.
2026-01-21 23:03:26,933 - __main__ - INFO - Starting backtests...
2026-01-21 23:03:26,933 - __main__ - INFO - Running backtest for Optimized Portfolio...
2026-01-21 23:03:26,936 - __main__ - INFO - All backtests complete.
2026-01-21 23:03:26,947 - __main__ - INFO - Generating plots...
2026-01-21 23:03:27,022 - __main__ - WARNING - Korean font not found.
2026-01-21 23:03:28,781 - __main__ - INFO - Plots saved to 'optimized_portfolio_comparison.png'
2026-01-21 23:07:45,662 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', '^KS11', '^VIX']...
2026-01-21 23:07:46,852 - __main__ - INFO - Generating FINAL OPTIMIZED signals (Triple-Lock with AND condition)...
2026-01-21 23:07:46,853 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 23:07:46,854 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 23:07:46,856 - src.signal_processor - INFO - Realized volatility computed. Shape: (1469,)
2026-01-21 23:07:46,856 - src.signal_processor - INFO - Training HMM with 3 states
2026-01-21 23:07:46,856 - src.signal_processor - INFO - Training data shape: (1450, 2)
2026-01-21 23:07:50,836 - src.signal_processor - INFO - HMM training complete
2026-01-21 23:07:50,836 - src.signal_processor - INFO - Transition matrix:
[[9.69999535e-01 3.00004647e-02 3.70948605e-54]
 [2.60522405e-02 9.61174436e-01 1.27733235e-02]
 [1.00357498e-31 1.82047671e-02 9.81795233e-01]]
2026-01-21 23:07:50,837 - src.signal_processor - INFO - Means:
[[ 1.12684179e-03  1.24174318e-01]
 [ 9.85231149e-04  1.89978341e-01]
 [-2.38457730e-04  3.14598349e-01]]
2026-01-21 23:07:50,837 - src.signal_processor - INFO - Predicting regimes using HMM
2026-01-21 23:07:50,840 - src.signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 23:07:50,843 - src.signal_processor - INFO - State distribution:
0    451
1    560
2    439
Name: count, dtype: int64
2026-01-21 23:07:50,843 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 23:07:50,847 - src.signal_processor - INFO - RSI calculation complete. Mean: 56.24, Std: 16.23
2026-01-21 23:07:50,847 - src.signal_processor - INFO - Calculating ADX with period=14
2026-01-21 23:07:50,852 - src.signal_processor - INFO - ADX calculation complete. Shape: (1470,)
2026-01-21 23:07:50,853 - src.signal_processor - INFO - ADX mean: 32.57, std: 12.55
2026-01-21 23:07:51,026 - __main__ - INFO - Final optimized signals generated.
2026-01-21 23:07:51,126 - __main__ - WARNING - Korean font not found.
2026-01-21 23:07:52,815 - __main__ - INFO - Plot saved to 'final_optimized_portfolio_comparison.png'
2026-01-21 23:18:23,484 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', '^KS11', '^VIX']...
2026-01-21 23:18:24,675 - __main__ - INFO - Generating signals with 5-day Cooldown Strategy...
2026-01-21 23:18:24,675 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 23:18:24,675 - src.strategy - INFO - Strategy initialized with default parameters
2026-01-21 23:18:24,677 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 23:18:24,678 - src.signal_processor - INFO - Realized volatility computed. Shape: (1469,)
2026-01-21 23:18:24,678 - src.signal_processor - INFO - Training HMM with 3 states
2026-01-21 23:18:24,679 - src.signal_processor - INFO - Training data shape: (1450, 2)
2026-01-21 23:18:28,494 - src.signal_processor - INFO - HMM training complete
2026-01-21 23:18:28,496 - src.signal_processor - INFO - Transition matrix:
[[9.69999588e-01 3.00004120e-02 3.83803334e-54]
 [2.60520823e-02 9.61174569e-01 1.27733488e-02]
 [1.03278132e-31 1.82047267e-02 9.81795273e-01]]
2026-01-21 23:18:28,497 - src.signal_processor - INFO - Means:
[[ 1.12684695e-03  1.24174189e-01]
 [ 9.85225586e-04  1.89978023e-01]
 [-2.38450240e-04  3.14597869e-01]]
2026-01-21 23:18:28,497 - src.signal_processor - INFO - Predicting regimes using HMM
2026-01-21 23:18:28,502 - src.signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-21 23:18:28,504 - src.signal_processor - INFO - State distribution:
0    451
1    560
2    439
Name: count, dtype: int64
2026-01-21 23:18:28,505 - src.signal_processor - INFO - Calculating RSI with period=14
2026-01-21 23:18:28,508 - src.signal_processor - INFO - RSI calculation complete. Mean: 56.24, Std: 16.23
2026-01-21 23:18:28,508 - src.signal_processor - INFO - Calculating ADX with period=14
2026-01-21 23:18:28,513 - src.signal_processor - INFO - ADX calculation complete. Shape: (1470,)
2026-01-21 23:18:28,513 - src.signal_processor - INFO - ADX mean: 32.57, std: 12.55
2026-01-21 23:18:28,517 - src.strategy - INFO - Generating hybrid signals
2026-01-21 23:18:28,518 - src.strategy - WARNING - VVIX not available, using fallback for term structure
2026-01-21 23:18:28,781 - src.strategy - INFO - Signals generated: 163 STRONG_SELL, 220 SELL
2026-01-21 23:18:28,880 - __main__ - INFO - Cooldown signals generated.
2026-01-21 23:18:28,972 - __main__ - WARNING - Korean font not found.
2026-01-21 23:18:30,225 - __main__ - INFO - Plot saved to 'cooldown_strategy_comparison.png'
2026-01-21 23:31:47,098 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', 'XLP', '^KS11', '^VIX', 'SPY']...
2026-01-21 23:31:48,094 - yfinance - ERROR - 
3 Failed downloads:
2026-01-21 23:31:48,094 - yfinance - ERROR - ['^KS11', 'QQQ', '^VIX']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:31:48,112 - __main__ - INFO - Generating Initial Strategy signals for QQQ...
2026-01-21 23:31:48,112 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 23:31:48,112 - src.strategy - INFO - Strategy initialized with default parameters
2026-01-21 23:31:48,113 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 23:31:48,114 - src.signal_processor - INFO - Realized volatility computed. Shape: (0,)
2026-01-21 23:32:12,295 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', 'XLP', '^KS11', '^VIX', 'SPY']...
2026-01-21 23:32:13,349 - yfinance - ERROR - 
3 Failed downloads:
2026-01-21 23:32:13,349 - yfinance - ERROR - ['^VIX', 'SCHD', 'QQQ']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:32:13,401 - __main__ - INFO - Generating Initial Strategy signals for QQQ...
2026-01-21 23:32:13,401 - src.signal_processor - INFO - SignalProcessor initialized
2026-01-21 23:32:13,402 - src.strategy - INFO - Strategy initialized with default parameters
2026-01-21 23:32:13,404 - src.signal_processor - INFO - Calculating realized volatility with window=20
2026-01-21 23:32:13,404 - src.signal_processor - INFO - Realized volatility computed. Shape: (0,)
2026-01-21 23:32:52,776 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', 'XLP', '^KS11', '^VIX', 'SPY']...
2026-01-21 23:32:53,826 - yfinance - ERROR - 
5 Failed downloads:
2026-01-21 23:32:53,826 - yfinance - ERROR - ['^VIX', '^KS11', 'QQQ', 'JEPI', 'XLP']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:32:53,835 - __main__ - WARNING - Attempt 1: yfinance returned empty data or unexpected structure for ['SCHD', 'QQQ', 'GLD', 'JEPI', 'XLP', '^KS11', '^VIX', 'SPY']. Retrying in 5 seconds...
2026-01-21 23:32:59,406 - yfinance - ERROR - 
2 Failed downloads:
2026-01-21 23:32:59,407 - yfinance - ERROR - ['^KS11', '^VIX']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:32:59,642 - __main__ - WARNING - Attempt 2: yfinance returned empty data or unexpected structure for ['SCHD', 'QQQ', 'GLD', 'JEPI', 'XLP', '^KS11', '^VIX', 'SPY']. Retrying in 10 seconds...
2026-01-21 23:33:10,262 - __main__ - ERROR - Failed to download data for ['SCHD', 'QQQ', 'GLD', 'JEPI', 'XLP', '^KS11', '^VIX', 'SPY'] after 3 attempts. yfinance returned empty or unexpected data.
2026-01-21 23:33:55,516 - __main__ - INFO - Downloading data for ['SCHD', 'QQQ', 'GLD', 'JEPI', 'XLP', '^KS11', '^VIX', 'SPY'] individually...
2026-01-21 23:33:55,516 - __main__ - INFO - Downloading SCHD (Attempt 1)...
2026-01-21 23:33:55,843 - yfinance - ERROR - 
1 Failed download:
2026-01-21 23:33:55,843 - yfinance - ERROR - ['SCHD']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:33:55,847 - __main__ - WARNING - Attempt 1: yfinance returned empty data for SCHD. Retrying in 2 seconds.
2026-01-21 23:33:57,849 - __main__ - INFO - Downloading SCHD (Attempt 2)...
2026-01-21 23:33:58,191 - yfinance - ERROR - 
1 Failed download:
2026-01-21 23:33:58,193 - yfinance - ERROR - ['SCHD']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:33:58,197 - __main__ - WARNING - Attempt 2: yfinance returned empty data for SCHD. Retrying in 4 seconds.
2026-01-21 23:34:02,197 - __main__ - INFO - Downloading SCHD (Attempt 3)...
2026-01-21 23:34:02,607 - yfinance - ERROR - 
1 Failed download:
2026-01-21 23:34:02,608 - yfinance - ERROR - ['SCHD']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:34:02,612 - __main__ - ERROR - Failed to download data for SCHD after 3 attempts. Returned empty or unexpected data. Skipping this ticker.
2026-01-21 23:34:03,613 - __main__ - INFO - Downloading QQQ (Attempt 1)...
2026-01-21 23:34:03,901 - yfinance - ERROR - 
1 Failed download:
2026-01-21 23:34:03,902 - yfinance - ERROR - ['QQQ']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:34:03,905 - __main__ - WARNING - Attempt 1: yfinance returned empty data for QQQ. Retrying in 2 seconds.
2026-01-21 23:34:05,906 - __main__ - INFO - Downloading QQQ (Attempt 2)...
2026-01-21 23:34:06,342 - yfinance - ERROR - 
1 Failed download:
2026-01-21 23:34:06,342 - yfinance - ERROR - ['QQQ']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:34:06,346 - __main__ - WARNING - Attempt 2: yfinance returned empty data for QQQ. Retrying in 4 seconds.
2026-01-21 23:34:10,347 - __main__ - INFO - Downloading QQQ (Attempt 3)...
2026-01-21 23:34:10,640 - yfinance - ERROR - 
1 Failed download:
2026-01-21 23:34:10,640 - yfinance - ERROR - ['QQQ']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-21 23:34:10,643 - __main__ - ERROR - Failed to download data for QQQ after 3 attempts. Returned empty or unexpected data. Skipping this ticker.
2026-01-21 23:34:11,646 - __main__ - INFO - Downloading GLD (Attempt 1)...
2026-01-21 23:34:12,100 - __main__ - INFO - Successfully downloaded GLD.
2026-01-21 23:34:13,101 - __main__ - INFO - Downloading JEPI (Attempt 1)...
2026-01-21 23:34:13,529 - __main__ - INFO - Successfully downloaded JEPI.
2026-01-21 23:34:14,532 - __main__ - INFO - Downloading XLP (Attempt 1)...
2026-01-21 23:34:14,955 - __main__ - INFO - Successfully downloaded XLP.
2026-01-21 23:34:15,959 - __main__ - INFO - Downloading ^KS11 (Attempt 1)...
2026-01-21 23:34:16,345 - __main__ - INFO - Successfully downloaded ^KS11.
2026-01-21 23:34:17,346 - __main__ - INFO - Downloading ^VIX (Attempt 1)...
2026-01-21 23:34:17,714 - __main__ - INFO - Successfully downloaded ^VIX.
2026-01-21 23:34:18,715 - __main__ - INFO - Downloading SPY (Attempt 1)...
2026-01-21 23:34:19,223 - __main__ - INFO - Successfully downloaded SPY.
2026-01-22 00:16:59,541 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 00:16:59,542 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 00:16:59,542 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 00:16:59,542 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:16:59,543 - main - INFO - 
======================================================================
2026-01-22 00:16:59,543 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 00:16:59,543 - main - INFO - ======================================================================
2026-01-22 00:16:59,544 - main - INFO - ============================================================
2026-01-22 00:16:59,544 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 00:16:59,544 - main - INFO - ============================================================
2026-01-22 00:16:59,545 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:16:59,545 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 00:17:00,077 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 00:17:00,079 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 00:17:00,092 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 00:17:00,708 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 00:17:00,710 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 00:17:00,710 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 00:17:01,194 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 00:17:01,197 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 00:17:01,576 - yfinance - ERROR - 
1 Failed download:
2026-01-22 00:17:01,579 - yfinance - ERROR - ['HYG']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-22 00:17:02,078 - data_fetcher - INFO - Credit spread proxy computed, shape: (0,)
2026-01-22 00:17:02,085 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 00:17:02,523 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 00:17:02,966 - yfinance - ERROR - 
1 Failed download:
2026-01-22 00:17:02,969 - yfinance - ERROR - ['MSFT']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-22 00:17:03,472 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 00:17:03,799 - yfinance - ERROR - 
1 Failed download:
2026-01-22 00:17:03,799 - yfinance - ERROR - ['AMZN']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-22 00:17:04,328 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 00:17:04,721 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 00:17:05,313 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 00:17:05,778 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 00:17:06,297 - data_fetcher - WARNING - Could not fetch V
2026-01-22 00:17:06,780 - yfinance - ERROR - 
1 Failed download:
2026-01-22 00:17:06,788 - yfinance - ERROR - ['WMT']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-22 00:17:06,826 - data_fetcher - ERROR - Error computing breadth proxy: If using all scalar values, you must pass an index
2026-01-22 00:17:06,872 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 00:17:06,889 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 8), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread']
2026-01-22 00:17:06,892 - main - INFO - Data shape: (1254, 8)
2026-01-22 00:17:06,895 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 00:17:06,898 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 00:17:06,925 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 00:17:06,950 - main - INFO - Basic indicators computed
2026-01-22 00:17:06,971 - main - INFO - Returns mean: 0.000514, std: 0.010765
2026-01-22 00:17:06,990 - main - INFO - Volatility mean: 0.154472
2026-01-22 00:17:07,007 - main - INFO - NaN count after preparation: 1275
2026-01-22 00:17:07,030 - main - WARNING - Remaining NaN values: 1275
2026-01-22 00:17:07,041 - main - INFO - NaN values after filling: 1254
2026-01-22 00:17:07,067 - main - INFO - ============================================================
2026-01-22 00:17:07,070 - main - INFO - STAGE 2: Signal Processing
2026-01-22 00:17:07,111 - main - INFO - ============================================================
2026-01-22 00:17:07,149 - main - INFO - Applying Kalman Filter...
2026-01-22 00:17:07,191 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 00:17:07,922 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 00:17:07,941 - main - INFO - Training HMM for regime detection...
2026-01-22 00:17:07,955 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 00:17:07,978 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 00:17:14,281 - signal_processor - INFO - HMM training complete
2026-01-22 00:17:14,282 - signal_processor - INFO - Transition matrix:
[[6.97511923e-04 9.99301046e-01 1.44228309e-06]
 [9.82651511e-01 3.66238903e-03 1.36860998e-02]
 [3.82556200e-03 1.23193108e-02 9.83855127e-01]]
2026-01-22 00:17:14,283 - signal_processor - INFO - Means:
[[1.08910076e-03 1.16978509e-01]
 [1.93504102e-04 1.17783242e-01]
 [2.17485761e-04 2.41564014e-01]]
2026-01-22 00:17:14,283 - main - INFO - Predicting regimes...
2026-01-22 00:17:14,283 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 00:17:14,287 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 00:17:14,289 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 00:17:14,290 - main - INFO - Calculating technical indicators...
2026-01-22 00:17:14,290 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 00:17:14,293 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 00:17:14,294 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 00:17:14,299 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 00:17:14,300 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 00:17:14,300 - main - INFO - Generating hybrid signals...
2026-01-22 00:17:14,301 - strategy - INFO - Generating hybrid signals
2026-01-22 00:17:14,503 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 00:17:14,506 - main - INFO - Signal generation complete:
2026-01-22 00:17:14,508 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 00:17:14,509 - main - INFO - ============================================================
2026-01-22 00:17:14,509 - main - INFO - STAGE 3: Backtesting
2026-01-22 00:17:14,509 - main - INFO - ============================================================
2026-01-22 00:17:14,513 - main - INFO - Backtest Results:
2026-01-22 00:17:14,513 - main - INFO -   Total Return: 56.97% (Benchmark: 90.43%)
2026-01-22 00:17:14,513 - main - INFO -   CAGR: 9.46% (Benchmark: 13.78%)
2026-01-22 00:17:14,513 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 00:17:14,513 - main - INFO -   Sharpe Ratio: 0.869
2026-01-22 00:17:14,514 - main - INFO -   Sortino Ratio: 0.990
2026-01-22 00:17:14,514 - main - INFO -   Win Rate: 41.07%
2026-01-22 00:17:14,514 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.990)
2026-01-22 00:17:14,515 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 00:17:14,515 - main - INFO - ============================================================
2026-01-22 00:17:14,516 - main - INFO - STAGE 4: Visualization
2026-01-22 00:17:14,516 - main - INFO - ============================================================
2026-01-22 00:17:16,434 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 00:17:17,134 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 00:17:17,685 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 00:17:17,715 - main - INFO - All visualizations saved
2026-01-22 00:17:17,715 - main - INFO - ============================================================
2026-01-22 00:17:17,716 - main - INFO - STAGE 5: Report Generation
2026-01-22 00:17:17,716 - main - INFO - ============================================================
2026-01-22 00:17:17,718 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 00:17:17,720 - main - INFO - 
======================================================================
2026-01-22 00:17:17,728 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 00:17:17,728 - main - INFO - ======================================================================
2026-01-22 00:17:17,730 - MailerService - ERROR - config.yaml   .
2026-01-22 00:20:50,632 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 00:20:50,632 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 00:20:50,632 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 00:20:50,632 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:20:50,633 - main - INFO - 
======================================================================
2026-01-22 00:20:50,633 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 00:20:50,633 - main - INFO - ======================================================================
2026-01-22 00:20:50,633 - main - INFO - ============================================================
2026-01-22 00:20:50,633 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 00:20:50,633 - main - INFO - ============================================================
2026-01-22 00:20:50,633 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:20:50,634 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 00:20:51,422 - yfinance - ERROR - 
1 Failed download:
2026-01-22 00:20:51,422 - yfinance - ERROR - ['SPY']: YFRateLimitError('Too Many Requests. Rate limited. Try after a while.')
2026-01-22 00:20:51,433 - data_fetcher - ERROR - Error fetching SPY: No data fetched for SPY
2026-01-22 00:20:51,433 - data_fetcher - ERROR - Error creating comprehensive dataset: No data fetched for SPY
2026-01-22 00:20:51,434 - main - ERROR - Error in data preparation: No data fetched for SPY
2026-01-22 00:20:51,434 - main - ERROR - Pipeline execution failed: No data fetched for SPY
2026-01-22 00:20:54,837 - MailerService - INFO -   : NORMAL
2026-01-22 00:31:32,201 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 00:31:32,201 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 00:31:32,202 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 00:31:32,202 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:31:32,202 - main - INFO - 
======================================================================
2026-01-22 00:31:32,202 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 00:31:32,202 - main - INFO - ======================================================================
2026-01-22 00:31:32,202 - main - INFO - ============================================================
2026-01-22 00:31:32,202 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 00:31:32,202 - main - INFO - ============================================================
2026-01-22 00:31:32,203 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:31:32,203 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 00:31:32,639 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 00:31:32,639 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 00:31:32,639 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 00:31:32,991 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 00:31:32,991 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 00:31:32,991 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 00:31:33,436 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 00:31:33,436 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 00:31:34,270 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 00:31:34,270 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 00:31:34,727 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 00:31:35,178 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 00:31:35,615 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 00:31:35,976 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 00:31:36,411 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 00:31:36,830 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 00:31:37,294 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 00:31:37,767 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 00:31:38,168 - data_fetcher - WARNING - Could not fetch V
2026-01-22 00:31:38,588 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 00:31:38,588 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 00:31:38,591 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 00:31:38,592 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 00:31:38,592 - main - INFO - Data shape: (1254, 9)
2026-01-22 00:31:38,592 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 00:31:38,593 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 00:31:38,593 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 00:31:38,594 - main - INFO - Basic indicators computed
2026-01-22 00:31:38,594 - main - INFO - Returns mean: 0.000514, std: 0.010765
2026-01-22 00:31:38,594 - main - INFO - Volatility mean: 0.154472
2026-01-22 00:31:38,594 - main - INFO - NaN count after preparation: 1275
2026-01-22 00:31:38,594 - main - WARNING - Remaining NaN values: 1275
2026-01-22 00:31:38,595 - main - INFO - NaN values after filling: 1254
2026-01-22 00:31:38,596 - main - INFO - ============================================================
2026-01-22 00:31:38,596 - main - INFO - STAGE 2: Signal Processing
2026-01-22 00:31:38,596 - main - INFO - ============================================================
2026-01-22 00:31:38,596 - main - INFO - Applying Kalman Filter...
2026-01-22 00:31:38,596 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 00:31:38,820 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 00:31:38,820 - main - INFO - Training HMM for regime detection...
2026-01-22 00:31:38,820 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 00:31:38,821 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 00:31:41,326 - signal_processor - INFO - HMM training complete
2026-01-22 00:31:41,327 - signal_processor - INFO - Transition matrix:
[[6.98271797e-04 9.99300286e-01 1.44217057e-06]
 [9.82647564e-01 3.66639537e-03 1.36860406e-02]
 [3.82473775e-03 1.23202782e-02 9.83854984e-01]]
2026-01-22 00:31:41,327 - signal_processor - INFO - Means:
[[1.08934745e-03 1.16978817e-01]
 [1.93529762e-04 1.17783341e-01]
 [2.17480722e-04 2.41564487e-01]]
2026-01-22 00:31:41,327 - main - INFO - Predicting regimes...
2026-01-22 00:31:41,327 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 00:31:41,329 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 00:31:41,331 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 00:31:41,331 - main - INFO - Calculating technical indicators...
2026-01-22 00:31:41,331 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 00:31:41,333 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 00:31:41,333 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 00:31:41,335 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 00:31:41,336 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 00:31:41,336 - main - INFO - Generating hybrid signals...
2026-01-22 00:31:41,336 - strategy - INFO - Generating hybrid signals
2026-01-22 00:31:41,443 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 00:31:41,444 - main - INFO - Signal generation complete:
2026-01-22 00:31:41,445 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 00:31:41,445 - main - INFO - ============================================================
2026-01-22 00:31:41,445 - main - INFO - STAGE 3: Backtesting
2026-01-22 00:31:41,445 - main - INFO - ============================================================
2026-01-22 00:31:41,447 - main - INFO - Backtest Results:
2026-01-22 00:31:41,447 - main - INFO -   Total Return: 56.98% (Benchmark: 90.45%)
2026-01-22 00:31:41,447 - main - INFO -   CAGR: 9.46% (Benchmark: 13.79%)
2026-01-22 00:31:41,448 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 00:31:41,448 - main - INFO -   Sharpe Ratio: 0.869
2026-01-22 00:31:41,448 - main - INFO -   Sortino Ratio: 0.991
2026-01-22 00:31:41,448 - main - INFO -   Win Rate: 41.07%
2026-01-22 00:31:41,448 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.991)
2026-01-22 00:31:41,448 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 00:31:41,448 - main - INFO - ============================================================
2026-01-22 00:31:41,449 - main - INFO - STAGE 4: Visualization
2026-01-22 00:31:41,449 - main - INFO - ============================================================
2026-01-22 00:31:42,018 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 00:31:42,429 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 00:31:42,697 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 00:31:42,711 - main - INFO - All visualizations saved
2026-01-22 00:31:42,712 - main - INFO - ============================================================
2026-01-22 00:31:42,712 - main - INFO - STAGE 5: Report Generation
2026-01-22 00:31:42,712 - main - INFO - ============================================================
2026-01-22 00:31:42,713 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 00:31:42,714 - main - INFO - 
======================================================================
2026-01-22 00:31:42,714 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 00:31:42,714 - main - INFO - ======================================================================
2026-01-22 00:31:45,747 - MailerService - INFO -   : DANGER
2026-01-22 00:40:01,665 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 00:40:01,665 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 00:40:01,665 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 00:40:01,665 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:40:01,665 - main - INFO - 
======================================================================
2026-01-22 00:40:01,665 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 00:40:01,666 - main - INFO - ======================================================================
2026-01-22 00:40:01,666 - main - INFO - ============================================================
2026-01-22 00:40:01,666 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 00:40:01,666 - main - INFO - ============================================================
2026-01-22 00:40:01,666 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:40:01,666 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 00:40:02,093 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 00:40:02,093 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 00:40:02,094 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 00:40:02,478 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 00:40:02,478 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 00:40:02,478 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 00:40:02,941 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 00:40:02,941 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 00:40:03,745 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 00:40:03,746 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 00:40:04,242 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 00:40:04,706 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 00:40:05,141 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 00:40:05,503 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 00:40:05,969 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 00:40:06,349 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 00:40:06,872 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 00:40:07,347 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 00:40:07,753 - data_fetcher - WARNING - Could not fetch V
2026-01-22 00:40:08,202 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 00:40:08,202 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 00:40:08,204 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 00:40:08,205 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 00:40:08,205 - main - INFO - Data shape: (1254, 9)
2026-01-22 00:40:08,205 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 00:40:08,206 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 00:40:08,206 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 00:40:08,207 - main - INFO - Basic indicators computed
2026-01-22 00:40:08,207 - main - INFO - Returns mean: 0.000515, std: 0.010766
2026-01-22 00:40:08,207 - main - INFO - Volatility mean: 0.154473
2026-01-22 00:40:08,207 - main - INFO - NaN count after preparation: 1275
2026-01-22 00:40:08,207 - main - WARNING - Remaining NaN values: 1275
2026-01-22 00:40:08,208 - main - INFO - NaN values after filling: 1254
2026-01-22 00:40:08,209 - main - INFO - ============================================================
2026-01-22 00:40:08,209 - main - INFO - STAGE 2: Signal Processing
2026-01-22 00:40:08,209 - main - INFO - ============================================================
2026-01-22 00:40:08,209 - main - INFO - Applying Kalman Filter...
2026-01-22 00:40:08,209 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 00:40:08,421 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 00:40:08,421 - main - INFO - Training HMM for regime detection...
2026-01-22 00:40:08,422 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 00:40:08,422 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 00:40:10,680 - signal_processor - INFO - HMM training complete
2026-01-22 00:40:10,680 - signal_processor - INFO - Transition matrix:
[[7.05004824e-04 9.99293554e-01 1.44119977e-06]
 [9.82612240e-01 3.70191971e-03 1.36858398e-02]
 [3.81444826e-03 1.23309482e-02 9.83854604e-01]]
2026-01-22 00:40:10,680 - signal_processor - INFO - Means:
[[1.09153974e-03 1.16981495e-01]
 [1.93656484e-04 1.17784286e-01]
 [2.17484217e-04 2.41566393e-01]]
2026-01-22 00:40:10,680 - main - INFO - Predicting regimes...
2026-01-22 00:40:10,681 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 00:40:10,683 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 00:40:10,683 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 00:40:10,683 - main - INFO - Calculating technical indicators...
2026-01-22 00:40:10,684 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 00:40:10,685 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 00:40:10,685 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 00:40:10,689 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 00:40:10,689 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 00:40:10,689 - main - INFO - Generating hybrid signals...
2026-01-22 00:40:10,690 - strategy - INFO - Generating hybrid signals
2026-01-22 00:40:10,805 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 00:40:10,806 - main - INFO - Signal generation complete:
2026-01-22 00:40:10,807 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 00:40:10,807 - main - INFO - ============================================================
2026-01-22 00:40:10,807 - main - INFO - STAGE 3: Backtesting
2026-01-22 00:40:10,807 - main - INFO - ============================================================
2026-01-22 00:40:10,809 - main - INFO - Backtest Results:
2026-01-22 00:40:10,809 - main - INFO -   Total Return: 57.14% (Benchmark: 90.64%)
2026-01-22 00:40:10,809 - main - INFO -   CAGR: 9.48% (Benchmark: 13.81%)
2026-01-22 00:40:10,809 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 00:40:10,809 - main - INFO -   Sharpe Ratio: 0.870
2026-01-22 00:40:10,809 - main - INFO -   Sortino Ratio: 0.993
2026-01-22 00:40:10,809 - main - INFO -   Win Rate: 41.07%
2026-01-22 00:40:10,809 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.993)
2026-01-22 00:40:10,810 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 00:40:10,810 - main - INFO - ============================================================
2026-01-22 00:40:10,810 - main - INFO - STAGE 4: Visualization
2026-01-22 00:40:10,810 - main - INFO - ============================================================
2026-01-22 00:40:11,282 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 00:40:11,653 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 00:40:11,925 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 00:40:11,939 - main - INFO - All visualizations saved
2026-01-22 00:40:11,939 - main - INFO - ============================================================
2026-01-22 00:40:11,940 - main - INFO - STAGE 5: Report Generation
2026-01-22 00:40:11,940 - main - INFO - ============================================================
2026-01-22 00:40:11,941 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 00:40:11,942 - main - INFO - 
======================================================================
2026-01-22 00:40:11,942 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 00:40:11,942 - main - INFO - ======================================================================
2026-01-22 00:40:14,524 - MailerService - INFO -   : DANGER
2026-01-22 00:46:43,425 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 00:46:43,426 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 00:46:43,426 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 00:46:43,426 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:46:43,426 - main - INFO - 
======================================================================
2026-01-22 00:46:43,426 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 00:46:43,426 - main - INFO - ======================================================================
2026-01-22 00:46:43,426 - main - INFO - ============================================================
2026-01-22 00:46:43,427 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 00:46:43,427 - main - INFO - ============================================================
2026-01-22 00:46:43,427 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:46:43,427 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 00:46:43,860 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 00:46:43,860 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 00:46:43,860 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 00:46:44,210 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 00:46:44,211 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 00:46:44,211 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 00:46:44,593 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 00:46:44,593 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 00:46:45,408 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 00:46:45,409 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 00:46:45,834 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 00:46:46,278 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 00:46:46,711 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 00:46:47,072 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 00:46:47,517 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 00:46:47,877 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 00:46:48,278 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 00:46:48,770 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 00:46:49,160 - data_fetcher - WARNING - Could not fetch V
2026-01-22 00:46:49,694 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 00:46:49,695 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 00:46:49,697 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 00:46:49,698 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 00:46:49,698 - main - INFO - Data shape: (1254, 9)
2026-01-22 00:46:49,698 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 00:46:49,699 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 00:46:49,699 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 00:46:49,699 - main - INFO - Basic indicators computed
2026-01-22 00:46:49,699 - main - INFO - Returns mean: 0.000516, std: 0.010767
2026-01-22 00:46:49,700 - main - INFO - Volatility mean: 0.154475
2026-01-22 00:46:49,700 - main - INFO - NaN count after preparation: 1275
2026-01-22 00:46:49,700 - main - WARNING - Remaining NaN values: 1275
2026-01-22 00:46:49,701 - main - INFO - NaN values after filling: 1254
2026-01-22 00:46:49,701 - main - INFO - ============================================================
2026-01-22 00:46:49,701 - main - INFO - STAGE 2: Signal Processing
2026-01-22 00:46:49,702 - main - INFO - ============================================================
2026-01-22 00:46:49,702 - main - INFO - Applying Kalman Filter...
2026-01-22 00:46:49,702 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 00:46:49,914 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 00:46:49,914 - main - INFO - Training HMM for regime detection...
2026-01-22 00:46:49,915 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 00:46:49,915 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 00:46:52,170 - signal_processor - INFO - HMM training complete
2026-01-22 00:46:52,171 - signal_processor - INFO - Transition matrix:
[[7.14648621e-04 9.99283911e-01 1.44036732e-06]
 [9.82561432e-01 3.75304532e-03 1.36855231e-02]
 [3.79816086e-03 1.23479385e-02 9.83853901e-01]]
2026-01-22 00:46:52,171 - signal_processor - INFO - Means:
[[1.09437368e-03 1.16985563e-01]
 [1.93913982e-04 1.17785874e-01]
 [2.17482126e-04 2.41569775e-01]]
2026-01-22 00:46:52,171 - main - INFO - Predicting regimes...
2026-01-22 00:46:52,172 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 00:46:52,173 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 00:46:52,174 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 00:46:52,175 - main - INFO - Calculating technical indicators...
2026-01-22 00:46:52,175 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 00:46:52,176 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 00:46:52,176 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 00:46:52,180 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 00:46:52,180 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 00:46:52,180 - main - INFO - Generating hybrid signals...
2026-01-22 00:46:52,180 - strategy - INFO - Generating hybrid signals
2026-01-22 00:46:52,288 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 00:46:52,289 - main - INFO - Signal generation complete:
2026-01-22 00:46:52,290 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 00:46:52,290 - main - INFO - ============================================================
2026-01-22 00:46:52,290 - main - INFO - STAGE 3: Backtesting
2026-01-22 00:46:52,290 - main - INFO - ============================================================
2026-01-22 00:46:52,293 - main - INFO - Backtest Results:
2026-01-22 00:46:52,293 - main - INFO -   Total Return: 57.35% (Benchmark: 90.90%)
2026-01-22 00:46:52,293 - main - INFO -   CAGR: 9.51% (Benchmark: 13.84%)
2026-01-22 00:46:52,293 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 00:46:52,293 - main - INFO -   Sharpe Ratio: 0.873
2026-01-22 00:46:52,293 - main - INFO -   Sortino Ratio: 0.996
2026-01-22 00:46:52,293 - main - INFO -   Win Rate: 41.07%
2026-01-22 00:46:52,294 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.996)
2026-01-22 00:46:52,294 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 00:46:52,294 - main - INFO - ============================================================
2026-01-22 00:46:52,294 - main - INFO - STAGE 4: Visualization
2026-01-22 00:46:52,294 - main - INFO - ============================================================
2026-01-22 00:46:52,770 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 00:46:53,174 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 00:46:53,446 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 00:46:53,461 - main - INFO - All visualizations saved
2026-01-22 00:46:53,461 - main - INFO - ============================================================
2026-01-22 00:46:53,461 - main - INFO - STAGE 5: Report Generation
2026-01-22 00:46:53,461 - main - INFO - ============================================================
2026-01-22 00:46:53,463 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 00:46:53,464 - main - INFO - 
======================================================================
2026-01-22 00:46:53,464 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 00:46:53,464 - main - INFO - ======================================================================
2026-01-22 00:46:56,676 - MailerService - INFO -   : DANGER
2026-01-22 00:47:51,697 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 00:47:51,697 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 00:47:51,697 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 00:47:51,698 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:47:51,698 - main - INFO - 
======================================================================
2026-01-22 00:47:51,698 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 00:47:51,698 - main - INFO - ======================================================================
2026-01-22 00:47:51,698 - main - INFO - ============================================================
2026-01-22 00:47:51,698 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 00:47:51,698 - main - INFO - ============================================================
2026-01-22 00:47:51,699 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:47:51,699 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 00:47:52,164 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 00:47:52,164 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 00:47:52,164 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 00:47:52,637 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 00:47:52,637 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 00:47:52,637 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 00:47:53,244 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 00:47:53,244 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 00:47:54,273 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 00:47:54,273 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 00:47:54,882 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 00:47:55,475 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 00:47:55,982 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 00:47:56,502 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 00:47:57,240 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 00:47:57,765 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 00:47:58,190 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 00:47:58,651 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 00:47:59,078 - data_fetcher - WARNING - Could not fetch V
2026-01-22 00:47:59,609 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 00:47:59,610 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 00:47:59,612 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 00:47:59,613 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 00:47:59,613 - main - INFO - Data shape: (1254, 9)
2026-01-22 00:47:59,613 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 00:47:59,613 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 00:47:59,614 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 00:47:59,614 - main - INFO - Basic indicators computed
2026-01-22 00:47:59,615 - main - INFO - Returns mean: 0.000516, std: 0.010767
2026-01-22 00:47:59,615 - main - INFO - Volatility mean: 0.154475
2026-01-22 00:47:59,615 - main - INFO - NaN count after preparation: 1275
2026-01-22 00:47:59,615 - main - WARNING - Remaining NaN values: 1275
2026-01-22 00:47:59,616 - main - INFO - NaN values after filling: 1254
2026-01-22 00:47:59,616 - main - INFO - ============================================================
2026-01-22 00:47:59,616 - main - INFO - STAGE 2: Signal Processing
2026-01-22 00:47:59,616 - main - INFO - ============================================================
2026-01-22 00:47:59,616 - main - INFO - Applying Kalman Filter...
2026-01-22 00:47:59,617 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 00:47:59,827 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 00:47:59,828 - main - INFO - Training HMM for regime detection...
2026-01-22 00:47:59,828 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 00:47:59,829 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 00:48:01,878 - signal_processor - INFO - HMM training complete
2026-01-22 00:48:01,879 - signal_processor - INFO - Transition matrix:
[[7.14224343e-04 9.99284335e-01 1.44043452e-06]
 [9.82563686e-01 3.75076336e-03 1.36855504e-02]
 [3.79888278e-03 1.23471385e-02 9.83853979e-01]]
2026-01-22 00:48:01,879 - signal_processor - INFO - Means:
[[1.09425837e-03 1.16985345e-01]
 [1.93897740e-04 1.17785770e-01]
 [2.17480053e-04 2.41569521e-01]]
2026-01-22 00:48:01,879 - main - INFO - Predicting regimes...
2026-01-22 00:48:01,880 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 00:48:01,882 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 00:48:01,883 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 00:48:01,883 - main - INFO - Calculating technical indicators...
2026-01-22 00:48:01,883 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 00:48:01,885 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 00:48:01,885 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 00:48:01,888 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 00:48:01,888 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 00:48:01,888 - main - INFO - Generating hybrid signals...
2026-01-22 00:48:01,888 - strategy - INFO - Generating hybrid signals
2026-01-22 00:48:01,996 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 00:48:01,997 - main - INFO - Signal generation complete:
2026-01-22 00:48:01,997 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 00:48:01,998 - main - INFO - ============================================================
2026-01-22 00:48:01,998 - main - INFO - STAGE 3: Backtesting
2026-01-22 00:48:01,998 - main - INFO - ============================================================
2026-01-22 00:48:02,000 - main - INFO - Backtest Results:
2026-01-22 00:48:02,000 - main - INFO -   Total Return: 57.34% (Benchmark: 90.89%)
2026-01-22 00:48:02,000 - main - INFO -   CAGR: 9.51% (Benchmark: 13.84%)
2026-01-22 00:48:02,000 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 00:48:02,001 - main - INFO -   Sharpe Ratio: 0.873
2026-01-22 00:48:02,001 - main - INFO -   Sortino Ratio: 0.995
2026-01-22 00:48:02,001 - main - INFO -   Win Rate: 41.07%
2026-01-22 00:48:02,001 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.995)
2026-01-22 00:48:02,001 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 00:48:02,001 - main - INFO - ============================================================
2026-01-22 00:48:02,001 - main - INFO - STAGE 4: Visualization
2026-01-22 00:48:02,001 - main - INFO - ============================================================
2026-01-22 00:48:02,475 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 00:48:02,847 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 00:48:03,118 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 00:48:03,132 - main - INFO - All visualizations saved
2026-01-22 00:48:03,132 - main - INFO - ============================================================
2026-01-22 00:48:03,132 - main - INFO - STAGE 5: Report Generation
2026-01-22 00:48:03,132 - main - INFO - ============================================================
2026-01-22 00:48:03,134 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 00:48:03,135 - main - INFO - 
======================================================================
2026-01-22 00:48:03,135 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 00:48:03,135 - main - INFO - ======================================================================
2026-01-22 00:48:06,169 - MailerService - INFO -   : DANGER
2026-01-22 00:48:50,359 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 00:48:50,359 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 00:48:50,359 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 00:48:50,359 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:48:50,359 - main - INFO - 
======================================================================
2026-01-22 00:48:50,360 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 00:48:50,360 - main - INFO - ======================================================================
2026-01-22 00:48:50,360 - main - INFO - ============================================================
2026-01-22 00:48:50,360 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 00:48:50,360 - main - INFO - ============================================================
2026-01-22 00:48:50,360 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 00:48:50,360 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 00:48:50,799 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 00:48:50,799 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 00:48:50,799 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 00:48:51,170 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 00:48:51,170 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 00:48:51,170 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 00:48:51,593 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 00:48:51,593 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 00:48:52,400 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 00:48:52,400 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 00:48:52,781 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 00:48:53,162 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 00:48:53,600 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 00:48:53,969 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 00:48:54,458 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 00:48:54,861 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 00:48:55,334 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 00:48:55,745 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 00:48:56,158 - data_fetcher - WARNING - Could not fetch V
2026-01-22 00:48:56,611 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 00:48:56,611 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 00:48:56,613 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 00:48:56,614 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 00:48:56,614 - main - INFO - Data shape: (1254, 9)
2026-01-22 00:48:56,615 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 00:48:56,615 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 00:48:56,615 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 00:48:56,616 - main - INFO - Basic indicators computed
2026-01-22 00:48:56,616 - main - INFO - Returns mean: 0.000516, std: 0.010767
2026-01-22 00:48:56,616 - main - INFO - Volatility mean: 0.154474
2026-01-22 00:48:56,617 - main - INFO - NaN count after preparation: 1275
2026-01-22 00:48:56,617 - main - WARNING - Remaining NaN values: 1275
2026-01-22 00:48:56,618 - main - INFO - NaN values after filling: 1254
2026-01-22 00:48:56,618 - main - INFO - ============================================================
2026-01-22 00:48:56,618 - main - INFO - STAGE 2: Signal Processing
2026-01-22 00:48:56,618 - main - INFO - ============================================================
2026-01-22 00:48:56,618 - main - INFO - Applying Kalman Filter...
2026-01-22 00:48:56,618 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 00:48:56,826 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 00:48:56,826 - main - INFO - Training HMM for regime detection...
2026-01-22 00:48:56,827 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 00:48:56,827 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 00:48:58,882 - signal_processor - INFO - HMM training complete
2026-01-22 00:48:58,882 - signal_processor - INFO - Transition matrix:
[[7.13348512e-04 9.99285211e-01 1.44050011e-06]
 [9.82568336e-01 3.74604922e-03 1.36856149e-02]
 [3.80044434e-03 1.23454228e-02 9.83854133e-01]]
2026-01-22 00:48:58,882 - signal_processor - INFO - Means:
[[1.09400465e-03 1.16984797e-01]
 [1.93880460e-04 1.17785443e-01]
 [2.17484861e-04 2.41568550e-01]]
2026-01-22 00:48:58,882 - main - INFO - Predicting regimes...
2026-01-22 00:48:58,883 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 00:48:58,885 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 00:48:58,886 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 00:48:58,886 - main - INFO - Calculating technical indicators...
2026-01-22 00:48:58,886 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 00:48:58,887 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 00:48:58,888 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 00:48:58,890 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 00:48:58,890 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 00:48:58,890 - main - INFO - Generating hybrid signals...
2026-01-22 00:48:58,891 - strategy - INFO - Generating hybrid signals
2026-01-22 00:48:59,019 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 00:48:59,020 - main - INFO - Signal generation complete:
2026-01-22 00:48:59,020 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 00:48:59,021 - main - INFO - ============================================================
2026-01-22 00:48:59,021 - main - INFO - STAGE 3: Backtesting
2026-01-22 00:48:59,021 - main - INFO - ============================================================
2026-01-22 00:48:59,023 - main - INFO - Backtest Results:
2026-01-22 00:48:59,023 - main - INFO -   Total Return: 57.33% (Benchmark: 90.87%)
2026-01-22 00:48:59,023 - main - INFO -   CAGR: 9.51% (Benchmark: 13.84%)
2026-01-22 00:48:59,023 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 00:48:59,024 - main - INFO -   Sharpe Ratio: 0.872
2026-01-22 00:48:59,024 - main - INFO -   Sortino Ratio: 0.995
2026-01-22 00:48:59,024 - main - INFO -   Win Rate: 41.07%
2026-01-22 00:48:59,024 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.995)
2026-01-22 00:48:59,024 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 00:48:59,024 - main - INFO - ============================================================
2026-01-22 00:48:59,024 - main - INFO - STAGE 4: Visualization
2026-01-22 00:48:59,024 - main - INFO - ============================================================
2026-01-22 00:48:59,508 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 00:48:59,884 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 00:49:00,157 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 00:49:00,171 - main - INFO - All visualizations saved
2026-01-22 00:49:00,171 - main - INFO - ============================================================
2026-01-22 00:49:00,171 - main - INFO - STAGE 5: Report Generation
2026-01-22 00:49:00,171 - main - INFO - ============================================================
2026-01-22 00:49:00,173 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 00:49:00,173 - main - INFO - 
======================================================================
2026-01-22 00:49:00,173 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 00:49:00,173 - main - INFO - ======================================================================
2026-01-22 00:49:03,339 - MailerService - INFO -   : DANGER
2026-01-22 01:00:45,752 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 01:00:45,753 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 01:00:45,753 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 01:00:45,753 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:00:45,753 - main - INFO - 
======================================================================
2026-01-22 01:00:45,753 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 01:00:45,753 - main - INFO - ======================================================================
2026-01-22 01:00:45,753 - main - INFO - ============================================================
2026-01-22 01:00:45,754 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 01:00:45,754 - main - INFO - ============================================================
2026-01-22 01:00:45,754 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:00:45,754 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 01:00:46,180 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 01:00:46,180 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 01:00:46,180 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 01:00:46,543 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 01:00:46,543 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 01:00:46,543 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 01:00:46,977 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 01:00:46,977 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 01:00:47,765 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 01:00:47,765 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 01:00:48,251 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 01:00:48,664 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 01:00:49,100 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 01:00:49,440 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 01:00:49,870 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 01:00:50,226 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 01:00:50,636 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 01:00:51,140 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 01:00:51,541 - data_fetcher - WARNING - Could not fetch V
2026-01-22 01:00:51,975 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 01:00:51,976 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 01:00:51,978 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 01:00:51,978 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 01:00:51,979 - main - INFO - Data shape: (1254, 9)
2026-01-22 01:00:51,979 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 01:00:51,979 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 01:00:51,979 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 01:00:51,980 - main - INFO - Basic indicators computed
2026-01-22 01:00:51,980 - main - INFO - Returns mean: 0.000516, std: 0.010767
2026-01-22 01:00:51,980 - main - INFO - Volatility mean: 0.154474
2026-01-22 01:00:51,981 - main - INFO - NaN count after preparation: 1275
2026-01-22 01:00:51,981 - main - WARNING - Remaining NaN values: 1275
2026-01-22 01:00:51,982 - main - INFO - NaN values after filling: 1254
2026-01-22 01:00:51,982 - main - INFO - ============================================================
2026-01-22 01:00:51,982 - main - INFO - STAGE 2: Signal Processing
2026-01-22 01:00:51,982 - main - INFO - ============================================================
2026-01-22 01:00:51,982 - main - INFO - Applying Kalman Filter...
2026-01-22 01:00:51,982 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 01:00:52,209 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 01:00:52,210 - main - INFO - Training HMM for regime detection...
2026-01-22 01:00:52,210 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 01:00:52,211 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 01:00:54,494 - signal_processor - INFO - HMM training complete
2026-01-22 01:00:54,494 - signal_processor - INFO - Transition matrix:
[[7.10714431e-04 9.99287845e-01 1.44064028e-06]
 [9.82582206e-01 3.73213131e-03 1.36856627e-02]
 [3.80476933e-03 1.23410111e-02 9.83854220e-01]]
2026-01-22 01:00:54,494 - signal_processor - INFO - Means:
[[1.09326742e-03 1.16983760e-01]
 [1.93811503e-04 1.17785074e-01]
 [2.17483440e-04 2.41568069e-01]]
2026-01-22 01:00:54,495 - main - INFO - Predicting regimes...
2026-01-22 01:00:54,495 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 01:00:54,497 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 01:00:54,498 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 01:00:54,498 - main - INFO - Calculating technical indicators...
2026-01-22 01:00:54,498 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 01:00:54,500 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 01:00:54,500 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 01:00:54,502 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 01:00:54,503 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 01:00:54,503 - main - INFO - Generating hybrid signals...
2026-01-22 01:00:54,503 - strategy - INFO - Generating hybrid signals
2026-01-22 01:00:54,617 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 01:00:54,617 - main - INFO - Signal generation complete:
2026-01-22 01:00:54,618 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 01:00:54,618 - main - INFO - ============================================================
2026-01-22 01:00:54,618 - main - INFO - STAGE 3: Backtesting
2026-01-22 01:00:54,619 - main - INFO - ============================================================
2026-01-22 01:00:54,621 - main - INFO - Backtest Results:
2026-01-22 01:00:54,621 - main - INFO -   Total Return: 57.27% (Benchmark: 90.80%)
2026-01-22 01:00:54,621 - main - INFO -   CAGR: 9.50% (Benchmark: 13.83%)
2026-01-22 01:00:54,621 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 01:00:54,621 - main - INFO -   Sharpe Ratio: 0.872
2026-01-22 01:00:54,622 - main - INFO -   Sortino Ratio: 0.994
2026-01-22 01:00:54,622 - main - INFO -   Win Rate: 41.07%
2026-01-22 01:00:54,622 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.994)
2026-01-22 01:00:54,622 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 01:00:54,622 - main - INFO - ============================================================
2026-01-22 01:00:54,622 - main - INFO - STAGE 4: Visualization
2026-01-22 01:00:54,622 - main - INFO - ============================================================
2026-01-22 01:00:55,154 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 01:00:55,565 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 01:00:55,857 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 01:00:55,876 - main - INFO - All visualizations saved
2026-01-22 01:00:55,876 - main - INFO - ============================================================
2026-01-22 01:00:55,876 - main - INFO - STAGE 5: Report Generation
2026-01-22 01:00:55,877 - main - INFO - ============================================================
2026-01-22 01:00:55,878 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 01:00:55,879 - main - INFO - 
======================================================================
2026-01-22 01:00:55,879 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 01:00:55,879 - main - INFO - ======================================================================
2026-01-22 01:01:00,159 - MailerService - INFO -   : DANGER
2026-01-22 01:05:56,722 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 01:05:56,723 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 01:05:56,723 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 01:05:56,723 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:05:56,723 - main - INFO - 
======================================================================
2026-01-22 01:05:56,723 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 01:05:56,723 - main - INFO - ======================================================================
2026-01-22 01:05:56,724 - main - INFO - ============================================================
2026-01-22 01:05:56,724 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 01:05:56,724 - main - INFO - ============================================================
2026-01-22 01:05:56,724 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:05:56,724 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 01:05:57,141 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 01:05:57,141 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 01:05:57,142 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 01:05:57,497 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 01:05:57,497 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 01:05:57,497 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 01:05:57,953 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 01:05:57,953 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 01:05:58,791 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 01:05:58,791 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 01:05:59,239 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 01:05:59,653 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 01:06:00,096 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 01:06:00,477 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 01:06:00,921 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 01:06:01,303 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 01:06:01,747 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 01:06:02,238 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 01:06:02,649 - data_fetcher - WARNING - Could not fetch V
2026-01-22 01:06:03,152 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 01:06:03,153 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 01:06:03,155 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 01:06:03,156 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 01:06:03,156 - main - INFO - Data shape: (1254, 9)
2026-01-22 01:06:03,156 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 01:06:03,157 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 01:06:03,157 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 01:06:03,158 - main - INFO - Basic indicators computed
2026-01-22 01:06:03,158 - main - INFO - Returns mean: 0.000515, std: 0.010766
2026-01-22 01:06:03,158 - main - INFO - Volatility mean: 0.154474
2026-01-22 01:06:03,159 - main - INFO - NaN count after preparation: 1275
2026-01-22 01:06:03,159 - main - WARNING - Remaining NaN values: 1275
2026-01-22 01:06:03,159 - main - INFO - NaN values after filling: 1254
2026-01-22 01:06:03,160 - main - INFO - ============================================================
2026-01-22 01:06:03,160 - main - INFO - STAGE 2: Signal Processing
2026-01-22 01:06:03,160 - main - INFO - ============================================================
2026-01-22 01:06:03,160 - main - INFO - Applying Kalman Filter...
2026-01-22 01:06:03,160 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 01:06:03,378 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 01:06:03,378 - main - INFO - Training HMM for regime detection...
2026-01-22 01:06:03,379 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 01:06:03,379 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 01:06:05,783 - signal_processor - INFO - HMM training complete
2026-01-22 01:06:05,783 - signal_processor - INFO - Transition matrix:
[[7.07663519e-04 9.99290896e-01 1.44095708e-06]
 [9.82598274e-01 3.71596952e-03 1.36857567e-02]
 [3.80992187e-03 1.23356520e-02 9.83854426e-01]]
2026-01-22 01:06:05,784 - signal_processor - INFO - Means:
[[1.09236974e-03 1.16982581e-01]
 [1.93735635e-04 1.17784658e-01]
 [2.17486927e-04 2.41567112e-01]]
2026-01-22 01:06:05,784 - main - INFO - Predicting regimes...
2026-01-22 01:06:05,784 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 01:06:05,786 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 01:06:05,787 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 01:06:05,787 - main - INFO - Calculating technical indicators...
2026-01-22 01:06:05,787 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 01:06:05,789 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 01:06:05,789 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 01:06:05,792 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 01:06:05,792 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 01:06:05,792 - main - INFO - Generating hybrid signals...
2026-01-22 01:06:05,793 - strategy - INFO - Generating hybrid signals
2026-01-22 01:06:05,901 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 01:06:05,901 - main - INFO - Signal generation complete:
2026-01-22 01:06:05,902 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 01:06:05,902 - main - INFO - ============================================================
2026-01-22 01:06:05,902 - main - INFO - STAGE 3: Backtesting
2026-01-22 01:06:05,902 - main - INFO - ============================================================
2026-01-22 01:06:05,904 - main - INFO - Backtest Results:
2026-01-22 01:06:05,904 - main - INFO -   Total Return: 57.20% (Benchmark: 90.72%)
2026-01-22 01:06:05,905 - main - INFO -   CAGR: 9.49% (Benchmark: 13.82%)
2026-01-22 01:06:05,905 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 01:06:05,905 - main - INFO -   Sharpe Ratio: 0.871
2026-01-22 01:06:05,905 - main - INFO -   Sortino Ratio: 0.994
2026-01-22 01:06:05,905 - main - INFO -   Win Rate: 41.07%
2026-01-22 01:06:05,905 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.994)
2026-01-22 01:06:05,905 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 01:06:05,905 - main - INFO - ============================================================
2026-01-22 01:06:05,906 - main - INFO - STAGE 4: Visualization
2026-01-22 01:06:05,906 - main - INFO - ============================================================
2026-01-22 01:06:06,393 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 01:06:06,805 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 01:06:07,073 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 01:06:07,089 - main - INFO - All visualizations saved
2026-01-22 01:06:07,089 - main - INFO - ============================================================
2026-01-22 01:06:07,089 - main - INFO - STAGE 5: Report Generation
2026-01-22 01:06:07,090 - main - INFO - ============================================================
2026-01-22 01:06:07,091 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 01:06:07,092 - main - INFO - 
======================================================================
2026-01-22 01:06:07,092 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 01:06:07,092 - main - INFO - ======================================================================
2026-01-22 01:06:10,468 - MailerService - INFO -   : DANGER
2026-01-22 01:14:39,150 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 01:14:39,151 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 01:14:39,151 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 01:14:39,151 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:14:39,151 - main - INFO - 
======================================================================
2026-01-22 01:14:39,151 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 01:14:39,151 - main - INFO - ======================================================================
2026-01-22 01:14:39,151 - main - INFO - ============================================================
2026-01-22 01:14:39,151 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 01:14:39,152 - main - INFO - ============================================================
2026-01-22 01:14:39,152 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:14:39,152 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 01:14:39,701 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 01:14:39,701 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 01:14:39,701 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 01:14:40,064 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 01:14:40,064 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 01:14:40,064 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 01:14:40,543 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 01:14:40,543 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 01:14:41,389 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 01:14:41,390 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 01:14:41,842 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 01:14:42,286 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 01:14:42,713 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 01:14:43,094 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 01:14:43,538 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 01:14:43,909 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 01:14:44,333 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 01:14:44,773 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 01:14:45,184 - data_fetcher - WARNING - Could not fetch V
2026-01-22 01:14:45,638 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 01:14:45,639 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 01:14:45,641 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 01:14:45,642 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 01:14:45,642 - main - INFO - Data shape: (1254, 9)
2026-01-22 01:14:45,642 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 01:14:45,642 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 01:14:45,643 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 01:14:45,643 - main - INFO - Basic indicators computed
2026-01-22 01:14:45,643 - main - INFO - Returns mean: 0.000515, std: 0.010766
2026-01-22 01:14:45,644 - main - INFO - Volatility mean: 0.154474
2026-01-22 01:14:45,644 - main - INFO - NaN count after preparation: 1275
2026-01-22 01:14:45,644 - main - WARNING - Remaining NaN values: 1275
2026-01-22 01:14:45,645 - main - INFO - NaN values after filling: 1254
2026-01-22 01:14:45,645 - main - INFO - ============================================================
2026-01-22 01:14:45,645 - main - INFO - STAGE 2: Signal Processing
2026-01-22 01:14:45,646 - main - INFO - ============================================================
2026-01-22 01:14:45,646 - main - INFO - Applying Kalman Filter...
2026-01-22 01:14:45,646 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 01:14:45,886 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 01:14:45,886 - main - INFO - Training HMM for regime detection...
2026-01-22 01:14:45,887 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 01:14:45,887 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 01:14:48,141 - signal_processor - INFO - HMM training complete
2026-01-22 01:14:48,141 - signal_processor - INFO - Transition matrix:
[[7.07299337e-04 9.99291259e-01 1.44122944e-06]
 [9.82600171e-01 3.71405322e-03 1.36857757e-02]
 [3.81065436e-03 1.23348628e-02 9.83854483e-01]]
2026-01-22 01:14:48,142 - signal_processor - INFO - Means:
[[1.09225616e-03 1.16982358e-01]
 [1.93719996e-04 1.17784539e-01]
 [2.17488481e-04 2.41567085e-01]]
2026-01-22 01:14:48,142 - main - INFO - Predicting regimes...
2026-01-22 01:14:48,142 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 01:14:48,144 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 01:14:48,145 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 01:14:48,145 - main - INFO - Calculating technical indicators...
2026-01-22 01:14:48,145 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 01:14:48,147 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 01:14:48,147 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 01:14:48,150 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 01:14:48,150 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 01:14:48,150 - main - INFO - Generating hybrid signals...
2026-01-22 01:14:48,151 - strategy - INFO - Generating hybrid signals
2026-01-22 01:14:48,255 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 01:14:48,256 - main - INFO - Signal generation complete:
2026-01-22 01:14:48,257 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 01:14:48,257 - main - INFO - ============================================================
2026-01-22 01:14:48,257 - main - INFO - STAGE 3: Backtesting
2026-01-22 01:14:48,258 - main - INFO - ============================================================
2026-01-22 01:14:48,260 - main - INFO - Backtest Results:
2026-01-22 01:14:48,260 - main - INFO -   Total Return: 57.20% (Benchmark: 90.71%)
2026-01-22 01:14:48,260 - main - INFO -   CAGR: 9.49% (Benchmark: 13.82%)
2026-01-22 01:14:48,260 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 01:14:48,260 - main - INFO -   Sharpe Ratio: 0.871
2026-01-22 01:14:48,260 - main - INFO -   Sortino Ratio: 0.993
2026-01-22 01:14:48,260 - main - INFO -   Win Rate: 41.07%
2026-01-22 01:14:48,261 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.993)
2026-01-22 01:14:48,261 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 01:14:48,261 - main - INFO - ============================================================
2026-01-22 01:14:48,261 - main - INFO - STAGE 4: Visualization
2026-01-22 01:14:48,261 - main - INFO - ============================================================
2026-01-22 01:14:48,748 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 01:14:49,130 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 01:14:49,405 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 01:14:49,419 - main - INFO - All visualizations saved
2026-01-22 01:14:49,419 - main - INFO - ============================================================
2026-01-22 01:14:49,419 - main - INFO - STAGE 5: Report Generation
2026-01-22 01:14:49,420 - main - INFO - ============================================================
2026-01-22 01:14:49,421 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 01:14:49,422 - main - INFO - 
======================================================================
2026-01-22 01:14:49,422 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 01:14:49,422 - main - INFO - ======================================================================
2026-01-22 01:14:53,042 - MailerService - INFO -   : DANGER
2026-01-22 01:28:30,509 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 01:28:30,509 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 01:28:30,509 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 01:28:30,510 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:28:30,510 - main - INFO - 
======================================================================
2026-01-22 01:28:30,510 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 01:28:30,510 - main - INFO - ======================================================================
2026-01-22 01:28:30,510 - main - INFO - ============================================================
2026-01-22 01:28:30,510 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 01:28:30,510 - main - INFO - ============================================================
2026-01-22 01:28:30,510 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:28:30,510 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 01:28:30,914 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 01:28:30,914 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 01:28:30,915 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 01:28:31,277 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 01:28:31,277 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 01:28:31,277 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 01:28:31,769 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 01:28:31,769 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 01:28:32,585 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 01:28:32,585 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 01:28:33,029 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 01:28:33,416 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 01:28:33,862 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 01:28:34,231 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 01:28:34,663 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 01:28:35,054 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 01:28:35,497 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 01:28:35,999 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 01:28:36,381 - data_fetcher - WARNING - Could not fetch V
2026-01-22 01:28:36,806 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 01:28:36,807 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 01:28:36,810 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 01:28:36,810 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 01:28:36,811 - main - INFO - Data shape: (1254, 9)
2026-01-22 01:28:36,811 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 01:28:36,811 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 01:28:36,812 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 01:28:36,812 - main - INFO - Basic indicators computed
2026-01-22 01:28:36,812 - main - INFO - Returns mean: 0.000515, std: 0.010767
2026-01-22 01:28:36,812 - main - INFO - Volatility mean: 0.154474
2026-01-22 01:28:36,813 - main - INFO - NaN count after preparation: 1275
2026-01-22 01:28:36,813 - main - WARNING - Remaining NaN values: 1275
2026-01-22 01:28:36,814 - main - INFO - NaN values after filling: 1254
2026-01-22 01:28:36,814 - main - INFO - ============================================================
2026-01-22 01:28:36,814 - main - INFO - STAGE 2: Signal Processing
2026-01-22 01:28:36,814 - main - INFO - ============================================================
2026-01-22 01:28:36,814 - main - INFO - Applying Kalman Filter...
2026-01-22 01:28:36,814 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 01:28:37,027 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 01:28:37,027 - main - INFO - Training HMM for regime detection...
2026-01-22 01:28:37,027 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 01:28:37,028 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 01:28:39,338 - signal_processor - INFO - HMM training complete
2026-01-22 01:28:39,338 - signal_processor - INFO - Transition matrix:
[[7.09525981e-04 9.99289033e-01 1.44101470e-06]
 [9.82588439e-01 3.72582561e-03 1.36857350e-02]
 [3.80699115e-03 1.23386017e-02 9.83854407e-01]]
2026-01-22 01:28:39,338 - signal_processor - INFO - Means:
[[1.09292560e-03 1.16983127e-01]
 [1.93777570e-04 1.17784717e-01]
 [2.17492842e-04 2.41567368e-01]]
2026-01-22 01:28:39,339 - main - INFO - Predicting regimes...
2026-01-22 01:28:39,339 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 01:28:39,341 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 01:28:39,342 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 01:28:39,342 - main - INFO - Calculating technical indicators...
2026-01-22 01:28:39,342 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 01:28:39,343 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 01:28:39,343 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 01:28:39,346 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 01:28:39,347 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 01:28:39,347 - main - INFO - Generating hybrid signals...
2026-01-22 01:28:39,347 - strategy - INFO - Generating hybrid signals
2026-01-22 01:28:39,459 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 01:28:39,460 - main - INFO - Signal generation complete:
2026-01-22 01:28:39,461 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 01:28:39,461 - main - INFO - ============================================================
2026-01-22 01:28:39,461 - main - INFO - STAGE 3: Backtesting
2026-01-22 01:28:39,461 - main - INFO - ============================================================
2026-01-22 01:28:39,463 - main - INFO - Backtest Results:
2026-01-22 01:28:39,463 - main - INFO -   Total Return: 57.25% (Benchmark: 90.77%)
2026-01-22 01:28:39,464 - main - INFO -   CAGR: 9.50% (Benchmark: 13.82%)
2026-01-22 01:28:39,464 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 01:28:39,464 - main - INFO -   Sharpe Ratio: 0.872
2026-01-22 01:28:39,464 - main - INFO -   Sortino Ratio: 0.994
2026-01-22 01:28:39,464 - main - INFO -   Win Rate: 41.07%
2026-01-22 01:28:39,464 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.994)
2026-01-22 01:28:39,464 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 01:28:39,464 - main - INFO - ============================================================
2026-01-22 01:28:39,464 - main - INFO - STAGE 4: Visualization
2026-01-22 01:28:39,465 - main - INFO - ============================================================
2026-01-22 01:28:39,936 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 01:28:40,336 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 01:28:40,601 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 01:28:40,616 - main - INFO - All visualizations saved
2026-01-22 01:28:40,616 - main - INFO - ============================================================
2026-01-22 01:28:40,617 - main - INFO - STAGE 5: Report Generation
2026-01-22 01:28:40,617 - main - INFO - ============================================================
2026-01-22 01:28:40,618 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 01:28:40,619 - main - INFO - 
======================================================================
2026-01-22 01:28:40,619 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 01:28:40,619 - main - INFO - ======================================================================
2026-01-22 01:28:43,765 - MailerService - INFO -   : DANGER
2026-01-22 01:36:10,034 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 01:36:10,034 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 01:36:10,034 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 01:36:10,034 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:36:10,034 - main - INFO - 
======================================================================
2026-01-22 01:36:10,034 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 01:36:10,035 - main - INFO - ======================================================================
2026-01-22 01:36:10,035 - main - INFO - ============================================================
2026-01-22 01:36:10,035 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 01:36:10,035 - main - INFO - ============================================================
2026-01-22 01:36:10,035 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:36:10,035 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 01:36:10,463 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 01:36:10,463 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 01:36:10,463 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 01:36:10,813 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 01:36:10,813 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 01:36:10,813 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 01:36:11,206 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 01:36:11,206 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 01:36:12,129 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 01:36:12,129 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 01:36:12,572 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 01:36:12,999 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 01:36:13,455 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 01:36:13,829 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 01:36:14,290 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 01:36:14,682 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 01:36:15,114 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 01:36:15,687 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 01:36:16,101 - data_fetcher - WARNING - Could not fetch V
2026-01-22 01:36:16,543 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 01:36:16,543 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 01:36:16,546 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 01:36:16,547 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 01:36:16,547 - main - INFO - Data shape: (1254, 9)
2026-01-22 01:36:16,547 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 01:36:16,547 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 01:36:16,548 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 01:36:16,548 - main - INFO - Basic indicators computed
2026-01-22 01:36:16,548 - main - INFO - Returns mean: 0.000514, std: 0.010765
2026-01-22 01:36:16,549 - main - INFO - Volatility mean: 0.154472
2026-01-22 01:36:16,549 - main - INFO - NaN count after preparation: 1275
2026-01-22 01:36:16,549 - main - WARNING - Remaining NaN values: 1275
2026-01-22 01:36:16,550 - main - INFO - NaN values after filling: 1254
2026-01-22 01:36:16,550 - main - INFO - ============================================================
2026-01-22 01:36:16,550 - main - INFO - STAGE 2: Signal Processing
2026-01-22 01:36:16,550 - main - INFO - ============================================================
2026-01-22 01:36:16,550 - main - INFO - Applying Kalman Filter...
2026-01-22 01:36:16,551 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 01:36:16,765 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 01:36:16,765 - main - INFO - Training HMM for regime detection...
2026-01-22 01:36:16,766 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 01:36:16,767 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 01:36:19,073 - signal_processor - INFO - HMM training complete
2026-01-22 01:36:19,074 - signal_processor - INFO - Transition matrix:
[[6.98024316e-04 9.99300534e-01 1.44203472e-06]
 [9.82648837e-01 3.66508000e-03 1.36860832e-02]
 [3.82478303e-03 1.23201247e-02 9.83855092e-01]]
2026-01-22 01:36:19,074 - signal_processor - INFO - Means:
[[1.08928287e-03 1.16978718e-01]
 [1.93517334e-04 1.17783306e-01]
 [2.17494808e-04 2.41564007e-01]]
2026-01-22 01:36:19,075 - main - INFO - Predicting regimes...
2026-01-22 01:36:19,075 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 01:36:19,078 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 01:36:19,079 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 01:36:19,079 - main - INFO - Calculating technical indicators...
2026-01-22 01:36:19,079 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 01:36:19,082 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 01:36:19,082 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 01:36:19,086 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 01:36:19,086 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 01:36:19,087 - main - INFO - Generating hybrid signals...
2026-01-22 01:36:19,087 - strategy - INFO - Generating hybrid signals
2026-01-22 01:36:19,244 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 01:36:19,246 - main - INFO - Signal generation complete:
2026-01-22 01:36:19,247 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 01:36:19,247 - main - INFO - ============================================================
2026-01-22 01:36:19,247 - main - INFO - STAGE 3: Backtesting
2026-01-22 01:36:19,247 - main - INFO - ============================================================
2026-01-22 01:36:19,249 - main - INFO - Backtest Results:
2026-01-22 01:36:19,250 - main - INFO -   Total Return: 56.98% (Benchmark: 90.44%)
2026-01-22 01:36:19,250 - main - INFO -   CAGR: 9.46% (Benchmark: 13.78%)
2026-01-22 01:36:19,250 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 01:36:19,250 - main - INFO -   Sharpe Ratio: 0.869
2026-01-22 01:36:19,250 - main - INFO -   Sortino Ratio: 0.991
2026-01-22 01:36:19,250 - main - INFO -   Win Rate: 41.07%
2026-01-22 01:36:19,250 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.991)
2026-01-22 01:36:19,250 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 01:36:19,251 - main - INFO - ============================================================
2026-01-22 01:36:19,251 - main - INFO - STAGE 4: Visualization
2026-01-22 01:36:19,251 - main - INFO - ============================================================
2026-01-22 01:36:19,710 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 01:36:20,055 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 01:36:20,330 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 01:36:20,343 - main - INFO - All visualizations saved
2026-01-22 01:36:20,343 - main - INFO - ============================================================
2026-01-22 01:36:20,343 - main - INFO - STAGE 5: Report Generation
2026-01-22 01:36:20,343 - main - INFO - ============================================================
2026-01-22 01:36:20,345 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 01:36:20,345 - main - INFO - 
======================================================================
2026-01-22 01:36:20,345 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 01:36:20,345 - main - INFO - ======================================================================
2026-01-22 01:36:23,231 - MailerService - INFO -   : DANGER
2026-01-22 01:55:09,934 - data_fetcher - INFO - DataFetcher initialized with output_dir=d:\gg\crash_detection_system\data
2026-01-22 01:55:09,934 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 01:55:09,934 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 01:55:09,934 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:55:09,935 - main - INFO - 
======================================================================
2026-01-22 01:55:09,935 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 01:55:09,935 - main - INFO - ======================================================================
2026-01-22 01:55:09,935 - main - INFO - ============================================================
2026-01-22 01:55:09,935 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 01:55:09,935 - main - INFO - ============================================================
2026-01-22 01:55:09,935 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 01:55:09,935 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 01:55:10,402 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 01:55:10,402 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 01:55:10,402 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 01:55:10,764 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 01:55:10,765 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 01:55:10,765 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 01:55:11,179 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 01:55:11,179 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 01:55:11,982 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 01:55:11,982 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 01:55:12,418 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 01:55:12,863 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 01:55:13,303 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 01:55:13,665 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 01:55:14,159 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 01:55:14,566 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 01:55:15,059 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 01:55:15,533 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 01:55:15,986 - data_fetcher - WARNING - Could not fetch V
2026-01-22 01:55:16,439 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 01:55:16,439 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 01:55:16,441 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 01:55:16,443 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 01:55:16,443 - main - INFO - Data shape: (1254, 9)
2026-01-22 01:55:16,443 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 01:55:16,443 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 01:55:16,444 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 01:55:16,444 - main - INFO - Basic indicators computed
2026-01-22 01:55:16,444 - main - INFO - Returns mean: 0.000511, std: 0.010764
2026-01-22 01:55:16,445 - main - INFO - Volatility mean: 0.154470
2026-01-22 01:55:16,445 - main - INFO - NaN count after preparation: 1275
2026-01-22 01:55:16,445 - main - WARNING - Remaining NaN values: 1275
2026-01-22 01:55:16,446 - main - INFO - NaN values after filling: 1254
2026-01-22 01:55:16,446 - main - INFO - ============================================================
2026-01-22 01:55:16,446 - main - INFO - STAGE 2: Signal Processing
2026-01-22 01:55:16,446 - main - INFO - ============================================================
2026-01-22 01:55:16,446 - main - INFO - Applying Kalman Filter...
2026-01-22 01:55:16,447 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 01:55:16,660 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 01:55:16,660 - main - INFO - Training HMM for regime detection...
2026-01-22 01:55:16,660 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 01:55:16,661 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 01:55:18,934 - signal_processor - INFO - HMM training complete
2026-01-22 01:55:18,935 - signal_processor - INFO - Transition matrix:
[[6.78288498e-04 9.99320265e-01 1.44649617e-06]
 [9.82751031e-01 3.56220840e-03 1.36867602e-02]
 [3.84567593e-03 1.22980125e-02 9.83856312e-01]]
2026-01-22 01:55:18,935 - signal_processor - INFO - Means:
[[1.08063381e-03 1.16970737e-01]
 [1.93258088e-04 1.17780775e-01]
 [2.17474573e-04 2.41558445e-01]]
2026-01-22 01:55:18,935 - main - INFO - Predicting regimes...
2026-01-22 01:55:18,935 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 01:55:18,937 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 01:55:18,938 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 01:55:18,938 - main - INFO - Calculating technical indicators...
2026-01-22 01:55:18,939 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 01:55:18,940 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 01:55:18,940 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 01:55:18,943 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 01:55:18,944 - signal_processor - INFO - ADX mean: 33.21, std: 12.96
2026-01-22 01:55:18,944 - main - INFO - Generating hybrid signals...
2026-01-22 01:55:18,944 - strategy - INFO - Generating hybrid signals
2026-01-22 01:55:19,058 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 01:55:19,059 - main - INFO - Signal generation complete:
2026-01-22 01:55:19,060 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 01:55:19,060 - main - INFO - ============================================================
2026-01-22 01:55:19,060 - main - INFO - STAGE 3: Backtesting
2026-01-22 01:55:19,060 - main - INFO - ============================================================
2026-01-22 01:55:19,062 - main - INFO - Backtest Results:
2026-01-22 01:55:19,063 - main - INFO -   Total Return: 56.37% (Benchmark: 89.71%)
2026-01-22 01:55:19,063 - main - INFO -   CAGR: 9.38% (Benchmark: 13.70%)
2026-01-22 01:55:19,063 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 01:55:19,063 - main - INFO -   Sharpe Ratio: 0.862
2026-01-22 01:55:19,063 - main - INFO -   Sortino Ratio: 0.983
2026-01-22 01:55:19,063 - main - INFO -   Win Rate: 41.07%
2026-01-22 01:55:19,064 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.983)
2026-01-22 01:55:19,064 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 01:55:19,064 - main - INFO - ============================================================
2026-01-22 01:55:19,064 - main - INFO - STAGE 4: Visualization
2026-01-22 01:55:19,064 - main - INFO - ============================================================
2026-01-22 01:55:19,612 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 01:55:19,992 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 01:55:20,268 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 01:55:20,283 - main - INFO - All visualizations saved
2026-01-22 01:55:20,284 - main - INFO - ============================================================
2026-01-22 01:55:20,284 - main - INFO - STAGE 5: Report Generation
2026-01-22 01:55:20,284 - main - INFO - ============================================================
2026-01-22 01:55:20,285 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 01:55:20,286 - main - INFO - 
======================================================================
2026-01-22 01:55:20,286 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 01:55:20,286 - main - INFO - ======================================================================
2026-01-22 01:55:23,345 - MailerService - INFO -   : DANGER
2026-01-22 12:10:14,747 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 12:10:14,748 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 12:10:14,748 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 12:10:14,748 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 12:10:14,748 - main - INFO - 
======================================================================
2026-01-22 12:10:14,748 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 12:10:14,748 - main - INFO - ======================================================================
2026-01-22 12:10:14,748 - main - INFO - ============================================================
2026-01-22 12:10:14,749 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 12:10:14,749 - main - INFO - ============================================================
2026-01-22 12:10:14,749 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 12:10:14,749 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 12:10:15,224 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 12:10:15,224 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 12:10:15,224 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 12:10:15,600 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 12:10:15,600 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 12:10:15,600 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 12:10:16,028 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 12:10:16,028 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 12:10:16,841 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 12:10:16,841 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 12:10:17,308 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 12:10:17,720 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 12:10:18,179 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 12:10:18,669 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 12:10:19,118 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 12:10:19,484 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 12:10:19,922 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 12:10:20,351 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 12:10:20,798 - data_fetcher - WARNING - Could not fetch V
2026-01-22 12:10:21,248 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 12:10:21,249 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 12:10:21,252 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 12:10:21,253 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 12:10:21,253 - main - INFO - Data shape: (1254, 9)
2026-01-22 12:10:21,253 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 12:10:21,254 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 12:10:21,254 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 12:10:21,254 - main - INFO - Basic indicators computed
2026-01-22 12:10:21,255 - main - INFO - Returns mean: 0.000517, std: 0.010768
2026-01-22 12:10:21,255 - main - INFO - Volatility mean: 0.154475
2026-01-22 12:10:21,256 - main - INFO - NaN count after preparation: 1275
2026-01-22 12:10:21,256 - main - WARNING - Remaining NaN values: 1275
2026-01-22 12:10:21,257 - main - INFO - NaN values after filling: 1254
2026-01-22 12:10:21,257 - main - INFO - ============================================================
2026-01-22 12:10:21,257 - main - INFO - STAGE 2: Signal Processing
2026-01-22 12:10:21,257 - main - INFO - ============================================================
2026-01-22 12:10:21,257 - main - INFO - Applying Kalman Filter...
2026-01-22 12:10:28,361 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 12:10:28,656 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 12:10:28,656 - main - INFO - Training HMM for regime detection...
2026-01-22 12:10:30,350 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 12:10:30,351 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 12:10:34,033 - signal_processor - INFO - HMM training complete
2026-01-22 12:10:34,033 - signal_processor - INFO - Transition matrix:
[[7.19353567e-04 9.99279207e-01 1.43983957e-06]
 [9.82536550e-01 3.77803313e-03 1.36854174e-02]
 [3.78934545e-03 1.23570043e-02 9.83853650e-01]]
2026-01-22 12:10:34,033 - signal_processor - INFO - Means:
[[1.09565582e-03 1.16987302e-01]
 [1.94051572e-04 1.17786448e-01]
 [2.17473242e-04 2.41570839e-01]]
2026-01-22 12:10:34,034 - main - INFO - Predicting regimes...
2026-01-22 12:10:34,034 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 12:10:34,037 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 12:10:34,039 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 12:10:34,039 - main - INFO - Calculating technical indicators...
2026-01-22 12:10:34,039 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 12:10:34,042 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 12:10:34,042 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 12:10:34,046 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 12:10:34,046 - signal_processor - INFO - ADX mean: 33.20, std: 12.96
2026-01-22 12:10:34,046 - main - INFO - Generating hybrid signals...
2026-01-22 12:10:34,046 - strategy - INFO - Generating hybrid signals
2026-01-22 12:10:34,173 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 12:10:34,174 - main - INFO - Signal generation complete:
2026-01-22 12:10:34,175 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 12:10:34,175 - main - INFO - ============================================================
2026-01-22 12:10:34,175 - main - INFO - STAGE 3: Backtesting
2026-01-22 12:10:34,175 - main - INFO - ============================================================
2026-01-22 12:10:34,178 - main - INFO - Backtest Results:
2026-01-22 12:10:34,178 - main - INFO -   Total Return: 57.45% (Benchmark: 91.02%)
2026-01-22 12:10:34,179 - main - INFO -   CAGR: 9.53% (Benchmark: 13.85%)
2026-01-22 12:10:34,179 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 12:10:34,179 - main - INFO -   Sharpe Ratio: 0.874
2026-01-22 12:10:34,179 - main - INFO -   Sortino Ratio: 0.997
2026-01-22 12:10:34,179 - main - INFO -   Win Rate: 41.07%
2026-01-22 12:10:34,179 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.997)
2026-01-22 12:10:34,180 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 12:10:34,180 - main - INFO - ============================================================
2026-01-22 12:10:34,180 - main - INFO - STAGE 4: Visualization
2026-01-22 12:10:34,180 - main - INFO - ============================================================
2026-01-22 12:10:35,358 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 12:10:35,943 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 12:10:36,304 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 12:10:36,320 - main - INFO - All visualizations saved
2026-01-22 12:10:36,320 - main - INFO - ============================================================
2026-01-22 12:10:36,321 - main - INFO - STAGE 5: Report Generation
2026-01-22 12:10:36,321 - main - INFO - ============================================================
2026-01-22 12:10:36,322 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 12:10:36,323 - main - INFO - 
======================================================================
2026-01-22 12:10:36,324 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 12:10:36,324 - main - INFO - ======================================================================
2026-01-22 12:10:39,841 - MailerService - INFO -   : DANGER
2026-01-22 13:13:52,969 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 13:13:52,969 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 13:13:52,970 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 13:13:52,970 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 13:13:52,970 - main - INFO - 
======================================================================
2026-01-22 13:13:52,970 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 13:13:52,970 - main - INFO - ======================================================================
2026-01-22 13:13:52,970 - main - INFO - ============================================================
2026-01-22 13:13:52,970 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 13:13:52,970 - main - INFO - ============================================================
2026-01-22 13:13:52,971 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 13:13:52,971 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 13:13:53,453 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 13:13:53,454 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 13:13:53,454 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 13:13:53,913 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 13:13:53,913 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 13:13:53,914 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 13:13:54,400 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 13:13:54,400 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 13:13:55,373 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 13:13:55,373 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 13:13:55,876 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 13:13:56,443 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 13:13:56,892 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 13:13:57,315 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 13:13:57,769 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 13:13:58,208 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 13:13:58,835 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 13:13:59,350 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 13:13:59,821 - data_fetcher - WARNING - Could not fetch V
2026-01-22 13:14:00,330 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 13:14:00,331 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 13:14:00,334 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 13:14:00,336 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 13:14:00,336 - main - INFO - Data shape: (1521, 9)
2026-01-22 13:14:00,336 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 13:14:00,336 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 13:14:00,337 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 13:14:00,337 - main - INFO - Basic indicators computed
2026-01-22 13:14:00,337 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 13:14:00,338 - main - INFO - Volatility mean: 0.173120
2026-01-22 13:14:00,338 - main - INFO - NaN count after preparation: 1542
2026-01-22 13:14:00,338 - main - WARNING - Remaining NaN values: 1542
2026-01-22 13:14:00,339 - main - INFO - NaN values after filling: 1521
2026-01-22 13:14:00,339 - main - INFO - ============================================================
2026-01-22 13:14:00,339 - main - INFO - STAGE 2: Signal Processing
2026-01-22 13:14:00,339 - main - INFO - ============================================================
2026-01-22 13:14:00,340 - main - INFO - Applying Kalman Filter...
2026-01-22 13:14:04,261 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 13:14:04,526 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 13:14:04,526 - main - INFO - Training HMM for regime detection...
2026-01-22 13:14:04,758 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 13:14:04,758 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 13:14:07,500 - signal_processor - INFO - HMM training complete
2026-01-22 13:14:07,501 - signal_processor - INFO - Transition matrix:
[[1.28513764e-03 9.98714857e-01 5.08646559e-09]
 [9.77216411e-01 1.06297438e-02 1.21538456e-02]
 [1.12911249e-02 2.27963428e-03 9.86429241e-01]]
2026-01-22 13:14:07,501 - signal_processor - INFO - Means:
[[ 1.22714815e-03  1.21127889e-01]
 [ 3.94339591e-04  1.21287646e-01]
 [-4.53275513e-05  2.86199433e-01]]
2026-01-22 13:14:07,501 - main - INFO - Predicting regimes...
2026-01-22 13:14:07,502 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 13:14:07,504 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 13:14:07,506 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 13:14:07,506 - main - INFO - Calculating technical indicators...
2026-01-22 13:14:07,506 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 13:14:07,509 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 13:14:07,509 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 13:14:07,512 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 13:14:07,512 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 13:14:07,512 - main - INFO - Generating hybrid signals...
2026-01-22 13:14:07,512 - strategy - INFO - Generating hybrid signals
2026-01-22 13:14:07,638 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 13:14:07,639 - main - INFO - Signal generation complete:
2026-01-22 13:14:07,640 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 13:14:07,640 - main - INFO - ============================================================
2026-01-22 13:14:07,640 - main - INFO - STAGE 3: Backtesting
2026-01-22 13:14:07,640 - main - INFO - ============================================================
2026-01-22 13:14:07,642 - main - INFO - Backtest Results:
2026-01-22 13:14:07,642 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 13:14:07,643 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 13:14:07,643 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 13:14:07,643 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 13:14:07,643 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 13:14:07,643 - main - INFO -   Win Rate: 41.16%
2026-01-22 13:14:07,643 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 13:14:07,643 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 13:14:07,643 - main - INFO - ============================================================
2026-01-22 13:14:07,644 - main - INFO - STAGE 4: Visualization
2026-01-22 13:14:07,644 - main - INFO - ============================================================
2026-01-22 13:14:08,151 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 13:14:08,531 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 13:14:08,802 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 13:14:08,816 - main - INFO - All visualizations saved
2026-01-22 13:14:08,816 - main - INFO - ============================================================
2026-01-22 13:14:08,816 - main - INFO - STAGE 5: Report Generation
2026-01-22 13:14:08,817 - main - INFO - ============================================================
2026-01-22 13:14:08,818 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 13:14:08,819 - main - INFO - 
======================================================================
2026-01-22 13:14:08,819 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 13:14:08,819 - main - INFO - ======================================================================
2026-01-22 13:17:38,808 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 13:17:38,808 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 13:17:38,808 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 13:17:38,808 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 13:17:38,808 - main - INFO - 
======================================================================
2026-01-22 13:17:38,808 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 13:17:38,809 - main - INFO - ======================================================================
2026-01-22 13:17:38,809 - main - INFO - ============================================================
2026-01-22 13:17:38,809 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 13:17:38,809 - main - INFO - ============================================================
2026-01-22 13:17:38,809 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 13:17:38,809 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 13:17:39,293 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 13:17:39,293 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 13:17:39,293 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 13:17:39,651 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 13:17:39,651 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 13:17:39,652 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 13:17:40,165 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 13:17:40,165 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 13:17:41,278 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 13:17:41,279 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 13:17:41,758 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 13:17:42,243 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 13:17:42,693 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 13:17:43,133 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 13:17:43,568 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 13:17:44,010 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 13:17:44,493 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 13:17:45,006 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 13:17:45,476 - data_fetcher - WARNING - Could not fetch V
2026-01-22 13:17:46,000 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 13:17:46,001 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 13:17:46,003 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 13:17:46,004 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 13:17:46,004 - main - INFO - Data shape: (1521, 9)
2026-01-22 13:17:46,004 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 13:17:46,005 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 13:17:46,005 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 13:17:46,006 - main - INFO - Basic indicators computed
2026-01-22 13:17:46,006 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 13:17:46,006 - main - INFO - Volatility mean: 0.173120
2026-01-22 13:17:46,007 - main - INFO - NaN count after preparation: 1542
2026-01-22 13:17:46,007 - main - WARNING - Remaining NaN values: 1542
2026-01-22 13:17:46,007 - main - INFO - NaN values after filling: 1521
2026-01-22 13:17:46,008 - main - INFO - ============================================================
2026-01-22 13:17:46,008 - main - INFO - STAGE 2: Signal Processing
2026-01-22 13:17:46,008 - main - INFO - ============================================================
2026-01-22 13:17:46,008 - main - INFO - Applying Kalman Filter...
2026-01-22 13:17:46,671 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 13:17:46,928 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 13:17:46,928 - main - INFO - Training HMM for regime detection...
2026-01-22 13:17:47,065 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 13:17:47,066 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 13:17:49,368 - signal_processor - INFO - HMM training complete
2026-01-22 13:17:49,369 - signal_processor - INFO - Transition matrix:
[[1.28509399e-03 9.98714901e-01 5.08483551e-09]
 [9.77216583e-01 1.06295890e-02 1.21538279e-02]
 [1.12907704e-02 2.27998737e-03 9.86429242e-01]]
2026-01-22 13:17:49,369 - signal_processor - INFO - Means:
[[ 1.22716426e-03  1.21127797e-01]
 [ 3.94325845e-04  1.21287581e-01]
 [-4.53293138e-05  2.86199625e-01]]
2026-01-22 13:17:49,369 - main - INFO - Predicting regimes...
2026-01-22 13:17:49,369 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 13:17:49,371 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 13:17:49,372 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 13:17:49,372 - main - INFO - Calculating technical indicators...
2026-01-22 13:17:49,372 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 13:17:49,374 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 13:17:49,374 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 13:17:49,377 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 13:17:49,377 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 13:17:49,378 - main - INFO - Generating hybrid signals...
2026-01-22 13:17:49,378 - strategy - INFO - Generating hybrid signals
2026-01-22 13:17:49,504 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 13:17:49,504 - main - INFO - Signal generation complete:
2026-01-22 13:17:49,505 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 13:17:49,506 - main - INFO - ============================================================
2026-01-22 13:17:49,506 - main - INFO - STAGE 3: Backtesting
2026-01-22 13:17:49,506 - main - INFO - ============================================================
2026-01-22 13:17:49,508 - main - INFO - Backtest Results:
2026-01-22 13:17:49,508 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 13:17:49,508 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 13:17:49,508 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 13:17:49,508 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 13:17:49,508 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 13:17:49,509 - main - INFO -   Win Rate: 41.16%
2026-01-22 13:17:49,509 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 13:17:49,509 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 13:17:49,509 - main - INFO - ============================================================
2026-01-22 13:17:49,509 - main - INFO - STAGE 4: Visualization
2026-01-22 13:17:49,509 - main - INFO - ============================================================
2026-01-22 13:17:49,989 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 13:17:50,371 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 13:17:50,647 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 13:17:50,663 - main - INFO - All visualizations saved
2026-01-22 13:17:50,663 - main - INFO - ============================================================
2026-01-22 13:17:50,663 - main - INFO - STAGE 5: Report Generation
2026-01-22 13:17:50,663 - main - INFO - ============================================================
2026-01-22 13:17:50,664 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 13:17:50,665 - main - INFO - 
======================================================================
2026-01-22 13:17:50,665 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 13:17:50,665 - main - INFO - ======================================================================
2026-01-22 13:31:15,284 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 13:31:15,285 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 13:31:15,285 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 13:31:15,285 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 13:31:15,285 - main - INFO - 
======================================================================
2026-01-22 13:31:15,285 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 13:31:15,285 - main - INFO - ======================================================================
2026-01-22 13:31:15,285 - main - INFO - ============================================================
2026-01-22 13:31:15,285 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 13:31:15,286 - main - INFO - ============================================================
2026-01-22 13:31:15,286 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 13:31:15,286 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 13:31:15,747 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 13:31:15,747 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 13:31:15,748 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 13:31:16,128 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 13:31:16,129 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 13:31:16,129 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 13:31:16,482 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 13:31:16,482 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 13:31:17,458 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 13:31:17,459 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 13:31:17,959 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 13:31:18,428 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 13:31:18,858 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 13:31:19,215 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 13:31:19,709 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 13:31:20,241 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 13:31:20,743 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 13:31:21,299 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 13:31:21,754 - data_fetcher - WARNING - Could not fetch V
2026-01-22 13:31:22,271 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 13:31:22,271 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 13:31:22,273 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 13:31:22,274 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 13:31:22,274 - main - INFO - Data shape: (1521, 9)
2026-01-22 13:31:22,274 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 13:31:22,275 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 13:31:22,275 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 13:31:22,276 - main - INFO - Basic indicators computed
2026-01-22 13:31:22,276 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 13:31:22,276 - main - INFO - Volatility mean: 0.173120
2026-01-22 13:31:22,276 - main - INFO - NaN count after preparation: 1542
2026-01-22 13:31:22,277 - main - WARNING - Remaining NaN values: 1542
2026-01-22 13:31:22,277 - main - INFO - NaN values after filling: 1521
2026-01-22 13:31:22,277 - main - INFO - ============================================================
2026-01-22 13:31:22,278 - main - INFO - STAGE 2: Signal Processing
2026-01-22 13:31:22,278 - main - INFO - ============================================================
2026-01-22 13:31:22,278 - main - INFO - Applying Kalman Filter...
2026-01-22 13:31:22,939 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 13:31:23,217 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 13:31:23,217 - main - INFO - Training HMM for regime detection...
2026-01-22 13:31:23,381 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 13:31:23,381 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 13:31:25,674 - signal_processor - INFO - HMM training complete
2026-01-22 13:31:25,675 - signal_processor - INFO - Transition matrix:
[[1.28515081e-03 9.98714844e-01 5.08400885e-09]
 [9.77216331e-01 1.06299049e-02 1.21537642e-02]
 [1.12906747e-02 2.27998890e-03 9.86429336e-01]]
2026-01-22 13:31:25,675 - signal_processor - INFO - Means:
[[ 1.22715962e-03  1.21127736e-01]
 [ 3.94330589e-04  1.21287514e-01]
 [-4.53280691e-05  2.86199394e-01]]
2026-01-22 13:31:25,675 - main - INFO - Predicting regimes...
2026-01-22 13:31:25,676 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 13:31:25,678 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 13:31:25,678 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 13:31:25,679 - main - INFO - Calculating technical indicators...
2026-01-22 13:31:25,679 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 13:31:25,680 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 13:31:25,680 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 13:31:25,684 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 13:31:25,684 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 13:31:25,684 - main - INFO - Generating hybrid signals...
2026-01-22 13:31:25,684 - strategy - INFO - Generating hybrid signals
2026-01-22 13:31:25,806 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 13:31:25,806 - main - INFO - Signal generation complete:
2026-01-22 13:31:25,807 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 13:31:25,807 - main - INFO - ============================================================
2026-01-22 13:31:25,807 - main - INFO - STAGE 3: Backtesting
2026-01-22 13:31:25,807 - main - INFO - ============================================================
2026-01-22 13:31:25,809 - main - INFO - Backtest Results:
2026-01-22 13:31:25,810 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 13:31:25,810 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 13:31:25,810 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 13:31:25,810 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 13:31:25,810 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 13:31:25,810 - main - INFO -   Win Rate: 41.16%
2026-01-22 13:31:25,810 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 13:31:25,810 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 13:31:25,811 - main - INFO - ============================================================
2026-01-22 13:31:25,811 - main - INFO - STAGE 4: Visualization
2026-01-22 13:31:25,811 - main - INFO - ============================================================
2026-01-22 13:31:26,299 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 13:31:26,670 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 13:31:26,932 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 13:31:26,946 - main - INFO - All visualizations saved
2026-01-22 13:31:26,946 - main - INFO - ============================================================
2026-01-22 13:31:26,946 - main - INFO - STAGE 5: Report Generation
2026-01-22 13:31:26,946 - main - INFO - ============================================================
2026-01-22 13:31:26,948 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 13:31:26,948 - main - INFO - 
======================================================================
2026-01-22 13:31:26,948 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 13:31:26,948 - main - INFO - ======================================================================
2026-01-22 13:52:57,210 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 13:52:57,210 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 13:52:57,211 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 13:52:57,211 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 13:52:57,211 - main - INFO - 
======================================================================
2026-01-22 13:52:57,211 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 13:52:57,211 - main - INFO - ======================================================================
2026-01-22 13:52:57,211 - main - INFO - ============================================================
2026-01-22 13:52:57,211 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 13:52:57,212 - main - INFO - ============================================================
2026-01-22 13:52:57,212 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 13:52:57,212 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 13:52:57,647 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 13:52:57,647 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 13:52:57,647 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 13:52:58,009 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 13:52:58,010 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 13:52:58,010 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 13:52:58,455 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 13:52:58,455 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 13:52:59,285 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 13:52:59,285 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 13:52:59,709 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 13:53:00,122 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 13:53:00,504 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 13:53:00,867 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 13:53:01,329 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 13:53:01,690 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 13:53:02,119 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 13:53:02,622 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 13:53:03,055 - data_fetcher - WARNING - Could not fetch V
2026-01-22 13:53:03,492 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 13:53:03,492 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 13:53:03,494 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 13:53:03,495 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 13:53:03,495 - main - INFO - Data shape: (1254, 9)
2026-01-22 13:53:03,495 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 13:53:03,496 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 13:53:03,496 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 13:53:03,496 - main - INFO - Basic indicators computed
2026-01-22 13:53:03,497 - main - INFO - Returns mean: 0.000517, std: 0.010768
2026-01-22 13:53:03,497 - main - INFO - Volatility mean: 0.154475
2026-01-22 13:53:03,497 - main - INFO - NaN count after preparation: 1275
2026-01-22 13:53:03,497 - main - WARNING - Remaining NaN values: 1275
2026-01-22 13:53:03,498 - main - INFO - NaN values after filling: 1254
2026-01-22 13:53:03,498 - main - INFO - ============================================================
2026-01-22 13:53:03,498 - main - INFO - STAGE 2: Signal Processing
2026-01-22 13:53:03,498 - main - INFO - ============================================================
2026-01-22 13:53:03,499 - main - INFO - Applying Kalman Filter...
2026-01-22 13:53:04,355 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 13:53:04,570 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 13:53:04,570 - main - INFO - Training HMM for regime detection...
2026-01-22 13:53:04,777 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 13:53:04,778 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 13:53:07,176 - signal_processor - INFO - HMM training complete
2026-01-22 13:53:07,176 - signal_processor - INFO - Transition matrix:
[[7.19350892e-04 9.99279209e-01 1.43994812e-06]
 [9.82536541e-01 3.77805137e-03 1.36854077e-02]
 [3.78942011e-03 1.23569526e-02 9.83853627e-01]]
2026-01-22 13:53:07,177 - signal_processor - INFO - Means:
[[1.09564622e-03 1.16987348e-01]
 [1.94054107e-04 1.17786488e-01]
 [2.17480085e-04 2.41570966e-01]]
2026-01-22 13:53:07,177 - main - INFO - Predicting regimes...
2026-01-22 13:53:07,177 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 13:53:07,180 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 13:53:07,181 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 13:53:07,181 - main - INFO - Calculating technical indicators...
2026-01-22 13:53:07,181 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 13:53:07,183 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 13:53:07,183 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 13:53:07,186 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 13:53:07,186 - signal_processor - INFO - ADX mean: 33.20, std: 12.96
2026-01-22 13:53:07,187 - main - INFO - Generating hybrid signals...
2026-01-22 13:53:07,187 - strategy - INFO - Generating hybrid signals
2026-01-22 13:53:07,293 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 13:53:07,294 - main - INFO - Signal generation complete:
2026-01-22 13:53:07,295 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 13:53:07,295 - main - INFO - ============================================================
2026-01-22 13:53:07,295 - main - INFO - STAGE 3: Backtesting
2026-01-22 13:53:07,295 - main - INFO - ============================================================
2026-01-22 13:53:07,297 - main - INFO - Backtest Results:
2026-01-22 13:53:07,297 - main - INFO -   Total Return: 57.45% (Benchmark: 91.02%)
2026-01-22 13:53:07,297 - main - INFO -   CAGR: 9.53% (Benchmark: 13.85%)
2026-01-22 13:53:07,297 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 13:53:07,298 - main - INFO -   Sharpe Ratio: 0.874
2026-01-22 13:53:07,298 - main - INFO -   Sortino Ratio: 0.997
2026-01-22 13:53:07,298 - main - INFO -   Win Rate: 41.07%
2026-01-22 13:53:07,298 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.997)
2026-01-22 13:53:07,298 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 13:53:07,298 - main - INFO - ============================================================
2026-01-22 13:53:07,298 - main - INFO - STAGE 4: Visualization
2026-01-22 13:53:07,298 - main - INFO - ============================================================
2026-01-22 13:53:07,690 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 13:53:08,194 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 13:53:08,495 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 13:53:08,511 - main - INFO - All visualizations saved
2026-01-22 13:53:08,511 - main - INFO - ============================================================
2026-01-22 13:53:08,511 - main - INFO - STAGE 5: Report Generation
2026-01-22 13:53:08,511 - main - INFO - ============================================================
2026-01-22 13:53:08,513 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 13:53:08,513 - main - INFO - 
======================================================================
2026-01-22 13:53:08,513 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 13:53:08,514 - main - INFO - ======================================================================
2026-01-22 13:53:12,113 - MailerService - INFO -   : DANGER
2026-01-22 13:57:43,579 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 13:57:43,579 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 13:57:43,579 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 13:57:43,579 - main - INFO - CrashDetectionPipeline initialized: SPY (2021-01-23 to 2026-01-22)
2026-01-22 13:57:43,579 - main - INFO - 
======================================================================
2026-01-22 13:57:43,579 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 13:57:43,579 - main - INFO - ======================================================================
2026-01-22 13:57:43,579 - main - INFO - ============================================================
2026-01-22 13:57:43,580 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 13:57:43,580 - main - INFO - ============================================================
2026-01-22 13:57:43,580 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2021-01-23 to 2026-01-22)
2026-01-22 13:57:43,580 - data_fetcher - INFO - Fetching SPY data from 2021-01-23 to 2026-01-22
2026-01-22 13:57:44,885 - data_fetcher - INFO - Successfully fetched 1254 rows for SPY
2026-01-22 13:57:44,886 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 13:57:44,886 - data_fetcher - INFO - Fetching VIX and VVIX data from 2021-01-23 to 2026-01-22
2026-01-22 13:57:45,248 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 13:57:45,248 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 13:57:45,248 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 13:57:45,682 - data_fetcher - INFO - VIX proxy created with shape: (1230, 2)
2026-01-22 13:57:45,682 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 13:57:46,466 - data_fetcher - INFO - Credit spread proxy computed, shape: (1254,)
2026-01-22 13:57:46,466 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 13:57:46,908 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 13:57:47,299 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 13:57:47,732 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 13:57:48,126 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 13:57:48,579 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 13:57:48,929 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 13:57:49,342 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 13:57:49,828 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 13:57:50,218 - data_fetcher - WARNING - Could not fetch V
2026-01-22 13:57:50,676 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 13:57:50,677 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 13:57:50,679 - data_fetcher - WARNING - Remaining NaN values after filling: 1254
2026-01-22 13:57:50,680 - data_fetcher - INFO - Comprehensive dataset created: shape=(1254, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 13:57:50,680 - main - INFO - Data shape: (1254, 9)
2026-01-22 13:57:50,680 - main - INFO - Date range: 2021-01-25 00:00:00 to 2026-01-21 00:00:00
2026-01-22 13:57:50,680 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 13:57:50,681 - signal_processor - INFO - Realized volatility computed. Shape: (1254,)
2026-01-22 13:57:50,681 - main - INFO - Basic indicators computed
2026-01-22 13:57:50,682 - main - INFO - Returns mean: 0.000517, std: 0.010768
2026-01-22 13:57:50,682 - main - INFO - Volatility mean: 0.154475
2026-01-22 13:57:50,682 - main - INFO - NaN count after preparation: 1275
2026-01-22 13:57:50,683 - main - WARNING - Remaining NaN values: 1275
2026-01-22 13:57:50,683 - main - INFO - NaN values after filling: 1254
2026-01-22 13:57:50,683 - main - INFO - ============================================================
2026-01-22 13:57:50,684 - main - INFO - STAGE 2: Signal Processing
2026-01-22 13:57:50,684 - main - INFO - ============================================================
2026-01-22 13:57:50,684 - main - INFO - Applying Kalman Filter...
2026-01-22 13:57:51,381 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 13:57:51,589 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1254,)
2026-01-22 13:57:51,590 - main - INFO - Training HMM for regime detection...
2026-01-22 13:57:51,734 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 13:57:51,734 - signal_processor - INFO - Training data shape: (1254, 2)
2026-01-22 13:57:54,028 - signal_processor - INFO - HMM training complete
2026-01-22 13:57:54,028 - signal_processor - INFO - Transition matrix:
[[7.19306657e-04 9.99279253e-01 1.43990513e-06]
 [9.82536787e-01 3.77781560e-03 1.36853973e-02]
 [3.78964984e-03 1.23567254e-02 9.83853625e-01]]
2026-01-22 13:57:54,028 - signal_processor - INFO - Means:
[[1.09564759e-03 1.16987337e-01]
 [1.94057504e-04 1.17786460e-01]
 [2.17474836e-04 2.41571036e-01]]
2026-01-22 13:57:54,029 - main - INFO - Predicting regimes...
2026-01-22 13:57:54,029 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 13:57:54,031 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 13:57:54,032 - signal_processor - INFO - State distribution:
0    437
1    443
2    374
Name: count, dtype: int64
2026-01-22 13:57:54,032 - main - INFO - Calculating technical indicators...
2026-01-22 13:57:54,032 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 13:57:54,034 - signal_processor - INFO - RSI calculation complete. Mean: 79.87, Std: 38.58
2026-01-22 13:57:54,034 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 13:57:54,037 - signal_processor - INFO - ADX calculation complete. Shape: (1254,)
2026-01-22 13:57:54,037 - signal_processor - INFO - ADX mean: 33.20, std: 12.96
2026-01-22 13:57:54,037 - main - INFO - Generating hybrid signals...
2026-01-22 13:57:54,038 - strategy - INFO - Generating hybrid signals
2026-01-22 13:57:54,145 - strategy - INFO - Signals generated: 193 STRONG_SELL, 141 SELL
2026-01-22 13:57:54,145 - main - INFO - Signal generation complete:
2026-01-22 13:57:54,146 - main - INFO - Signal distribution:
signal
-2    193
-1    141
 0    920
Name: count, dtype: int64
2026-01-22 13:57:54,146 - main - INFO - ============================================================
2026-01-22 13:57:54,147 - main - INFO - STAGE 3: Backtesting
2026-01-22 13:57:54,147 - main - INFO - ============================================================
2026-01-22 13:57:54,149 - main - INFO - Backtest Results:
2026-01-22 13:57:54,149 - main - INFO -   Total Return: 57.45% (Benchmark: 91.02%)
2026-01-22 13:57:54,149 - main - INFO -   CAGR: 9.53% (Benchmark: 13.85%)
2026-01-22 13:57:54,149 - main - INFO -   Max Drawdown: -21.03%
2026-01-22 13:57:54,149 - main - INFO -   Sharpe Ratio: 0.874
2026-01-22 13:57:54,149 - main - INFO -   Sortino Ratio: 0.997
2026-01-22 13:57:54,149 - main - INFO -   Win Rate: 41.07%
2026-01-22 13:57:54,150 - main - WARNING - [WARN] Sortino Ratio target not met (current: 0.997)
2026-01-22 13:57:54,150 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 13:57:54,150 - main - INFO - ============================================================
2026-01-22 13:57:54,150 - main - INFO - STAGE 4: Visualization
2026-01-22 13:57:54,150 - main - INFO - ============================================================
2026-01-22 13:57:54,491 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 13:57:55,003 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 13:57:55,278 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 13:57:55,292 - main - INFO - All visualizations saved
2026-01-22 13:57:55,292 - main - INFO - ============================================================
2026-01-22 13:57:55,292 - main - INFO - STAGE 5: Report Generation
2026-01-22 13:57:55,292 - main - INFO - ============================================================
2026-01-22 13:57:55,294 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 13:57:55,294 - main - INFO - 
======================================================================
2026-01-22 13:57:55,295 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 13:57:55,295 - main - INFO - ======================================================================
2026-01-22 13:57:58,459 - MailerService - INFO -   : NORMAL
2026-01-22 14:08:48,151 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 14:08:48,151 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 14:08:48,151 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 14:08:48,151 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:08:48,151 - main - INFO - 
======================================================================
2026-01-22 14:08:48,151 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 14:08:48,152 - main - INFO - ======================================================================
2026-01-22 14:08:48,152 - main - INFO - ============================================================
2026-01-22 14:08:48,152 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 14:08:48,152 - main - INFO - ============================================================
2026-01-22 14:08:48,152 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:08:48,152 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 14:08:48,660 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 14:08:48,660 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 14:08:48,660 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 14:08:49,010 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 14:08:49,011 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 14:08:49,011 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 14:08:49,496 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 14:08:49,496 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 14:08:50,443 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 14:08:50,444 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 14:08:50,916 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 14:08:51,358 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 14:08:51,894 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 14:08:52,257 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 14:08:52,741 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 14:08:53,164 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 14:08:53,650 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 14:08:54,187 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 14:08:54,659 - data_fetcher - WARNING - Could not fetch V
2026-01-22 14:08:55,173 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 14:08:55,173 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 14:08:55,175 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 14:08:55,176 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 14:08:55,176 - main - INFO - Data shape: (1521, 9)
2026-01-22 14:08:55,176 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 14:08:55,177 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 14:08:55,177 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 14:08:55,178 - main - INFO - Basic indicators computed
2026-01-22 14:08:55,178 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 14:08:55,178 - main - INFO - Volatility mean: 0.173120
2026-01-22 14:08:55,178 - main - INFO - NaN count after preparation: 1542
2026-01-22 14:08:55,179 - main - WARNING - Remaining NaN values: 1542
2026-01-22 14:08:55,179 - main - INFO - NaN values after filling: 1521
2026-01-22 14:08:55,179 - main - INFO - ============================================================
2026-01-22 14:08:55,180 - main - INFO - STAGE 2: Signal Processing
2026-01-22 14:08:55,180 - main - INFO - ============================================================
2026-01-22 14:08:55,180 - main - INFO - Applying Kalman Filter...
2026-01-22 14:08:55,870 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 14:08:56,129 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 14:08:56,129 - main - INFO - Training HMM for regime detection...
2026-01-22 14:08:56,271 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 14:08:56,272 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 14:08:58,644 - signal_processor - INFO - HMM training complete
2026-01-22 14:08:58,645 - signal_processor - INFO - Transition matrix:
[[1.28509153e-03 9.98714903e-01 5.08335517e-09]
 [9.77216713e-01 1.06295380e-02 1.21537491e-02]
 [1.12905227e-02 2.28015512e-03 9.86429322e-01]]
2026-01-22 14:08:58,645 - signal_processor - INFO - Means:
[[ 1.22716758e-03  1.21127755e-01]
 [ 3.94331177e-04  1.21287543e-01]
 [-4.53400769e-05  2.86199530e-01]]
2026-01-22 14:08:58,645 - main - INFO - Predicting regimes...
2026-01-22 14:08:58,646 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 14:08:58,648 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 14:08:58,648 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 14:08:58,649 - main - INFO - Calculating technical indicators...
2026-01-22 14:08:58,649 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 14:08:58,650 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 14:08:58,650 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 14:08:58,653 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 14:08:58,654 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 14:08:58,654 - main - INFO - Generating hybrid signals...
2026-01-22 14:08:58,654 - strategy - INFO - Generating hybrid signals
2026-01-22 14:08:58,780 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 14:08:58,780 - main - INFO - Signal generation complete:
2026-01-22 14:08:58,781 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 14:08:58,781 - main - INFO - ============================================================
2026-01-22 14:08:58,782 - main - INFO - STAGE 3: Backtesting
2026-01-22 14:08:58,782 - main - INFO - ============================================================
2026-01-22 14:08:58,784 - main - INFO - Backtest Results:
2026-01-22 14:08:58,784 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 14:08:58,784 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 14:08:58,784 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 14:08:58,784 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 14:08:58,784 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 14:08:58,784 - main - INFO -   Win Rate: 41.16%
2026-01-22 14:08:58,784 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 14:08:58,785 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 14:08:58,785 - main - INFO - ============================================================
2026-01-22 14:08:58,785 - main - INFO - STAGE 4: Visualization
2026-01-22 14:08:58,785 - main - INFO - ============================================================
2026-01-22 14:08:59,265 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 14:08:59,651 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 14:08:59,928 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 14:08:59,942 - main - INFO - All visualizations saved
2026-01-22 14:08:59,943 - main - INFO - ============================================================
2026-01-22 14:08:59,943 - main - INFO - STAGE 5: Report Generation
2026-01-22 14:08:59,943 - main - INFO - ============================================================
2026-01-22 14:08:59,945 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 14:08:59,945 - main - INFO - 
======================================================================
2026-01-22 14:08:59,945 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 14:08:59,945 - main - INFO - ======================================================================
2026-01-22 14:22:14,783 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 14:22:14,784 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 14:22:14,784 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 14:22:14,784 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:22:14,784 - main - INFO - 
======================================================================
2026-01-22 14:22:14,784 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 14:22:14,784 - main - INFO - ======================================================================
2026-01-22 14:22:14,785 - main - INFO - ============================================================
2026-01-22 14:22:14,785 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 14:22:14,785 - main - INFO - ============================================================
2026-01-22 14:22:14,785 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:22:14,785 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 14:22:15,285 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 14:22:15,285 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 14:22:15,285 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 14:22:15,661 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 14:22:15,661 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 14:22:15,661 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 14:22:16,118 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 14:22:16,119 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 14:22:17,127 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 14:22:17,127 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 14:22:17,672 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 14:22:18,146 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 14:22:18,641 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 14:22:19,117 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 14:22:19,573 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 14:22:20,007 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 14:22:20,502 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 14:22:21,029 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 14:22:21,501 - data_fetcher - WARNING - Could not fetch V
2026-01-22 14:22:22,060 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 14:22:22,061 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 14:22:22,075 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 14:22:22,077 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 14:22:22,077 - main - INFO - Data shape: (1521, 9)
2026-01-22 14:22:22,077 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 14:22:22,078 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 14:22:22,079 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 14:22:22,079 - main - INFO - Basic indicators computed
2026-01-22 14:22:22,079 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 14:22:22,079 - main - INFO - Volatility mean: 0.173120
2026-01-22 14:22:22,080 - main - INFO - NaN count after preparation: 1542
2026-01-22 14:22:22,080 - main - WARNING - Remaining NaN values: 1542
2026-01-22 14:22:22,081 - main - INFO - NaN values after filling: 1521
2026-01-22 14:22:22,082 - main - INFO - ============================================================
2026-01-22 14:22:22,082 - main - INFO - STAGE 2: Signal Processing
2026-01-22 14:22:22,082 - main - INFO - ============================================================
2026-01-22 14:22:22,082 - main - INFO - Applying Kalman Filter...
2026-01-22 14:22:23,023 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 14:22:23,313 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 14:22:23,313 - main - INFO - Training HMM for regime detection...
2026-01-22 14:22:23,547 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 14:22:23,547 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 14:22:26,201 - signal_processor - INFO - HMM training complete
2026-01-22 14:22:26,201 - signal_processor - INFO - Transition matrix:
[[1.28510249e-03 9.98714892e-01 5.08500881e-09]
 [9.77216632e-01 1.06295718e-02 1.21537965e-02]
 [1.12909654e-02 2.27976772e-03 9.86429267e-01]]
2026-01-22 14:22:26,201 - signal_processor - INFO - Means:
[[ 1.22715209e-03  1.21127870e-01]
 [ 3.94336297e-04  1.21287632e-01]
 [-4.53296959e-05  2.86199682e-01]]
2026-01-22 14:22:26,202 - main - INFO - Predicting regimes...
2026-01-22 14:22:26,202 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 14:22:26,205 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 14:22:26,207 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 14:22:26,207 - main - INFO - Calculating technical indicators...
2026-01-22 14:22:26,208 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 14:22:26,211 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 14:22:26,211 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 14:22:26,214 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 14:22:26,214 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 14:22:26,215 - main - INFO - Generating hybrid signals...
2026-01-22 14:22:26,215 - strategy - INFO - Generating hybrid signals
2026-01-22 14:22:26,352 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 14:22:26,352 - main - INFO - Signal generation complete:
2026-01-22 14:22:26,353 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 14:22:26,353 - main - INFO - ============================================================
2026-01-22 14:22:26,353 - main - INFO - STAGE 3: Backtesting
2026-01-22 14:22:26,354 - main - INFO - ============================================================
2026-01-22 14:22:26,357 - main - INFO - Backtest Results:
2026-01-22 14:22:26,357 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 14:22:26,357 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 14:22:26,358 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 14:22:26,358 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 14:22:26,358 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 14:22:26,358 - main - INFO -   Win Rate: 41.16%
2026-01-22 14:22:26,358 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 14:22:26,358 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 14:22:26,359 - main - INFO - ============================================================
2026-01-22 14:22:26,359 - main - INFO - STAGE 4: Visualization
2026-01-22 14:22:26,359 - main - INFO - ============================================================
2026-01-22 14:22:26,934 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 14:22:27,363 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 14:22:27,680 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 14:22:27,699 - main - INFO - All visualizations saved
2026-01-22 14:22:27,700 - main - INFO - ============================================================
2026-01-22 14:22:27,700 - main - INFO - STAGE 5: Report Generation
2026-01-22 14:22:27,700 - main - INFO - ============================================================
2026-01-22 14:22:27,702 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 14:22:27,702 - main - INFO - 
======================================================================
2026-01-22 14:22:27,702 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 14:22:27,702 - main - INFO - ======================================================================
2026-01-22 14:30:59,272 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 14:30:59,272 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 14:30:59,272 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 14:30:59,273 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:30:59,273 - main - INFO - 
======================================================================
2026-01-22 14:30:59,273 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 14:30:59,273 - main - INFO - ======================================================================
2026-01-22 14:30:59,273 - main - INFO - ============================================================
2026-01-22 14:30:59,273 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 14:30:59,273 - main - INFO - ============================================================
2026-01-22 14:30:59,273 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:30:59,274 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 14:30:59,312 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 14:30:59,312 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 14:30:59,312 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 14:30:59,662 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 14:30:59,662 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 14:30:59,662 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 14:30:59,688 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 14:30:59,688 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 14:31:00,618 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 14:31:00,618 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 14:31:01,101 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 14:31:01,563 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 14:31:02,006 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 14:31:02,409 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 14:31:02,871 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 14:31:03,261 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 14:31:03,779 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 14:31:04,321 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 14:31:04,768 - data_fetcher - WARNING - Could not fetch V
2026-01-22 14:31:05,299 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 14:31:05,300 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 14:31:05,301 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 14:31:05,302 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 14:31:05,303 - main - INFO - Data shape: (1521, 9)
2026-01-22 14:31:05,303 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 14:31:05,303 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 14:31:05,304 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 14:31:05,304 - main - INFO - Basic indicators computed
2026-01-22 14:31:05,305 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 14:31:05,305 - main - INFO - Volatility mean: 0.173120
2026-01-22 14:31:05,306 - main - INFO - NaN count after preparation: 1542
2026-01-22 14:31:05,306 - main - WARNING - Remaining NaN values: 1542
2026-01-22 14:31:05,307 - main - INFO - NaN values after filling: 1521
2026-01-22 14:31:05,307 - main - INFO - ============================================================
2026-01-22 14:31:05,307 - main - INFO - STAGE 2: Signal Processing
2026-01-22 14:31:05,307 - main - INFO - ============================================================
2026-01-22 14:31:05,307 - main - INFO - Applying Kalman Filter...
2026-01-22 14:31:06,122 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 14:31:06,440 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 14:31:06,441 - main - INFO - Training HMM for regime detection...
2026-01-22 14:31:06,592 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 14:31:06,594 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 14:31:09,212 - signal_processor - INFO - HMM training complete
2026-01-22 14:31:09,212 - signal_processor - INFO - Transition matrix:
[[1.28516276e-03 9.98714832e-01 5.08388053e-09]
 [9.77216421e-01 1.06299442e-02 1.21536344e-02]
 [1.12907588e-02 2.27975328e-03 9.86429488e-01]]
2026-01-22 14:31:09,212 - signal_processor - INFO - Means:
[[ 1.22715777e-03  1.21127798e-01]
 [ 3.94330472e-04  1.21287563e-01]
 [-4.53268446e-05  2.86199250e-01]]
2026-01-22 14:31:09,213 - main - INFO - Predicting regimes...
2026-01-22 14:31:09,213 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 14:31:09,216 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 14:31:09,217 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 14:31:09,217 - main - INFO - Calculating technical indicators...
2026-01-22 14:31:09,217 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 14:31:09,219 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 14:31:09,219 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 14:31:09,223 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 14:31:09,223 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 14:31:09,223 - main - INFO - Generating hybrid signals...
2026-01-22 14:31:09,224 - strategy - INFO - Generating hybrid signals
2026-01-22 14:31:09,393 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 14:31:09,393 - main - INFO - Signal generation complete:
2026-01-22 14:31:09,394 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 14:31:09,394 - main - INFO - ============================================================
2026-01-22 14:31:09,395 - main - INFO - STAGE 3: Backtesting
2026-01-22 14:31:09,395 - main - INFO - ============================================================
2026-01-22 14:31:09,397 - main - INFO - Backtest Results:
2026-01-22 14:31:09,397 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 14:31:09,397 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 14:31:09,397 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 14:31:09,397 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 14:31:09,397 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 14:31:09,398 - main - INFO -   Win Rate: 41.16%
2026-01-22 14:31:09,398 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 14:31:09,398 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 14:31:09,398 - main - INFO - ============================================================
2026-01-22 14:31:09,398 - main - INFO - STAGE 4: Visualization
2026-01-22 14:31:09,398 - main - INFO - ============================================================
2026-01-22 14:31:09,898 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 14:31:10,289 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 14:31:10,587 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 14:31:10,602 - main - INFO - All visualizations saved
2026-01-22 14:31:10,602 - main - INFO - ============================================================
2026-01-22 14:31:10,603 - main - INFO - STAGE 5: Report Generation
2026-01-22 14:31:10,603 - main - INFO - ============================================================
2026-01-22 14:31:10,604 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 14:31:10,605 - main - INFO - 
======================================================================
2026-01-22 14:31:10,605 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 14:31:10,605 - main - INFO - ======================================================================
2026-01-22 14:32:04,739 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 14:32:04,739 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 14:32:04,739 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 14:32:04,739 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:32:04,740 - main - INFO - 
======================================================================
2026-01-22 14:32:04,740 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 14:32:04,740 - main - INFO - ======================================================================
2026-01-22 14:32:04,740 - main - INFO - ============================================================
2026-01-22 14:32:04,740 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 14:32:04,740 - main - INFO - ============================================================
2026-01-22 14:32:04,740 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:32:04,741 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 14:32:04,776 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 14:32:04,776 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 14:32:04,776 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 14:32:05,148 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 14:32:05,148 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 14:32:05,148 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 14:32:05,174 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 14:32:05,174 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 14:32:06,102 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 14:32:06,102 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 14:32:06,638 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 14:32:07,104 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 14:32:07,560 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 14:32:07,981 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 14:32:08,447 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 14:32:08,889 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 14:32:09,394 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 14:32:10,003 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 14:32:10,477 - data_fetcher - WARNING - Could not fetch V
2026-01-22 14:32:10,959 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 14:32:10,960 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 14:32:10,962 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 14:32:10,963 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 14:32:10,963 - main - INFO - Data shape: (1521, 9)
2026-01-22 14:32:10,963 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 14:32:10,964 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 14:32:10,964 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 14:32:10,965 - main - INFO - Basic indicators computed
2026-01-22 14:32:10,965 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 14:32:10,965 - main - INFO - Volatility mean: 0.173120
2026-01-22 14:32:10,966 - main - INFO - NaN count after preparation: 1542
2026-01-22 14:32:10,966 - main - WARNING - Remaining NaN values: 1542
2026-01-22 14:32:10,966 - main - INFO - NaN values after filling: 1521
2026-01-22 14:32:10,967 - main - INFO - ============================================================
2026-01-22 14:32:10,967 - main - INFO - STAGE 2: Signal Processing
2026-01-22 14:32:10,967 - main - INFO - ============================================================
2026-01-22 14:32:10,967 - main - INFO - Applying Kalman Filter...
2026-01-22 14:32:11,686 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 14:32:12,005 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 14:32:12,006 - main - INFO - Training HMM for regime detection...
2026-01-22 14:32:12,154 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 14:32:12,155 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 14:32:14,404 - signal_processor - INFO - HMM training complete
2026-01-22 14:32:14,404 - signal_processor - INFO - Transition matrix:
[[1.28504619e-03 9.98714949e-01 5.08456464e-09]
 [9.77217050e-01 1.06292090e-02 1.21537414e-02]
 [1.12907935e-02 2.27997446e-03 9.86429232e-01]]
2026-01-22 14:32:14,405 - signal_processor - INFO - Means:
[[ 1.22716224e-03  1.21127951e-01]
 [ 3.94331768e-04  1.21287721e-01]
 [-4.53390417e-05  2.86199950e-01]]
2026-01-22 14:32:14,405 - main - INFO - Predicting regimes...
2026-01-22 14:32:14,405 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 14:32:14,407 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 14:32:14,408 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 14:32:14,408 - main - INFO - Calculating technical indicators...
2026-01-22 14:32:14,408 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 14:32:14,410 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 14:32:14,411 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 14:32:14,414 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 14:32:14,414 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 14:32:14,414 - main - INFO - Generating hybrid signals...
2026-01-22 14:32:14,415 - strategy - INFO - Generating hybrid signals
2026-01-22 14:32:14,545 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 14:32:14,546 - main - INFO - Signal generation complete:
2026-01-22 14:32:14,547 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 14:32:14,547 - main - INFO - ============================================================
2026-01-22 14:32:14,547 - main - INFO - STAGE 3: Backtesting
2026-01-22 14:32:14,547 - main - INFO - ============================================================
2026-01-22 14:32:14,550 - main - INFO - Backtest Results:
2026-01-22 14:32:14,551 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 14:32:14,551 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 14:32:14,551 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 14:32:14,551 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 14:32:14,551 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 14:32:14,551 - main - INFO -   Win Rate: 41.16%
2026-01-22 14:32:14,552 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 14:32:14,552 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 14:32:14,552 - main - INFO - ============================================================
2026-01-22 14:32:14,552 - main - INFO - STAGE 4: Visualization
2026-01-22 14:32:14,552 - main - INFO - ============================================================
2026-01-22 14:32:15,075 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 14:32:15,459 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 14:32:15,755 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 14:32:15,769 - main - INFO - All visualizations saved
2026-01-22 14:32:15,769 - main - INFO - ============================================================
2026-01-22 14:32:15,770 - main - INFO - STAGE 5: Report Generation
2026-01-22 14:32:15,770 - main - INFO - ============================================================
2026-01-22 14:32:15,771 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 14:32:15,772 - main - INFO - 
======================================================================
2026-01-22 14:32:15,772 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 14:32:15,772 - main - INFO - ======================================================================
2026-01-22 14:33:29,688 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 14:33:29,688 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 14:33:29,688 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 14:33:29,689 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:33:29,689 - main - INFO - 
======================================================================
2026-01-22 14:33:29,689 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 14:33:29,689 - main - INFO - ======================================================================
2026-01-22 14:33:29,689 - main - INFO - ============================================================
2026-01-22 14:33:29,689 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 14:33:29,689 - main - INFO - ============================================================
2026-01-22 14:33:29,689 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:33:29,689 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 14:33:29,730 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 14:33:29,730 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 14:33:29,730 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 14:33:30,091 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 14:33:30,091 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 14:33:30,091 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 14:33:30,119 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 14:33:30,120 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 14:33:30,927 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 14:33:30,927 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 14:33:31,418 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 14:33:31,937 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 14:33:32,374 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 14:33:32,826 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 14:33:33,280 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 14:33:33,723 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 14:33:34,217 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 14:33:34,796 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 14:33:35,267 - data_fetcher - WARNING - Could not fetch V
2026-01-22 14:33:35,809 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 14:33:35,810 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 14:33:35,812 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 14:33:35,813 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 14:33:35,814 - main - INFO - Data shape: (1521, 9)
2026-01-22 14:33:35,814 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 14:33:35,814 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 14:33:35,815 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 14:33:35,815 - main - INFO - Basic indicators computed
2026-01-22 14:33:35,816 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 14:33:35,816 - main - INFO - Volatility mean: 0.173120
2026-01-22 14:33:35,816 - main - INFO - NaN count after preparation: 1542
2026-01-22 14:33:35,816 - main - WARNING - Remaining NaN values: 1542
2026-01-22 14:33:35,818 - main - INFO - NaN values after filling: 1521
2026-01-22 14:33:35,818 - main - INFO - ============================================================
2026-01-22 14:33:35,818 - main - INFO - STAGE 2: Signal Processing
2026-01-22 14:33:35,818 - main - INFO - ============================================================
2026-01-22 14:33:35,818 - main - INFO - Applying Kalman Filter...
2026-01-22 14:33:36,686 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 14:33:36,999 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 14:33:37,000 - main - INFO - Training HMM for regime detection...
2026-01-22 14:33:37,161 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 14:33:37,162 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 14:33:39,452 - signal_processor - INFO - HMM training complete
2026-01-22 14:33:39,452 - signal_processor - INFO - Transition matrix:
[[1.28506639e-03 9.98714929e-01 5.08525040e-09]
 [9.77217043e-01 1.06292920e-02 1.21536650e-02]
 [1.12909732e-02 2.27965854e-03 9.86429368e-01]]
2026-01-22 14:33:39,452 - signal_processor - INFO - Means:
[[ 1.22715732e-03  1.21127941e-01]
 [ 3.94343927e-04  1.21287691e-01]
 [-4.53434086e-05  2.86199851e-01]]
2026-01-22 14:33:39,453 - main - INFO - Predicting regimes...
2026-01-22 14:33:39,453 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 14:33:39,455 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 14:33:39,456 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 14:33:39,456 - main - INFO - Calculating technical indicators...
2026-01-22 14:33:39,457 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 14:33:39,458 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 14:33:39,458 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 14:33:39,461 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 14:33:39,461 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 14:33:39,461 - main - INFO - Generating hybrid signals...
2026-01-22 14:33:39,461 - strategy - INFO - Generating hybrid signals
2026-01-22 14:33:39,599 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 14:33:39,600 - main - INFO - Signal generation complete:
2026-01-22 14:33:39,601 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 14:33:39,601 - main - INFO - ============================================================
2026-01-22 14:33:39,601 - main - INFO - STAGE 3: Backtesting
2026-01-22 14:33:39,602 - main - INFO - ============================================================
2026-01-22 14:33:39,604 - main - INFO - Backtest Results:
2026-01-22 14:33:39,604 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 14:33:39,604 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 14:33:39,605 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 14:33:39,605 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 14:33:39,605 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 14:33:39,605 - main - INFO -   Win Rate: 41.16%
2026-01-22 14:33:39,605 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 14:33:39,605 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 14:33:39,605 - main - INFO - ============================================================
2026-01-22 14:33:39,606 - main - INFO - STAGE 4: Visualization
2026-01-22 14:33:39,606 - main - INFO - ============================================================
2026-01-22 14:33:40,191 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 14:33:40,608 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 14:33:40,941 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 14:33:40,957 - main - INFO - All visualizations saved
2026-01-22 14:33:40,957 - main - INFO - ============================================================
2026-01-22 14:33:40,957 - main - INFO - STAGE 5: Report Generation
2026-01-22 14:33:40,957 - main - INFO - ============================================================
2026-01-22 14:33:40,959 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 14:33:40,959 - main - INFO - 
======================================================================
2026-01-22 14:33:40,960 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 14:33:40,960 - main - INFO - ======================================================================
2026-01-22 14:34:09,859 - data_fetcher - INFO - DataFetcher initialized with output_dir=D:\gg\crash_detection_system\data
2026-01-22 14:34:09,859 - signal_processor - INFO - SignalProcessor initialized
2026-01-22 14:34:09,859 - strategy - INFO - Strategy initialized with default parameters
2026-01-22 14:34:09,859 - main - INFO - CrashDetectionPipeline initialized: SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:34:09,859 - main - INFO - 
======================================================================
2026-01-22 14:34:09,860 - main - INFO - STARTING CRASH DETECTION PIPELINE
2026-01-22 14:34:09,860 - main - INFO - ======================================================================
2026-01-22 14:34:09,860 - main - INFO - ============================================================
2026-01-22 14:34:09,860 - main - INFO - STAGE 1: Data Fetching and Preparation
2026-01-22 14:34:09,860 - main - INFO - ============================================================
2026-01-22 14:34:09,860 - data_fetcher - INFO - Creating comprehensive dataset for SPY (2020-01-01 to 2026-01-22)
2026-01-22 14:34:09,861 - data_fetcher - INFO - Fetching SPY data from 2020-01-01 to 2026-01-22
2026-01-22 14:34:09,899 - data_fetcher - INFO - Successfully fetched 1521 rows for SPY
2026-01-22 14:34:09,899 - data_fetcher - INFO - Columns: ['Open', 'High', 'Low', 'Close', 'Volume']
2026-01-22 14:34:09,899 - data_fetcher - INFO - Fetching VIX and VVIX data from 2020-01-01 to 2026-01-22
2026-01-22 14:34:10,253 - data_fetcher - ERROR - Error fetching VIX data: 'Adj Close'
2026-01-22 14:34:10,253 - data_fetcher - WARNING - Using SPY volatility as VIX proxy
2026-01-22 14:34:10,253 - data_fetcher - INFO - Creating VIX proxy from SPY volatility
2026-01-22 14:34:10,278 - data_fetcher - INFO - VIX proxy created with shape: (1497, 2)
2026-01-22 14:34:10,279 - data_fetcher - INFO - Fetching credit spread proxy (HYG vs IEF)
2026-01-22 14:34:11,256 - data_fetcher - INFO - Credit spread proxy computed, shape: (1521,)
2026-01-22 14:34:11,257 - data_fetcher - INFO - Computing market breadth proxy
2026-01-22 14:34:11,792 - data_fetcher - WARNING - Could not fetch AAPL
2026-01-22 14:34:12,258 - data_fetcher - WARNING - Could not fetch MSFT
2026-01-22 14:34:12,702 - data_fetcher - WARNING - Could not fetch GOOGL
2026-01-22 14:34:13,146 - data_fetcher - WARNING - Could not fetch AMZN
2026-01-22 14:34:13,605 - data_fetcher - WARNING - Could not fetch NVDA
2026-01-22 14:34:14,046 - data_fetcher - WARNING - Could not fetch TSLA
2026-01-22 14:34:14,537 - data_fetcher - WARNING - Could not fetch JPM
2026-01-22 14:34:15,055 - data_fetcher - WARNING - Could not fetch JNJ
2026-01-22 14:34:15,518 - data_fetcher - WARNING - Could not fetch V
2026-01-22 14:34:16,044 - data_fetcher - WARNING - Could not fetch WMT
2026-01-22 14:34:16,045 - data_fetcher - INFO - Market breadth proxy computed, shape: (0,)
2026-01-22 14:34:16,047 - data_fetcher - WARNING - Remaining NaN values after filling: 1521
2026-01-22 14:34:16,049 - data_fetcher - INFO - Comprehensive dataset created: shape=(1521, 9), columns=['Open', 'High', 'Low', 'Close', 'Volume', 'VIX', 'VVIX', 'Credit_Spread', 'Breadth']
2026-01-22 14:34:16,049 - main - INFO - Data shape: (1521, 9)
2026-01-22 14:34:16,049 - main - INFO - Date range: 2020-01-02 00:00:00 to 2026-01-21 00:00:00
2026-01-22 14:34:16,049 - signal_processor - INFO - Calculating realized volatility with window=20
2026-01-22 14:34:16,050 - signal_processor - INFO - Realized volatility computed. Shape: (1521,)
2026-01-22 14:34:16,050 - main - INFO - Basic indicators computed
2026-01-22 14:34:16,051 - main - INFO - Returns mean: 0.000549, std: 0.013063
2026-01-22 14:34:16,051 - main - INFO - Volatility mean: 0.173120
2026-01-22 14:34:16,051 - main - INFO - NaN count after preparation: 1542
2026-01-22 14:34:16,052 - main - WARNING - Remaining NaN values: 1542
2026-01-22 14:34:16,053 - main - INFO - NaN values after filling: 1521
2026-01-22 14:34:16,053 - main - INFO - ============================================================
2026-01-22 14:34:16,053 - main - INFO - STAGE 2: Signal Processing
2026-01-22 14:34:16,053 - main - INFO - ============================================================
2026-01-22 14:34:16,053 - main - INFO - Applying Kalman Filter...
2026-01-22 14:34:16,814 - signal_processor - INFO - Applying Kalman Filter with Q=0.0001, R=0.1
2026-01-22 14:34:17,171 - signal_processor - INFO - Kalman smoothing complete. Output shape: (1521,)
2026-01-22 14:34:17,171 - main - INFO - Training HMM for regime detection...
2026-01-22 14:34:17,329 - signal_processor - INFO - Training HMM with 3 states
2026-01-22 14:34:17,330 - signal_processor - INFO - Training data shape: (1521, 2)
2026-01-22 14:34:19,589 - signal_processor - INFO - HMM training complete
2026-01-22 14:34:19,590 - signal_processor - INFO - Transition matrix:
[[1.28499220e-03 9.98715003e-01 5.08541600e-09]
 [9.77217542e-01 1.06287562e-02 1.21537017e-02]
 [1.12904054e-02 2.28031596e-03 9.86429279e-01]]
2026-01-22 14:34:19,590 - signal_processor - INFO - Means:
[[ 1.22713507e-03  1.21127918e-01]
 [ 3.94361681e-04  1.21287690e-01]
 [-4.53420062e-05  2.86200001e-01]]
2026-01-22 14:34:19,590 - main - INFO - Predicting regimes...
2026-01-22 14:34:19,591 - signal_processor - INFO - Predicting regimes using HMM
2026-01-22 14:34:19,593 - signal_processor - INFO - Regime prediction complete. Unique states: [0 1 2]
2026-01-22 14:34:19,594 - signal_processor - INFO - State distribution:
0    527
1    527
2    467
Name: count, dtype: int64
2026-01-22 14:34:19,595 - main - INFO - Calculating technical indicators...
2026-01-22 14:34:19,595 - signal_processor - INFO - Calculating RSI with period=14
2026-01-22 14:34:19,596 - signal_processor - INFO - RSI calculation complete. Mean: 78.84, Std: 39.37
2026-01-22 14:34:19,597 - signal_processor - INFO - Calculating ADX with period=14
2026-01-22 14:34:19,600 - signal_processor - INFO - ADX calculation complete. Shape: (1521,)
2026-01-22 14:34:19,600 - signal_processor - INFO - ADX mean: 33.44, std: 12.92
2026-01-22 14:34:19,600 - main - INFO - Generating hybrid signals...
2026-01-22 14:34:19,601 - strategy - INFO - Generating hybrid signals
2026-01-22 14:34:19,772 - strategy - INFO - Signals generated: 217 STRONG_SELL, 199 SELL
2026-01-22 14:34:19,772 - main - INFO - Signal generation complete:
2026-01-22 14:34:19,773 - main - INFO - Signal distribution:
signal
-2     217
-1     199
 0    1105
Name: count, dtype: int64
2026-01-22 14:34:19,774 - main - INFO - ============================================================
2026-01-22 14:34:19,774 - main - INFO - STAGE 3: Backtesting
2026-01-22 14:34:19,774 - main - INFO - ============================================================
2026-01-22 14:34:19,777 - main - INFO - Backtest Results:
2026-01-22 14:34:19,777 - main - INFO -   Total Return: 93.57% (Benchmark: 130.23%)
2026-01-22 14:34:19,777 - main - INFO -   CAGR: 11.53% (Benchmark: 14.77%)
2026-01-22 14:34:19,777 - main - INFO -   Max Drawdown: -20.35%
2026-01-22 14:34:19,777 - main - INFO -   Sharpe Ratio: 1.014
2026-01-22 14:34:19,777 - main - INFO -   Sortino Ratio: 1.133
2026-01-22 14:34:19,778 - main - INFO -   Win Rate: 41.16%
2026-01-22 14:34:19,778 - main - WARNING - [WARN] Sortino Ratio target not met (current: 1.133)
2026-01-22 14:34:19,778 - main - INFO - [PASS] Max Drawdown target (<50%) ACHIEVED
2026-01-22 14:34:19,778 - main - INFO - ============================================================
2026-01-22 14:34:19,778 - main - INFO - STAGE 4: Visualization
2026-01-22 14:34:19,778 - main - INFO - ============================================================
2026-01-22 14:34:20,315 - main - INFO - Saved: results/01_cumulative_returns.png
2026-01-22 14:34:20,752 - main - INFO - Saved: results/02_signals_and_indicators.png
2026-01-22 14:34:21,065 - main - INFO - Saved: results/03_hmm_regimes.png
2026-01-22 14:34:21,080 - main - INFO - All visualizations saved
2026-01-22 14:34:21,080 - main - INFO - ============================================================
2026-01-22 14:34:21,080 - main - INFO - STAGE 5: Report Generation
2026-01-22 14:34:21,080 - main - INFO - ============================================================
2026-01-22 14:34:21,082 - main - INFO - Report saved to results/backtest_report.json
2026-01-22 14:34:21,083 - main - INFO - 
======================================================================
2026-01-22 14:34:21,083 - main - INFO - PIPELINE EXECUTION COMPLETE [OK]
2026-01-22 14:34:21,083 - main - INFO - ======================================================================
2026-01-22 14:38:35,780 - MailerService - INFO -   : DANGER
