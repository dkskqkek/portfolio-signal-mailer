# 🍎 Antigravity v4.0: 중학생도 이해하는 프로젝트 설명서

이 문서는 복잡한 코드를 몰라도 **"이 인공지능이 도대체 어떻게 돈을 버는지"** 이해할 수 있도록 아주 쉽게 설명했어.

---

## 🏗️ 1. 전체 구조: 3단계 프로세스
이 프로젝트는 크게 **[준비] -> [생각] -> [행동]** 3단계로 움직여.

| 단계        | 역할                                       | 비유 (축구팀)       | 핵심 파일                    |
| :---------- | :----------------------------------------- | :------------------ | :--------------------------- |
| **1. 준비** | 어떤 주식을 살지 정하고 공부할 자료를 모음 | **스카우터 & 코치** | `scripts/run_full_update.py` |
| **2. 생각** | 지금이 공격할 때인지 수비할 때인지 판단함  | **감독 (뇌)**       | `mama_lite_predictor.py`     |
| **3. 행동** | 실제로 주식을 사고팔아서 수익을 냄         | **선수 (손/발)**    | `integrated_run.py`          |

---

## 📂 2. 폴더별/파일별 상세 설명

### 1단계: 준비 (스카우터들)
경기를 뛰기 전에 유능한 선수를 뽑고, 선수들끼리의 호흡을 맞추는 단계야.

1.  **`scripts/update_universe.py` (선수 선발)**
    *   **하는 일:** 미국 주식 수천 개 중에서 **"가장 덩치 크고 잘나가는 20명(Top 20)"**만 뽑아.
    *   **비유:** "전교 1등부터 20등까지 운동장으로 모여!"

2.  **`scripts/create_fallback_adjacency.py` (팀워크 훈련)**
    *   **하는 일:** 뽑힌 20명이 서로 얼마나 친한지(같은 섹터인지) 조사해서 표를 만들어.
    *   **비유:** "너네 둘 다 IT 반이지? 너네끼리 패스 연습 해." (같은 팀끼리 연결해 줌)

3.  **`config.yaml` (작전판)**
    *   **하는 일:** 선발된 선수 명단, 매매 규칙, API 비밀번호 등을 적어두는 공책.
    *   **비유:** 감독님의 비밀 수첩.

---

### 2단계: 생각 (인공지능 감독)
여기가 제일 중요해. AI가 시장을 분석하고 작전을 짜는 곳이야.

1.  **`mama_lite_predictor.py` (메인 두뇌)**
    *   **하는 일:** 두 가지를 동시에 고민해.
        *   **눈치 보기 (Regime Detection):** "지금 시장 분위기가 험악한가(하락장)? 아니면 좋은가(상승장)?" -> VIX(공포지수)를 보고 판단해.
        *   **종목 분석 (GNN):** "누가 지금 컨디션이 제일 좋지?" -> 20명 선수들의 최근 성적과 친구 관계를 분석해서 점수를 매겨.
    *   **비유:** "비 오니까(하락장) 수비 위주로 가자. 근데 손흥민(NVDA) 컨디션이 좋으니 쟤한테만 공 좀 주자."

2.  **`attention_gnn.py` (집중력)**
    *   **하는 일:** 수많은 정보 중에서 **"진짜 중요한 정보"**에만 집중하게 도와주는 AI 기술.
    *   **비유:** 시끄러운 경기장에서 코치님의 목소리만 쏙 골라 듣는 능력.

---

### 3단계: 행동 (주식 매매)
생각이 끝났으면 이제 진짜로 돈을 써야겠지?

1.  **`integrated_run.py` (실행 버튼)**
    *   **하는 일:** 매일 아침 9시에 알람을 울리고, 위의 [생각] 과정을 시작시켜.
    *   **비유:** 학교 종소리.

2.  **`mama_lite_rebalancer.py` (자산 배분)**
    *   **하는 일:** 내 지갑에 있는 돈을 어떻게 나눌지 결정해.
        *   시장 좋음: "주식 100% 가즈아!"
        *   시장 나쁨: "주식 다 팔고, 안전한 국채(TLT)나 현금(BIL) 들고 있자."
    *   **비유:** "오락실 갈 돈이랑 저금할 돈 나누기."

3.  **`order_executor.py` (주문 대리인)**
    *   **하는 일:** 결정된 대로 증권사 서버에 접속해서 "애플 3주 사주세요"라고 주문을 넣어.
    *   **비유:** 심부름센터 직원.

4.  **`kis_api_wrapper.py` (통역사)**
    *   **하는 일:** 파이썬 언어를 한국투자증권 서버가 알아듣는 말로 번역해 줘.
    *   **비유:** 외국인과 대화할 때 쓰는 번역기.

---

## 🔄 3. 하루 일과 (로직 흐름)

이 프로그램이 매일 아침 하는 일을 순서대로 보면 이래.

1.  **09:00 기상 (`integrated_run.py`)**
    *   "일어날 시간이다! 일하자!"
2.  **시장 날씨 확인 (`mama_lite_predictor.py`)**
    *   "오늘 공포지수(VIX) 어때? 높네? 그럼 하락장이니까 몸 사리자."
    *   (결과: 주식 비중 0%, 현금 비중 100%)
3.  **종목 추천 (만약 날씨가 좋다면)**
    *   "날씨 좋았으면 엔비디아(NVDA)랑 마이크로소프트(MSFT)가 제일 좋았을 텐데... 아쉽네."
4.  **주문 실행 (`order_executor.py`)**
    *   "야, 갖고 있는 주식 다 팔고 현금으로 바꿔!" (매도 주문 전송)
5.  **보고 (`mailer_service.py`)**
    *   사용자에게 이메일/디스코드 보내기.
    *   "주인님, 오늘 시장 무서워서 다 현금화했습니다. 칭찬해 주세요."

---

## 🎓 요약
*   **준비:** 최고로 잘나가는 20놈만 뽑는다. (Top 20 Universe)
*   **판단:** 쫄지 말아야 할 때(상승장)와 튀어야 할 때(하락장)를 구분한다. (KMeans)
*   **전략:** 잘나가는 놈들끼리 뭉쳐다니는 성질을 이용해 대장을 찾는다. (GNN Model)
*   **실행:** 알아서 사고팔고 보고한다. (Automation)
